import{s as ut,a as k,e as f,t as z,H as ht,g as D,c as m,b as p,d as G,f as i,p as _t,q as gt,r as e,v as ot,w as K,i as L,h as a,j as it,k as Et}from"../chunks/scheduler.N6BefM9d.js";import{S as yt,i as It,c as lt,b as vt,m as dt,t as ct,a as ft,d as mt}from"../chunks/index.C9XHDwOH.js";import{p as $t}from"../chunks/stores.CSL_zGsi.js";import{N as bt,a as kt,s as Q}from"../chunks/styles.BkXuGDYP.js";import{s as pt}from"../chunks/story.CCjMITgH.js";function Dt(n){let v,x,s,o,d,u,c=n[0].chapter.era.name+"",h,w,y,l=n[0].chapter.name+"",C,J,N,j=n[0].chapter.content+"",P,_,T,V,Y=(n[2]?n[2].name:"back to era map")+"",R,U,g,I,Z="GO TO THE NEXT CHAPTER",X,H,tt=(n[3]?n[3].name:"back to next era map")+"",B,F,O,q,A,$,b;return v=new bt({props:{navigateWithinMap:!1,activeEraID:n[1].params.era}}),$=new kt({props:{eras:pt.eras,navigateWithinMap:!1,activeEraID:n[1].params.era}}),{c(){lt(v.$$.fragment),x=k(),s=f("div"),o=f("div"),d=f("div"),u=f("div"),h=z(c),w=k(),y=f("h1"),C=z(l),J=k(),N=new ht(!1),P=k(),_=f("div"),T=f("div"),V=f("div"),R=z(Y),U=k(),g=f("div"),I=f("div"),I.textContent=Z,X=k(),H=f("div"),B=z(tt),F=k(),O=f("div"),A=k(),lt($.$$.fragment),this.h()},l(t){vt(v.$$.fragment,t),x=D(t),s=m(t,"DIV",{id:!0,class:!0,style:!0});var r=p(s);o=m(r,"DIV",{id:!0,class:!0});var E=p(o);d=m(E,"DIV",{id:!0,class:!0});var S=p(d);u=m(S,"DIV",{id:!0,class:!0});var et=p(u);h=G(et,c),et.forEach(i),w=D(S),y=m(S,"H1",{class:!0});var at=p(y);C=G(at,l),at.forEach(i),S.forEach(i),J=D(E),N=_t(E,!1),P=D(E),_=m(E,"DIV",{id:!0,class:!0});var M=p(_);T=m(M,"DIV",{id:!0});var st=p(T);V=m(st,"DIV",{id:!0,class:!0});var rt=p(V);R=G(rt,Y),rt.forEach(i),st.forEach(i),U=D(M),g=m(M,"DIV",{id:!0,class:!0});var W=p(g);I=m(W,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),gt(I)!=="svelte-ztp0xj"&&(I.textContent=Z),X=D(W),H=m(W,"DIV",{id:!0,class:!0});var nt=p(H);B=G(nt,tt),nt.forEach(i),W.forEach(i),M.forEach(i),E.forEach(i),F=D(r),O=m(r,"DIV",{class:!0}),p(O).forEach(i),r.forEach(i),A=D(t),vt($.$$.fragment,t),this.h()},h(){e(u,"id","era-short-label"),e(u,"class","svelte-1txd4fk"),e(y,"class","svelte-1txd4fk"),e(d,"id","story-context-container"),e(d,"class","svelte-1txd4fk"),N.a=P,e(V,"id","story-footer-navigation-back-button"),e(V,"class","story-footer-navigation-button svelte-1txd4fk"),e(T,"id","story-footer-navigation-back"),e(I,"id","story-footer-navigation-next-label"),e(I,"class","svelte-1txd4fk"),e(H,"id","story-footer-navigation-next-button"),e(H,"class","story-footer-navigation-button svelte-1txd4fk"),e(g,"id","story-footer-navigation-next"),e(g,"class","svelte-1txd4fk"),e(_,"id","story-footer-navigation"),e(_,"class","svelte-1txd4fk"),e(o,"id","story-narrative"),e(o,"class","svelte-1txd4fk"),e(O,"class","story-narrative-footer svelte-1txd4fk"),e(s,"id","story-container"),e(s,"class",q=ot(`era-${n[1].params.era}`)+" svelte-1txd4fk"),K(s,"--color-era-urban-industrial",Q.colorEraUrbanIndustrial),K(s,"--color-era-pre-1600s",Q.colorEraPre1600s),K(s,"--color-era-early-european-settlement",Q.colorEraEarlyEuropeanSettlement)},m(t,r){dt(v,t,r),L(t,x,r),L(t,s,r),a(s,o),a(o,d),a(d,u),a(u,h),a(d,w),a(d,y),a(y,C),a(o,J),N.m(j,o),a(o,P),a(o,_),a(_,T),a(T,V),a(V,R),a(_,U),a(_,g),a(g,I),a(g,X),a(g,H),a(H,B),a(s,F),a(s,O),L(t,A,r),dt($,t,r),b=!0},p(t,[r]){const E={};r&2&&(E.activeEraID=t[1].params.era),v.$set(E),(!b||r&1)&&c!==(c=t[0].chapter.era.name+"")&&it(h,c),(!b||r&1)&&l!==(l=t[0].chapter.name+"")&&it(C,l),(!b||r&1)&&j!==(j=t[0].chapter.content+"")&&N.p(j),(!b||r&2&&q!==(q=ot(`era-${t[1].params.era}`)+" svelte-1txd4fk"))&&e(s,"class",q);const S={};r&2&&(S.activeEraID=t[1].params.era),$.$set(S)},i(t){b||(ct(v.$$.fragment,t),ct($.$$.fragment,t),b=!0)},o(t){ft(v.$$.fragment,t),ft($.$$.fragment,t),b=!1},d(t){t&&(i(x),i(s),i(A)),mt(v,t),mt($,t)}}}function xt(n,v,x){let s;Et(n,$t,l=>x(1,s=l));let{data:o}=v;const d=pt.eras[s.params.era],u=d.chapters[s.params.chapter];let c=null;const h=Object.values(d.chapters);h.forEach((l,C)=>{console.log(`chapter: ${JSON.stringify(l)}, index: ${C}`),l.id==u.id&&(c=C)}),console.log(`thisChapterIndexInStory: ${c}`);const w=c==0?null:h[c-1],y=c==h.length-1?null:h[c+1];return n.$$set=l=>{"data"in l&&x(0,o=l.data)},[o,s,w,y]}class wt extends yt{constructor(v){super(),It(this,v,xt,Dt,ut,{data:0})}}export{wt as component};
