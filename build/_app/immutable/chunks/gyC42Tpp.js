import{d as ht,m as Te,i as ue,T as tn,n as nn,e as Pn,f as On,s as pt,g as b,o as Ne}from"./C9nAIKQX.js";import{d as at,c as ln,a as Q}from"./DGGwx3xc.js";import{c as Tn,o as Nn}from"./DEdxNy7H.js";import{p as Dn,q as Tt,o as ae,w as gt,s as cn,g as qt,v as F,f as Nt,r as St,t as ut,e as Rn,x as vt}from"./D6p2bPIS.js";import{d as le,s as Bt}from"./CdfSubKN.js";import{p as tt,i as Vt}from"./DG-iDFzR.js";import{b as Cn}from"./DLxROzDA.js";class mt{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const f=i[r],c=n+f,h=Math.abs(n)<Math.abs(f)?n-(c-f):f-(c-n);h&&(i[e++]=h),n=c}return i[e]=n,this._n=e+1,this}valueOf(){const n=this._partials;let i=this._n,e,r,f,c=0;if(i>0){for(c=n[--i];i>0&&(e=c,r=n[--i],c=e+r,f=r-(c-e),!f););i>0&&(f<0&&n[i-1]<0||f>0&&n[i-1]>0)&&(r=f*2,e=c+r,r==e-c&&(c=e))}return c}}function*De(t){for(const n of t)yield*n}function ce(t){return Array.from(De(t))}function Re(t){let n;for(;n=t.sourceEvent;)t=n;return t}function ft(t,n){if(t=Re(t),n===void 0&&(n=t.currentTarget),n){var i=n.ownerSVGElement||n;if(i.createSVGPoint){var e=i.createSVGPoint();return e.x=t.clientX,e.y=t.clientY,e=e.matrixTransform(n.getScreenCTM().inverse()),[e.x,e.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[t.clientX-r.left-n.clientLeft,t.clientY-r.top-n.clientTop]}}return[t.pageX,t.pageY]}const sn={capture:!0,passive:!1};function fn(t){t.preventDefault(),t.stopImmediatePropagation()}function Ce(t){var n=t.document.documentElement,i=ht(t).on("dragstart.drag",fn,sn);"onselectstart"in n?i.on("selectstart.drag",fn,sn):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Fe(t,n){var i=t.document.documentElement,e=ht(t).on("dragstart.drag",null);n&&(e.on("click.drag",fn,sn),setTimeout(function(){e.on("click.drag",null)},0)),"onselectstart"in i?e.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}var ke=1e-12;function Jn(t){return((t=Math.exp(t))+1/t)/2}function Le(t){return((t=Math.exp(t))-1/t)/2}function Je(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ae=function t(n,i,e){function r(f,c){var h=f[0],M=f[1],m=f[2],o=c[0],u=c[1],s=c[2],v=o-h,d=u-M,w=v*v+d*d,_,g;if(w<ke)g=Math.log(s/m)/n,_=function(C){return[h+C*v,M+C*d,m*Math.exp(n*C*g)]};else{var S=Math.sqrt(w),P=(s*s-m*m+e*w)/(2*m*i*S),y=(s*s-m*m-e*w)/(2*s*i*S),z=Math.log(Math.sqrt(P*P+1)-P),I=Math.log(Math.sqrt(y*y+1)-y);g=(I-z)/n,_=function(C){var R=C*g,k=Jn(z),L=m/(i*S)*(k*Je(n*R+z)-Le(z));return[h+L*v,M+L*d,m*k/Jn(n*R+z)]}}return _.duration=g*1e3*n/Math.SQRT2,_}return r.rho=function(f){var c=Math.max(.001,+f),h=c*c,M=h*h;return t(c,h,M)},r}(Math.SQRT2,2,4);function Ye(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function se(t,n){return fetch(t,n).then(Ye)}var B=1e-6,A=Math.PI,W=A/2,An=A/4,$=A*2,K=180/A,j=A/180,G=Math.abs,fe=Math.atan,Dt=Math.atan2,U=Math.cos,Xe=Math.exp,qe=Math.log,Z=Math.sin,Be=Math.sign||function(t){return t>0?1:t<0?-1:0},yt=Math.sqrt,Ge=Math.tan;function Ve(t){return t>1?0:t<-1?A:Math.acos(t)}function Rt(t){return t>1?W:t<-1?-W:Math.asin(t)}function et(){}function Ut(t,n){t&&Xn.hasOwnProperty(t.type)&&Xn[t.type](t,n)}var Yn={Feature:function(t,n){Ut(t.geometry,n)},FeatureCollection:function(t,n){for(var i=t.features,e=-1,r=i.length;++e<r;)Ut(i[e].geometry,n)}},Xn={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)t=i[e],n.point(t[0],t[1],t[2])},LineString:function(t,n){hn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)hn(i[e],n,0)},Polygon:function(t,n){qn(t.coordinates,n)},MultiPolygon:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)qn(i[e],n)},GeometryCollection:function(t,n){for(var i=t.geometries,e=-1,r=i.length;++e<r;)Ut(i[e],n)}};function hn(t,n,i){var e=-1,r=t.length-i,f;for(n.lineStart();++e<r;)f=t[e],n.point(f[0],f[1],f[2]);n.lineEnd()}function qn(t,n){var i=-1,e=t.length;for(n.polygonStart();++i<e;)hn(t[i],n,1);n.polygonEnd()}function Mt(t,n){t&&Yn.hasOwnProperty(t.type)?Yn[t.type](t,n):Ut(t,n)}function pn(t){return[Dt(t[1],t[0]),Rt(t[2])]}function Et(t){var n=t[0],i=t[1],e=U(i);return[e*U(n),e*Z(n),Z(i)]}function kt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Zt(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function en(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Lt(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function gn(t){var n=yt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function vn(t,n){function i(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(i.invert=function(e,r){return e=n.invert(e,r),e&&t.invert(e[0],e[1])}),i}function mn(t,n){return G(t)>A&&(t-=Math.round(t/$)*$),[t,n]}mn.invert=mn;function he(t,n,i){return(t%=$)?n||i?vn(Gn(t),Vn(n,i)):Gn(t):n||i?Vn(n,i):mn}function Bn(t){return function(n,i){return n+=t,G(n)>A&&(n-=Math.round(n/$)*$),[n,i]}}function Gn(t){var n=Bn(t);return n.invert=Bn(-t),n}function Vn(t,n){var i=U(t),e=Z(t),r=U(n),f=Z(n);function c(h,M){var m=U(M),o=U(h)*m,u=Z(h)*m,s=Z(M),v=s*i+o*e;return[Dt(u*r-v*f,o*i-s*e),Rt(v*r+u*f)]}return c.invert=function(h,M){var m=U(M),o=U(h)*m,u=Z(h)*m,s=Z(M),v=s*r-u*f;return[Dt(u*r+s*f,o*i+v*e),Rt(v*i-o*e)]},c}function Ue(t){t=he(t[0]*j,t[1]*j,t.length>2?t[2]*j:0);function n(i){return i=t(i[0]*j,i[1]*j),i[0]*=K,i[1]*=K,i}return n.invert=function(i){return i=t.invert(i[0]*j,i[1]*j),i[0]*=K,i[1]*=K,i},n}function Ze(t,n,i,e,r,f){if(i){var c=U(n),h=Z(n),M=e*i;r==null?(r=n+e*$,f=n-M/2):(r=Un(c,r),f=Un(c,f),(e>0?r<f:r>f)&&(r+=e*$));for(var m,o=r;e>0?o>f:o<f;o-=M)m=pn([c,-h*U(o),-h*Z(o)]),t.point(m[0],m[1])}}function Un(t,n){n=Et(n),n[0]-=t,gn(n);var i=Ve(-n[1]);return((-n[2]<0?-i:i)+$-B)%$}function pe(){var t=[],n;return{point:function(i,e,r){n.push([i,e,r])},lineStart:function(){t.push(n=[])},lineEnd:et,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],n=null,i}}}function Gt(t,n){return G(t[0]-n[0])<B&&G(t[1]-n[1])<B}function Jt(t,n,i,e){this.x=t,this.z=n,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function ge(t,n,i,e,r){var f=[],c=[],h,M;if(t.forEach(function(d){if(!((w=d.length-1)<=0)){var w,_=d[0],g=d[w],S;if(Gt(_,g)){if(!_[2]&&!g[2]){for(r.lineStart(),h=0;h<w;++h)r.point((_=d[h])[0],_[1]);r.lineEnd();return}g[0]+=2*B}f.push(S=new Jt(_,d,null,!0)),c.push(S.o=new Jt(_,null,S,!1)),f.push(S=new Jt(g,d,null,!1)),c.push(S.o=new Jt(g,null,S,!0))}}),!!f.length){for(c.sort(n),Zn(f),Zn(c),h=0,M=c.length;h<M;++h)c[h].e=i=!i;for(var m=f[0],o,u;;){for(var s=m,v=!0;s.v;)if((s=s.n)===m)return;o=s.z,r.lineStart();do{if(s.v=s.o.v=!0,s.e){if(v)for(h=0,M=o.length;h<M;++h)r.point((u=o[h])[0],u[1]);else e(s.x,s.n.x,1,r);s=s.n}else{if(v)for(o=s.p.z,h=o.length-1;h>=0;--h)r.point((u=o[h])[0],u[1]);else e(s.x,s.p.x,-1,r);s=s.p}s=s.o,o=s.z,v=!v}while(!s.v);r.lineEnd()}}}function Zn(t){if(n=t.length){for(var n,i=0,e=t[0],r;++i<n;)e.n=r=t[i],r.p=e,e=r;e.n=r=t[0],r.p=e}}function rn(t){return G(t[0])<=A?t[0]:Be(t[0])*((G(t[0])+A)%$-A)}function je(t,n){var i=rn(n),e=n[1],r=Z(e),f=[Z(i),-U(i),0],c=0,h=0,M=new mt;r===1?e=W+B:r===-1&&(e=-W-B);for(var m=0,o=t.length;m<o;++m)if(s=(u=t[m]).length)for(var u,s,v=u[s-1],d=rn(v),w=v[1]/2+An,_=Z(w),g=U(w),S=0;S<s;++S,d=y,_=I,g=C,v=P){var P=u[S],y=rn(P),z=P[1]/2+An,I=Z(z),C=U(z),R=y-d,k=R>=0?1:-1,L=k*R,O=L>A,V=_*I;if(M.add(Dt(V*k*Z(L),g*C+V*U(L))),c+=O?R+k*$:R,O^d>=i^y>=i){var J=Zt(Et(v),Et(P));gn(J);var a=Zt(f,J);gn(a);var l=(O^R>=0?-1:1)*Rt(a[2]);(e>l||e===l&&(J[0]||J[1]))&&(h+=O^R>=0?1:-1)}}return(c<-1e-6||c<B&&M<-1e-12)^h&1}function ve(t,n,i,e){return function(r){var f=n(r),c=pe(),h=n(c),M=!1,m,o,u,s={point:v,lineStart:w,lineEnd:_,polygonStart:function(){s.point=g,s.lineStart=S,s.lineEnd=P,o=[],m=[]},polygonEnd:function(){s.point=v,s.lineStart=w,s.lineEnd=_,o=ce(o);var y=je(m,e);o.length?(M||(r.polygonStart(),M=!0),ge(o,We,y,i,r)):y&&(M||(r.polygonStart(),M=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),M&&(r.polygonEnd(),M=!1),o=m=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function v(y,z){t(y,z)&&r.point(y,z)}function d(y,z){f.point(y,z)}function w(){s.point=d,f.lineStart()}function _(){s.point=v,f.lineEnd()}function g(y,z){u.push([y,z]),h.point(y,z)}function S(){h.lineStart(),u=[]}function P(){g(u[0][0],u[0][1]),h.lineEnd();var y=h.clean(),z=c.result(),I,C=z.length,R,k,L;if(u.pop(),m.push(u),u=null,!!C){if(y&1){if(k=z[0],(R=k.length-1)>0){for(M||(r.polygonStart(),M=!0),r.lineStart(),I=0;I<R;++I)r.point((L=k[I])[0],L[1]);r.lineEnd()}return}C>1&&y&2&&z.push(z.pop().concat(z.shift())),o.push(z.filter(He))}}return s}}function He(t){return t.length>1}function We(t,n){return((t=t.x)[0]<0?t[1]-W-B:W-t[1])-((n=n.x)[0]<0?n[1]-W-B:W-n[1])}const jn=ve(function(){return!0},Ke,be,[-A,-W]);function Ke(t){var n=NaN,i=NaN,e=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(f,c){var h=f>0?A:-A,M=G(f-n);G(M-A)<B?(t.point(n,i=(i+c)/2>0?W:-W),t.point(e,i),t.lineEnd(),t.lineStart(),t.point(h,i),t.point(f,i),r=0):e!==h&&M>=A&&(G(n-e)<B&&(n-=e*B),G(f-h)<B&&(f-=h*B),i=Qe(n,i,f,c),t.point(e,i),t.lineEnd(),t.lineStart(),t.point(h,i),r=0),t.point(n=f,i=c),e=h},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-r}}}function Qe(t,n,i,e){var r,f,c=Z(t-i);return G(c)>B?fe((Z(n)*(f=U(e))*Z(i)-Z(e)*(r=U(n))*Z(t))/(r*f*c)):(n+e)/2}function be(t,n,i,e){var r;if(t==null)r=i*W,e.point(-A,r),e.point(0,r),e.point(A,r),e.point(A,0),e.point(A,-r),e.point(0,-r),e.point(-A,-r),e.point(-A,0),e.point(-A,r);else if(G(t[0]-n[0])>B){var f=t[0]<n[0]?A:-A;r=i*f/2,e.point(-f,r),e.point(0,r),e.point(f,r)}else e.point(n[0],n[1])}function $e(t){var n=U(t),i=2*j,e=n>0,r=G(n)>B;function f(o,u,s,v){Ze(v,t,i,s,o,u)}function c(o,u){return U(o)*U(u)>n}function h(o){var u,s,v,d,w;return{lineStart:function(){d=v=!1,w=1},point:function(_,g){var S=[_,g],P,y=c(_,g),z=e?y?0:m(_,g):y?m(_+(_<0?A:-A),g):0;if(!u&&(d=v=y)&&o.lineStart(),y!==v&&(P=M(u,S),(!P||Gt(u,P)||Gt(S,P))&&(S[2]=1)),y!==v)w=0,y?(o.lineStart(),P=M(S,u),o.point(P[0],P[1])):(P=M(u,S),o.point(P[0],P[1],2),o.lineEnd()),u=P;else if(r&&u&&e^y){var I;!(z&s)&&(I=M(S,u,!0))&&(w=0,e?(o.lineStart(),o.point(I[0][0],I[0][1]),o.point(I[1][0],I[1][1]),o.lineEnd()):(o.point(I[1][0],I[1][1]),o.lineEnd(),o.lineStart(),o.point(I[0][0],I[0][1],3)))}y&&(!u||!Gt(u,S))&&o.point(S[0],S[1]),u=S,v=y,s=z},lineEnd:function(){v&&o.lineEnd(),u=null},clean:function(){return w|(d&&v)<<1}}}function M(o,u,s){var v=Et(o),d=Et(u),w=[1,0,0],_=Zt(v,d),g=kt(_,_),S=_[0],P=g-S*S;if(!P)return!s&&o;var y=n*g/P,z=-n*S/P,I=Zt(w,_),C=Lt(w,y),R=Lt(_,z);en(C,R);var k=I,L=kt(C,k),O=kt(k,k),V=L*L-O*(kt(C,C)-1);if(!(V<0)){var J=yt(V),a=Lt(k,(-L-J)/O);if(en(a,C),a=pn(a),!s)return a;var l=o[0],p=u[0],E=o[1],x=u[1],T;p<l&&(T=l,l=p,p=T);var N=p-l,D=G(N-A)<B,X=D||N<B;if(!D&&x<E&&(T=E,E=x,x=T),X?D?E+x>0^a[1]<(G(a[0]-l)<B?E:x):E<=a[1]&&a[1]<=x:N>A^(l<=a[0]&&a[0]<=p)){var q=Lt(k,(-L+J)/O);return en(q,C),[a,pn(q)]}}}function m(o,u){var s=e?t:A-t,v=0;return o<-s?v|=1:o>s&&(v|=2),u<-s?v|=4:u>s&&(v|=8),v}return ve(c,h,f,e?[0,-t]:[-A,t-A])}function ti(t,n,i,e,r,f){var c=t[0],h=t[1],M=n[0],m=n[1],o=0,u=1,s=M-c,v=m-h,d;if(d=i-c,!(!s&&d>0)){if(d/=s,s<0){if(d<o)return;d<u&&(u=d)}else if(s>0){if(d>u)return;d>o&&(o=d)}if(d=r-c,!(!s&&d<0)){if(d/=s,s<0){if(d>u)return;d>o&&(o=d)}else if(s>0){if(d<o)return;d<u&&(u=d)}if(d=e-h,!(!v&&d>0)){if(d/=v,v<0){if(d<o)return;d<u&&(u=d)}else if(v>0){if(d>u)return;d>o&&(o=d)}if(d=f-h,!(!v&&d<0)){if(d/=v,v<0){if(d>u)return;d>o&&(o=d)}else if(v>0){if(d<o)return;d<u&&(u=d)}return o>0&&(t[0]=c+o*s,t[1]=h+o*v),u<1&&(n[0]=c+u*s,n[1]=h+u*v),!0}}}}}var At=1e9,Yt=-1e9;function ni(t,n,i,e){function r(m,o){return t<=m&&m<=i&&n<=o&&o<=e}function f(m,o,u,s){var v=0,d=0;if(m==null||(v=c(m,u))!==(d=c(o,u))||M(m,o)<0^u>0)do s.point(v===0||v===3?t:i,v>1?e:n);while((v=(v+u+4)%4)!==d);else s.point(o[0],o[1])}function c(m,o){return G(m[0]-t)<B?o>0?0:3:G(m[0]-i)<B?o>0?2:1:G(m[1]-n)<B?o>0?1:0:o>0?3:2}function h(m,o){return M(m.x,o.x)}function M(m,o){var u=c(m,1),s=c(o,1);return u!==s?u-s:u===0?o[1]-m[1]:u===1?m[0]-o[0]:u===2?m[1]-o[1]:o[0]-m[0]}return function(m){var o=m,u=pe(),s,v,d,w,_,g,S,P,y,z,I,C={point:R,lineStart:V,lineEnd:J,polygonStart:L,polygonEnd:O};function R(l,p){r(l,p)&&o.point(l,p)}function k(){for(var l=0,p=0,E=v.length;p<E;++p)for(var x=v[p],T=1,N=x.length,D=x[0],X,q,Y=D[0],H=D[1];T<N;++T)X=Y,q=H,D=x[T],Y=D[0],H=D[1],q<=e?H>e&&(Y-X)*(e-q)>(H-q)*(t-X)&&++l:H<=e&&(Y-X)*(e-q)<(H-q)*(t-X)&&--l;return l}function L(){o=u,s=[],v=[],I=!0}function O(){var l=k(),p=I&&l,E=(s=ce(s)).length;(p||E)&&(m.polygonStart(),p&&(m.lineStart(),f(null,null,1,m),m.lineEnd()),E&&ge(s,h,l,f,m),m.polygonEnd()),o=m,s=v=d=null}function V(){C.point=a,v&&v.push(d=[]),z=!0,y=!1,S=P=NaN}function J(){s&&(a(w,_),g&&y&&u.rejoin(),s.push(u.result())),C.point=R,y&&o.lineEnd()}function a(l,p){var E=r(l,p);if(v&&d.push([l,p]),z)w=l,_=p,g=E,z=!1,E&&(o.lineStart(),o.point(l,p));else if(E&&y)o.point(l,p);else{var x=[S=Math.max(Yt,Math.min(At,S)),P=Math.max(Yt,Math.min(At,P))],T=[l=Math.max(Yt,Math.min(At,l)),p=Math.max(Yt,Math.min(At,p))];ti(x,T,t,n,i,e)?(y||(o.lineStart(),o.point(x[0],x[1])),o.point(T[0],T[1]),E||o.lineEnd(),I=!1):E&&(o.lineStart(),o.point(l,p),I=!1)}S=l,P=p,y=E}return C}}const dn=t=>t;var on=new mt,yn=new mt,me,de,Mn,Sn,st={point:et,lineStart:et,lineEnd:et,polygonStart:function(){st.lineStart=ei,st.lineEnd=ri},polygonEnd:function(){st.lineStart=st.lineEnd=st.point=et,on.add(G(yn)),yn=new mt},result:function(){var t=on/2;return on=new mt,t}};function ei(){st.point=ii}function ii(t,n){st.point=ye,me=Mn=t,de=Sn=n}function ye(t,n){yn.add(Sn*t-Mn*n),Mn=t,Sn=n}function ri(){ye(me,de)}var wt=1/0,jt=wt,Ct=-wt,Ht=Ct,Wt={point:oi,lineStart:et,lineEnd:et,polygonStart:et,polygonEnd:et,result:function(){var t=[[wt,jt],[Ct,Ht]];return Ct=Ht=-(jt=wt=1/0),t}};function oi(t,n){t<wt&&(wt=t),t>Ct&&(Ct=t),n<jt&&(jt=n),n>Ht&&(Ht=n)}var _n=0,En=0,xt=0,Kt=0,Qt=0,_t=0,wn=0,zn=0,It=0,Me,Se,rt,ot,nt={point:dt,lineStart:Hn,lineEnd:Wn,polygonStart:function(){nt.lineStart=li,nt.lineEnd=ci},polygonEnd:function(){nt.point=dt,nt.lineStart=Hn,nt.lineEnd=Wn},result:function(){var t=It?[wn/It,zn/It]:_t?[Kt/_t,Qt/_t]:xt?[_n/xt,En/xt]:[NaN,NaN];return _n=En=xt=Kt=Qt=_t=wn=zn=It=0,t}};function dt(t,n){_n+=t,En+=n,++xt}function Hn(){nt.point=ui}function ui(t,n){nt.point=ai,dt(rt=t,ot=n)}function ai(t,n){var i=t-rt,e=n-ot,r=yt(i*i+e*e);Kt+=r*(rt+t)/2,Qt+=r*(ot+n)/2,_t+=r,dt(rt=t,ot=n)}function Wn(){nt.point=dt}function li(){nt.point=si}function ci(){_e(Me,Se)}function si(t,n){nt.point=_e,dt(Me=rt=t,Se=ot=n)}function _e(t,n){var i=t-rt,e=n-ot,r=yt(i*i+e*e);Kt+=r*(rt+t)/2,Qt+=r*(ot+n)/2,_t+=r,r=ot*t-rt*n,wn+=r*(rt+t),zn+=r*(ot+n),It+=r*3,dt(rt=t,ot=n)}function Ee(t){this._context=t}Ee.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,$);break}}},result:et};var xn=new mt,un,we,ze,Pt,Ot,Ft={point:et,lineStart:function(){Ft.point=fi},lineEnd:function(){un&&xe(we,ze),Ft.point=et},polygonStart:function(){un=!0},polygonEnd:function(){un=null},result:function(){var t=+xn;return xn=new mt,t}};function fi(t,n){Ft.point=xe,we=Pt=t,ze=Ot=n}function xe(t,n){Pt-=t,Ot-=n,xn.add(yt(Pt*Pt+Ot*Ot)),Pt=t,Ot=n}let Kn,bt,Qn,bn;class $n{constructor(n){this._append=n==null?Ie:hi(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,i){switch(this._point){case 0:{this._append`M${n},${i}`,this._point=1;break}case 1:{this._append`L${n},${i}`;break}default:{if(this._append`M${n},${i}`,this._radius!==Qn||this._append!==bt){const e=this._radius,r=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,Qn=e,bt=this._append,bn=this._,this._=r}this._+=bn;break}}}result(){const n=this._;return this._="",n.length?n:null}}function Ie(t){let n=1;this._+=t[0];for(const i=t.length;n<i;++n)this._+=arguments[n]+t[n]}function hi(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return Ie;if(n!==Kn){const i=10**n;Kn=n,bt=function(r){let f=1;this._+=r[0];for(const c=r.length;f<c;++f)this._+=Math.round(arguments[f]*i)/i+r[f]}}return bt}function Pe(t,n){let i=3,e=4.5,r,f;function c(h){return h&&(typeof e=="function"&&f.pointRadius(+e.apply(this,arguments)),Mt(h,r(f))),f.result()}return c.area=function(h){return Mt(h,r(st)),st.result()},c.measure=function(h){return Mt(h,r(Ft)),Ft.result()},c.bounds=function(h){return Mt(h,r(Wt)),Wt.result()},c.centroid=function(h){return Mt(h,r(nt)),nt.result()},c.projection=function(h){return arguments.length?(r=h==null?(t=null,dn):(t=h).stream,c):t},c.context=function(h){return arguments.length?(f=h==null?(n=null,new $n(i)):new Ee(n=h),typeof e!="function"&&f.pointRadius(e),c):n},c.pointRadius=function(h){return arguments.length?(e=typeof h=="function"?h:(f.pointRadius(+h),+h),c):e},c.digits=function(h){if(!arguments.length)return i;if(h==null)i=null;else{const M=Math.floor(h);if(!(M>=0))throw new RangeError(`invalid digits: ${h}`);i=M}return n===null&&(f=new $n(i)),c},c.projection(t).digits(i).context(n)}function Fn(t){return function(n){var i=new In;for(var e in t)i[e]=t[e];return i.stream=n,i}}function In(){}In.prototype={constructor:In,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function kn(t,n,i){var e=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),e!=null&&t.clipExtent(null),Mt(i,t.stream(Wt)),n(Wt.result()),e!=null&&t.clipExtent(e),t}function Oe(t,n,i){return kn(t,function(e){var r=n[1][0]-n[0][0],f=n[1][1]-n[0][1],c=Math.min(r/(e[1][0]-e[0][0]),f/(e[1][1]-e[0][1])),h=+n[0][0]+(r-c*(e[1][0]+e[0][0]))/2,M=+n[0][1]+(f-c*(e[1][1]+e[0][1]))/2;t.scale(150*c).translate([h,M])},i)}function pi(t,n,i){return Oe(t,[[0,0],n],i)}function gi(t,n,i){return kn(t,function(e){var r=+n,f=r/(e[1][0]-e[0][0]),c=(r-f*(e[1][0]+e[0][0]))/2,h=-f*e[0][1];t.scale(150*f).translate([c,h])},i)}function vi(t,n,i){return kn(t,function(e){var r=+n,f=r/(e[1][1]-e[0][1]),c=-f*e[0][0],h=(r-f*(e[1][1]+e[0][1]))/2;t.scale(150*f).translate([c,h])},i)}var te=16,mi=U(30*j);function ne(t,n){return+n?yi(t,n):di(t)}function di(t){return Fn({point:function(n,i){n=t(n,i),this.stream.point(n[0],n[1])}})}function yi(t,n){function i(e,r,f,c,h,M,m,o,u,s,v,d,w,_){var g=m-e,S=o-r,P=g*g+S*S;if(P>4*n&&w--){var y=c+s,z=h+v,I=M+d,C=yt(y*y+z*z+I*I),R=Rt(I/=C),k=G(G(I)-1)<B||G(f-u)<B?(f+u)/2:Dt(z,y),L=t(k,R),O=L[0],V=L[1],J=O-e,a=V-r,l=S*J-g*a;(l*l/P>n||G((g*J+S*a)/P-.5)>.3||c*s+h*v+M*d<mi)&&(i(e,r,f,c,h,M,O,V,k,y/=C,z/=C,I,w,_),_.point(O,V),i(O,V,k,y,z,I,m,o,u,s,v,d,w,_))}}return function(e){var r,f,c,h,M,m,o,u,s,v,d,w,_={point:g,lineStart:S,lineEnd:y,polygonStart:function(){e.polygonStart(),_.lineStart=z},polygonEnd:function(){e.polygonEnd(),_.lineStart=S}};function g(R,k){R=t(R,k),e.point(R[0],R[1])}function S(){u=NaN,_.point=P,e.lineStart()}function P(R,k){var L=Et([R,k]),O=t(R,k);i(u,s,o,v,d,w,u=O[0],s=O[1],o=R,v=L[0],d=L[1],w=L[2],te,e),e.point(u,s)}function y(){_.point=g,e.lineEnd()}function z(){S(),_.point=I,_.lineEnd=C}function I(R,k){P(r=R,k),f=u,c=s,h=v,M=d,m=w,_.point=P}function C(){i(u,s,o,v,d,w,f,c,r,h,M,m,te,e),_.lineEnd=y,y()}return _}}var Mi=Fn({point:function(t,n){this.stream.point(t*j,n*j)}});function Si(t){return Fn({point:function(n,i){var e=t(n,i);return this.stream.point(e[0],e[1])}})}function _i(t,n,i,e,r){function f(c,h){return c*=e,h*=r,[n+t*c,i-t*h]}return f.invert=function(c,h){return[(c-n)/t*e,(i-h)/t*r]},f}function ee(t,n,i,e,r,f){if(!f)return _i(t,n,i,e,r);var c=U(f),h=Z(f),M=c*t,m=h*t,o=c/t,u=h/t,s=(h*i-c*n)/t,v=(h*n+c*i)/t;function d(w,_){return w*=e,_*=r,[M*w-m*_+n,i-m*w-M*_]}return d.invert=function(w,_){return[e*(o*w-u*_+s),r*(v-u*w-o*_)]},d}function Ei(t){return wi(function(){return t})()}function wi(t){var n,i=150,e=480,r=250,f=0,c=0,h=0,M=0,m=0,o,u=0,s=1,v=1,d=null,w=jn,_=null,g,S,P,y=dn,z=.5,I,C,R,k,L;function O(l){return R(l[0]*j,l[1]*j)}function V(l){return l=R.invert(l[0],l[1]),l&&[l[0]*K,l[1]*K]}O.stream=function(l){return k&&L===l?k:k=Mi(Si(o)(w(I(y(L=l)))))},O.preclip=function(l){return arguments.length?(w=l,d=void 0,a()):w},O.postclip=function(l){return arguments.length?(y=l,_=g=S=P=null,a()):y},O.clipAngle=function(l){return arguments.length?(w=+l?$e(d=l*j):(d=null,jn),a()):d*K},O.clipExtent=function(l){return arguments.length?(y=l==null?(_=g=S=P=null,dn):ni(_=+l[0][0],g=+l[0][1],S=+l[1][0],P=+l[1][1]),a()):_==null?null:[[_,g],[S,P]]},O.scale=function(l){return arguments.length?(i=+l,J()):i},O.translate=function(l){return arguments.length?(e=+l[0],r=+l[1],J()):[e,r]},O.center=function(l){return arguments.length?(f=l[0]%360*j,c=l[1]%360*j,J()):[f*K,c*K]},O.rotate=function(l){return arguments.length?(h=l[0]%360*j,M=l[1]%360*j,m=l.length>2?l[2]%360*j:0,J()):[h*K,M*K,m*K]},O.angle=function(l){return arguments.length?(u=l%360*j,J()):u*K},O.reflectX=function(l){return arguments.length?(s=l?-1:1,J()):s<0},O.reflectY=function(l){return arguments.length?(v=l?-1:1,J()):v<0},O.precision=function(l){return arguments.length?(I=ne(C,z=l*l),a()):yt(z)},O.fitExtent=function(l,p){return Oe(O,l,p)},O.fitSize=function(l,p){return pi(O,l,p)},O.fitWidth=function(l,p){return gi(O,l,p)},O.fitHeight=function(l,p){return vi(O,l,p)};function J(){var l=ee(i,0,0,s,v,u).apply(null,n(f,c)),p=ee(i,e-l[0],r-l[1],s,v,u);return o=he(h,M,m),C=vn(n,p),R=vn(o,C),I=ne(C,z),a()}function a(){return k=L=null,O}return function(){return n=t.apply(this,arguments),O.invert=n.invert&&V,J()}}function Ln(t,n){return[t,qe(Ge((W+n)/2))]}Ln.invert=function(t,n){return[t,2*fe(Xe(n))-W]};function er(){return zi(Ln).scale(961/$)}function zi(t){var n=Ei(t),i=n.center,e=n.scale,r=n.translate,f=n.clipExtent,c=null,h,M,m;n.scale=function(u){return arguments.length?(e(u),o()):e()},n.translate=function(u){return arguments.length?(r(u),o()):r()},n.center=function(u){return arguments.length?(i(u),o()):i()},n.clipExtent=function(u){return arguments.length?(u==null?c=h=M=m=null:(c=+u[0][0],h=+u[0][1],M=+u[1][0],m=+u[1][1]),o()):c==null?null:[[c,h],[M,m]]};function o(){var u=A*e(),s=n(Ue(n.rotate()).invert([0,0]));return f(c==null?[[s[0]-u,s[1]-u],[s[0]+u,s[1]+u]]:t===Ln?[[Math.max(s[0]-u,c),h],[Math.min(s[0]+u,M),m]]:[[c,Math.max(s[1]-u,h)],[M,Math.min(s[1]+u,m)]])}return o()}const Xt=t=>()=>t;function xi(t,{sourceEvent:n,target:i,transform:e,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:e,enumerable:!0,configurable:!0},_:{value:r}})}function an(t){t.stopImmediatePropagation()}function zt(t){t.preventDefault(),t.stopImmediatePropagation()}function Ii(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Pi(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ie(){return this.__zoom||ue}function Oi(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ti(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ni(t,n,i){var e=t.invertX(n[0][0])-i[0][0],r=t.invertX(n[1][0])-i[1][0],f=t.invertY(n[0][1])-i[0][1],c=t.invertY(n[1][1])-i[1][1];return t.translate(r>e?(e+r)/2:Math.min(0,e)||Math.max(0,r),c>f?(f+c)/2:Math.min(0,f)||Math.max(0,c))}function ir(){var t=Ii,n=Pi,i=Ni,e=Oi,r=Ti,f=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],h=250,M=Ae,m=Te("start","zoom","end"),o,u,s,v=500,d=150,w=0,_=10;function g(a){a.property("__zoom",ie).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",L).filter(r).on("touchstart.zoom",O).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",J).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(a,l,p,E){var x=a.selection?a.selection():a;x.property("__zoom",ie),a!==x?z(a,l,p,E):x.interrupt().each(function(){I(this,arguments).event(E).start().zoom(null,typeof l=="function"?l.apply(this,arguments):l).end()})},g.scaleBy=function(a,l,p,E){g.scaleTo(a,function(){var x=this.__zoom.k,T=typeof l=="function"?l.apply(this,arguments):l;return x*T},p,E)},g.scaleTo=function(a,l,p,E){g.transform(a,function(){var x=n.apply(this,arguments),T=this.__zoom,N=p==null?y(x):typeof p=="function"?p.apply(this,arguments):p,D=T.invert(N),X=typeof l=="function"?l.apply(this,arguments):l;return i(P(S(T,X),N,D),x,c)},p,E)},g.translateBy=function(a,l,p,E){g.transform(a,function(){return i(this.__zoom.translate(typeof l=="function"?l.apply(this,arguments):l,typeof p=="function"?p.apply(this,arguments):p),n.apply(this,arguments),c)},null,E)},g.translateTo=function(a,l,p,E,x){g.transform(a,function(){var T=n.apply(this,arguments),N=this.__zoom,D=E==null?y(T):typeof E=="function"?E.apply(this,arguments):E;return i(ue.translate(D[0],D[1]).scale(N.k).translate(typeof l=="function"?-l.apply(this,arguments):-l,typeof p=="function"?-p.apply(this,arguments):-p),T,c)},E,x)};function S(a,l){return l=Math.max(f[0],Math.min(f[1],l)),l===a.k?a:new tn(l,a.x,a.y)}function P(a,l,p){var E=l[0]-p[0]*a.k,x=l[1]-p[1]*a.k;return E===a.x&&x===a.y?a:new tn(a.k,E,x)}function y(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function z(a,l,p,E){a.on("start.zoom",function(){I(this,arguments).event(E).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(E).end()}).tween("zoom",function(){var x=this,T=arguments,N=I(x,T).event(E),D=n.apply(x,T),X=p==null?y(D):typeof p=="function"?p.apply(x,T):p,q=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),Y=x.__zoom,H=typeof l=="function"?l.apply(x,T):l,lt=M(Y.invert(X).concat(q/Y.k),H.invert(X).concat(q/H.k));return function(it){if(it===1)it=H;else{var ct=lt(it),$t=q/ct[2];it=new tn($t,X[0]-ct[0]*$t,X[1]-ct[1]*$t)}N.zoom(null,it)}})}function I(a,l,p){return!p&&a.__zooming||new C(a,l)}function C(a,l){this.that=a,this.args=l,this.active=0,this.sourceEvent=null,this.extent=n.apply(a,l),this.taps=0}C.prototype={event:function(a){return a&&(this.sourceEvent=a),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(a,l){return this.mouse&&a!=="mouse"&&(this.mouse[1]=l.invert(this.mouse[0])),this.touch0&&a!=="touch"&&(this.touch0[1]=l.invert(this.touch0[0])),this.touch1&&a!=="touch"&&(this.touch1[1]=l.invert(this.touch1[0])),this.that.__zoom=l,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(a){var l=ht(this.that).datum();m.call(a,this.that,new xi(a,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:m}),l)}};function R(a,...l){if(!t.apply(this,arguments))return;var p=I(this,l).event(a),E=this.__zoom,x=Math.max(f[0],Math.min(f[1],E.k*Math.pow(2,e.apply(this,arguments)))),T=ft(a);if(p.wheel)(p.mouse[0][0]!==T[0]||p.mouse[0][1]!==T[1])&&(p.mouse[1]=E.invert(p.mouse[0]=T)),clearTimeout(p.wheel);else{if(E.k===x)return;p.mouse=[T,E.invert(T)],nn(this),p.start()}zt(a),p.wheel=setTimeout(N,d),p.zoom("mouse",i(P(S(E,x),p.mouse[0],p.mouse[1]),p.extent,c));function N(){p.wheel=null,p.end()}}function k(a,...l){if(s||!t.apply(this,arguments))return;var p=a.currentTarget,E=I(this,l,!0).event(a),x=ht(a.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",q,!0),T=ft(a,p),N=a.clientX,D=a.clientY;Ce(a.view),an(a),E.mouse=[T,this.__zoom.invert(T)],nn(this),E.start();function X(Y){if(zt(Y),!E.moved){var H=Y.clientX-N,lt=Y.clientY-D;E.moved=H*H+lt*lt>w}E.event(Y).zoom("mouse",i(P(E.that.__zoom,E.mouse[0]=ft(Y,p),E.mouse[1]),E.extent,c))}function q(Y){x.on("mousemove.zoom mouseup.zoom",null),Fe(Y.view,E.moved),zt(Y),E.event(Y).end()}}function L(a,...l){if(t.apply(this,arguments)){var p=this.__zoom,E=ft(a.changedTouches?a.changedTouches[0]:a,this),x=p.invert(E),T=p.k*(a.shiftKey?.5:2),N=i(P(S(p,T),E,x),n.apply(this,l),c);zt(a),h>0?ht(this).transition().duration(h).call(z,N,E,a):ht(this).call(g.transform,N,E,a)}}function O(a,...l){if(t.apply(this,arguments)){var p=a.touches,E=p.length,x=I(this,l,a.changedTouches.length===E).event(a),T,N,D,X;for(an(a),N=0;N<E;++N)D=p[N],X=ft(D,this),X=[X,this.__zoom.invert(X),D.identifier],x.touch0?!x.touch1&&x.touch0[2]!==X[2]&&(x.touch1=X,x.taps=0):(x.touch0=X,T=!0,x.taps=1+!!o);o&&(o=clearTimeout(o)),T&&(x.taps<2&&(u=X[0],o=setTimeout(function(){o=null},v)),nn(this),x.start())}}function V(a,...l){if(this.__zooming){var p=I(this,l).event(a),E=a.changedTouches,x=E.length,T,N,D,X;for(zt(a),T=0;T<x;++T)N=E[T],D=ft(N,this),p.touch0&&p.touch0[2]===N.identifier?p.touch0[0]=D:p.touch1&&p.touch1[2]===N.identifier&&(p.touch1[0]=D);if(N=p.that.__zoom,p.touch1){var q=p.touch0[0],Y=p.touch0[1],H=p.touch1[0],lt=p.touch1[1],it=(it=H[0]-q[0])*it+(it=H[1]-q[1])*it,ct=(ct=lt[0]-Y[0])*ct+(ct=lt[1]-Y[1])*ct;N=S(N,Math.sqrt(it/ct)),D=[(q[0]+H[0])/2,(q[1]+H[1])/2],X=[(Y[0]+lt[0])/2,(Y[1]+lt[1])/2]}else if(p.touch0)D=p.touch0[0],X=p.touch0[1];else return;p.zoom("touch",i(P(N,D,X),p.extent,c))}}function J(a,...l){if(this.__zooming){var p=I(this,l).event(a),E=a.changedTouches,x=E.length,T,N;for(an(a),s&&clearTimeout(s),s=setTimeout(function(){s=null},v),T=0;T<x;++T)N=E[T],p.touch0&&p.touch0[2]===N.identifier?delete p.touch0:p.touch1&&p.touch1[2]===N.identifier&&delete p.touch1;if(p.touch1&&!p.touch0&&(p.touch0=p.touch1,delete p.touch1),p.touch0)p.touch0[1]=this.__zoom.invert(p.touch0[0]);else if(p.end(),p.taps===2&&(N=ft(N,this),Math.hypot(u[0]-N[0],u[1]-N[1])<_)){var D=ht(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return g.wheelDelta=function(a){return arguments.length?(e=typeof a=="function"?a:Xt(+a),g):e},g.filter=function(a){return arguments.length?(t=typeof a=="function"?a:Xt(!!a),g):t},g.touchable=function(a){return arguments.length?(r=typeof a=="function"?a:Xt(!!a),g):r},g.extent=function(a){return arguments.length?(n=typeof a=="function"?a:Xt([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),g):n},g.scaleExtent=function(a){return arguments.length?(f[0]=+a[0],f[1]=+a[1],g):[f[0],f[1]]},g.translateExtent=function(a){return arguments.length?(c[0][0]=+a[0][0],c[1][0]=+a[1][0],c[0][1]=+a[0][1],c[1][1]=+a[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(a){return arguments.length?(i=a,g):i},g.duration=function(a){return arguments.length?(h=+a,g):h},g.interpolate=function(a){return arguments.length?(M=a,g):M},g.on=function(){var a=m.on.apply(m,arguments);return a===m?g:a},g.clickDistance=function(a){return arguments.length?(w=(a=+a)*a,g):Math.sqrt(w)},g.tapDistance=function(a){return arguments.length?(_=+a,g):_},g}function Di(t){return t}function Ri(t){if(t==null)return Di;var n,i,e=t.scale[0],r=t.scale[1],f=t.translate[0],c=t.translate[1];return function(h,M){M||(n=i=0);var m=2,o=h.length,u=new Array(o);for(u[0]=(n+=h[0])*e+f,u[1]=(i+=h[1])*r+c;m<o;)u[m]=h[m],++m;return u}}function Ci(t,n){for(var i,e=t.length,r=e-n;r<--e;)i=t[r],t[r++]=t[e],t[e]=i}function Fi(t,n){return typeof n=="string"&&(n=t.objects[n]),n.type==="GeometryCollection"?{type:"FeatureCollection",features:n.geometries.map(function(i){return re(t,i)})}:re(t,n)}function re(t,n){var i=n.id,e=n.bbox,r=n.properties==null?{}:n.properties,f=ki(t,n);return i==null&&e==null?{type:"Feature",properties:r,geometry:f}:e==null?{type:"Feature",id:i,properties:r,geometry:f}:{type:"Feature",id:i,bbox:e,properties:r,geometry:f}}function ki(t,n){var i=Ri(t.transform),e=t.arcs;function r(o,u){u.length&&u.pop();for(var s=e[o<0?~o:o],v=0,d=s.length;v<d;++v)u.push(i(s[v],v));o<0&&Ci(u,d)}function f(o){return i(o)}function c(o){for(var u=[],s=0,v=o.length;s<v;++s)r(o[s],u);return u.length<2&&u.push(u[0]),u}function h(o){for(var u=c(o);u.length<4;)u.push(u[0]);return u}function M(o){return o.map(h)}function m(o){var u=o.type,s;switch(u){case"GeometryCollection":return{type:u,geometries:o.geometries.map(m)};case"Point":s=f(o.coordinates);break;case"MultiPoint":s=o.coordinates.map(f);break;case"LineString":s=c(o.arcs);break;case"MultiLineString":s=o.arcs.map(c);break;case"Polygon":s=M(o.arcs);break;case"MultiPolygon":s=o.arcs.map(M);break;default:return null}return{type:u,coordinates:s}}return m(n)}var Li=at(" <path></path>",1),Ji=at("<path></path>"),Ai=at('<circle r="30" fill="#599FF0"></circle>'),Yi=at('<g><pattern id="circles-urban-industrial-era" x="0" y="0" width="2" height="2" patternUnits="userSpaceOnUse"><circle cx="1" cy="1" r="0.6" fill="#A060C1"></circle></pattern><pattern id="circles-pre-1600s" x="0" y="0" width="10" height="10" patternUnits="userSpaceOnUse"><circle cx="5" cy="5" r="2" fill="#83BC6E"></circle></pattern><pattern id="circles-intro" x="0" y="0" width="1" height="1" patternUnits="userSpaceOnUse"><circle cx="0.5" cy="0.5" r="0.4" fill="#83BC6E"></circle></pattern><!></g>');function rr(t,n){Dn(n,!0);let i=tt(n,"url",3,""),e=tt(n,"topoJson",3,!1),r=tt(n,"topoJsonObjectsName",3,""),f=tt(n,"interactive",3,!1),c=tt(n,"visible",3,!1),h=tt(n,"geometryType",3,"polygons");function M(y){console.log("Map(id: "+n.id+"):onChapterMouseOver(event:"+JSON.stringify(y.detail)+")"),gt(s,y.detail.id,!0)}function m(y){console.log("Map(id: "+n.id+"):onChapterMouseLeave(event:"+JSON.stringify(y.detail)+")"),gt(s,null)}let o=Tt(ae([])),u=Tt(null),s=Tt(null);const v=Tn();Nn(()=>{se(Cn+i()).then(y=>{gt(o,e()?Fi(y,y.objects[r()]).features:y.features,!0),gt(u,Pe().projection(n.projection),!0)})});function d(y){console.log("Map:onFeatureMouseOver(feature:"+JSON.stringify(y)+")"),y.properties&&y.properties.chapter&&console.log("Map:onFeatureMouseOver(section:"+JSON.stringify(y.properties.chapter)+")"),v("featureMouseOver",{mapID:n.id,featureID:y.properties&&y.properties.chapter?y.properties.chapter:"?"})}function w(y){console.log("Map:onFeatureMouseOut(feature:"+JSON.stringify(y)+")"),y.properties&&y.properties.chapter&&console.log("Map:onFeatureMouseOut(id:"+JSON.stringify(y.properties.chapter)+")"),v("featureMouseOut",{mapID:n.id,featureID:y.properties&&y.properties.chapter?y.properties.chapter:"?"})}function _(y){console.log("Map:onFeatureClick(feature:"+JSON.stringify(y)+")"),v("featureClick",{mapID:n.id,featureID:y.properties&&y.properties.chapter?y.properties.chapter:"?"})}var g=Yi();let S;var P=cn(qt(g),3);return Pn(P,17,()=>F(o),On,(y,z)=>{var I=ln(),C=Nt(I);{var R=L=>{var O=ln(),V=Nt(O);{var J=l=>{var p=Li(),E=Nt(p),x=cn(E);let T;var N=vt(()=>d(F(z)));x.__mouseover=function(...q){var Y;(Y=F(N))==null||Y.apply(this,q)};var D=vt(()=>w(F(z)));x.__mouseout=function(...q){var Y;(Y=F(D))==null||Y.apply(this,q)};var X=vt(()=>_(F(z)));x.__click=function(...q){var Y;(Y=F(X))==null||Y.apply(this,q)},ut((q,Y)=>{Bt(E,`${F(z).properties.chapter??""}
            ${F(s)??""}`),T=pt(x,0,`feature-${F(z).properties.id}`,"svelte-1up1s3s",T,q),b(x,"d",Y)},[()=>({hover:f()&&F(z).properties&&F(z).properties.chapter&&F(s)==F(z).properties.chapter}),()=>F(u)(F(z))]),Q(l,p)},a=l=>{var p=Ji();ut(E=>{pt(p,0,`feature-${F(z).properties.id}`,"svelte-1up1s3s"),b(p,"d",E)},[()=>F(u)(F(z))]),Q(l,p)};Vt(V,l=>{f()?l(J):l(a,!1)})}Q(L,O)},k=L=>{var O=Ai();ut((V,J)=>{pt(O,0,`feature-${F(z).properties.id}`),b(O,"cx",V),b(O,"cy",J)},[()=>n.projection(F(z))[0],()=>n.projection(F(z))[1]]),Q(L,O)};Vt(C,L=>{h()=="polygons"?L(R):L(k,!1)})}Q(y,I)}),St(g),ut(y=>{S=pt(g,0,`map-svg-g ${`view-${n.activeViewID}`} ${`era-${n.activeEraID}`} ${`stop-${n.activeStopID}`}`,"svelte-1up1s3s",S,y),b(g,"id",n.id)},[()=>({visible:c(),hidden:!c(),interactive:f()})]),Q(t,g),Rn({onChapterMouseOver:M,onChapterMouseLeave:m})}le(["mouseover","mouseout","click"]);function Xi(t){return t.k}function qi(t){return[t.x,t.y]}function oe(t){return function(){return t}}function Bi(){let t=0,n=0,i=960,e=500,r=!0,f=!0,c=256,h=Xi,M=qi,m=0;function o(){const u=+h.apply(this,arguments),s=M.apply(this,arguments),v=Math.log2(u/c),d=Math.round(Math.max(v+m,0)),w=Math.pow(2,v-d)*c,_=+s[0]-u/2,g=+s[1]-u/2,S=Math.max(r?0:-1/0,Math.floor((t-_)/w)),P=Math.min(r?1<<d:1/0,Math.ceil((i-_)/w)),y=Math.max(f?0:-1/0,Math.floor((n-g)/w)),z=Math.min(f?1<<d:1/0,Math.ceil((e-g)/w)),I=[];for(let C=y;C<z;++C)for(let R=S;R<P;++R)I.push([R,C,d]);return I.translate=[_/w,g/w],I.scale=w,I}return o.size=function(u){return arguments.length?(t=n=0,i=+u[0],e=+u[1],o):[i-t,e-n]},o.extent=function(u){return arguments.length?(t=+u[0][0],n=+u[0][1],i=+u[1][0],e=+u[1][1],o):[[t,n],[i,e]]},o.scale=function(u){return arguments.length?(h=typeof u=="function"?u:oe(+u),o):h},o.translate=function(u){return arguments.length?(M=typeof u=="function"?u:oe([+u[0],+u[1]]),o):M},o.zoomDelta=function(u){return arguments.length?(m=+u,o):m},o.tileSize=function(u){return arguments.length?(c=+u,o):c},o.clamp=function(u){return arguments.length?(r=f=!!u,o):r&&f},o.clampX=function(u){return arguments.length?(r=!!u,o):r},o.clampY=function(u){return arguments.length?(f=!!u,o):f},o}var Gi=at('<image class="svelte-fuuzqb"></image>'),Vi=at("<g></g>");function or(t,n){Dn(n,!0);let i=tt(n,"visible",3,!1);Tn(),Nn(()=>{});const r=Bi().size([2e3,1e3]).scale(n.projection.scale()*2*Math.PI).translate(n.projection([0,0]))(),{translate:[f,c],scale:h}=r,M=(s,v,d)=>`${Cn}${n.urlPath}${d}/${s}/${v}.${n.urlExtension}`;function m(s,v){const[d,w]=s,{translate:[_,g],scale:S}=v;return[(d+_)*S,(w+g)*S]}var o=Vi();let u;Pn(o,21,()=>r,On,(s,v,d,w)=>{var _=Gi();const g=vt(()=>{const[S,P]=m(F(v),r);return{x:S,y:P}});b(_,"width",h),b(_,"height",h),ut(S=>{Ne(_,"xlink:href",S),b(_,"x",F(g).x),b(_,"y",F(g).y)},[()=>M(...F(v))]),Q(s,_)}),St(o),ut(s=>u=pt(o,0,"map-svg-g svelte-fuuzqb",null,u,s),[()=>({visible:i()})]),Q(t,o),Rn()}var Ui=at('<text dy=".35em"> </text>'),Zi=at('<text dy=".35em" class="svelte-ys1p4g"> </text>'),ji=at('<text class="text-background svelte-ys1p4g" dy=".35em"> </text><!>',1),Hi=at("<g></g>");function ur(t,n){Dn(n,!0);let i=tt(n,"path",15),e=tt(n,"interactive",3,!1),r=tt(n,"visible",3,!1),f=tt(n,"filterOnContext",3,!1),c=tt(n,"labelField",3,"label");function h(g){console.log("Map(id: "+n.id+"):onChapterMouseOver(event:"+JSON.stringify(g.detail)+")"),gt(o,g.detail.id,!0)}function M(g){console.log("Map(id: "+n.id+"):onChapterMouseLeave(event:"+JSON.stringify(g.detail)+")"),gt(o,null)}let m=Tt(ae([])),o=Tt(null);const u=Tn();Nn(()=>{console.log(`Labels:onMount(id:${n.id})`),se(Cn+i()).then(g=>{gt(m,g.features,!0),i(Pe().projection(n.projection))})});function s(g){console.log("Map:onFeatureMouseOver(feature:"+JSON.stringify(g)+")"),g.properties&&g.properties.chapter&&console.log("Map:onFeatureMouseOver(section:"+JSON.stringify(g.properties.chapter)+")"),u("featureMouseOver",{mapID:n.id,featureID:g.properties&&g.properties.chapter?g.properties.chapter:"?"})}function v(g){console.log("Map:onFeatureMouseOut(feature:"+JSON.stringify(g)+")"),g.properties&&g.properties.chapter&&console.log("Map:onFeatureMouseOut(id:"+JSON.stringify(g.properties.chapter)+")"),u("featureMouseOut",{mapID:n.id,featureID:g.properties&&g.properties.chapter?g.properties.chapter:"?"})}function d(g){console.log("Map:onFeatureClick(feature:"+JSON.stringify(g)+")"),u("featureClick",{mapID:n.id,featureID:g.properties&&g.properties.chapter?g.properties.chapter:"?"})}var w=Hi();let _;return Pn(w,21,()=>F(m),On,(g,S)=>{var P=ln(),y=Nt(P);{var z=I=>{var C=ji(),R=Nt(C),k=qt(R,!0);St(R);var L=cn(R);{var O=J=>{var a=Ui(),l=vt(()=>s(F(S)));a.__mouseover=function(...N){var D;(D=F(l))==null||D.apply(this,N)};var p=vt(()=>v(F(S)));a.__mouseout=function(...N){var D;(D=F(p))==null||D.apply(this,N)};var E=vt(()=>d(F(S)));a.__click=function(...N){var D;(D=F(E))==null||D.apply(this,N)};let x;var T=qt(a,!0);St(a),ut((N,D)=>{b(a,"transform",N),x=pt(a,0,"svelte-ys1p4g",null,x,D),Bt(T,F(S).properties[c()])},[()=>`translate(${n.projection(F(S).geometry.coordinates)})`,()=>({hover:e()&&F(S).properties&&F(S).properties.chapter&&F(o)==F(S).properties.chapter})]),Q(J,a)},V=J=>{var a=Zi(),l=qt(a,!0);St(a),ut(p=>{b(a,"transform",p),Bt(l,F(S).properties[c()])},[()=>`translate(${n.projection(F(S).geometry.coordinates)})`]),Q(J,a)};Vt(L,J=>{e()?J(O):J(V,!1)})}ut(J=>{b(R,"transform",J),Bt(k,F(S).properties[c()])},[()=>`translate(${n.projection(F(S).geometry.coordinates)})`]),Q(I,C)};Vt(y,I=>{F(S).geometry&&(!f()||F(S).properties.era==n.activeEraID)&&I(z)})}Q(g,P)}),St(w),ut(g=>{_=pt(w,0,`map-svg-g ${`view-${n.activeViewID}`} ${`era-${n.activeEraID}`} ${`stop-${n.activeStopID}`}`,"svelte-ys1p4g",_,g),b(w,"id",n.id)},[()=>({visible:r(),hidden:!r(),interactive:e()})]),Q(t,w),Rn({onChapterMouseOver:h,onChapterMouseLeave:M})}le(["mouseover","mouseout","click"]);export{ur as L,rr as M,or as T,er as a,Pe as g,ir as z};
