import{B as Te,D as Ne,C as De,an as Re,af as Ce,p as On,k as Tt,j as ue,m as pt,s as ln,g as qt,l as F,f as Nt,r as St,t as ut,e as Pn,u as vt}from"./DGs1lYU8.js";import{d as ht,m as Fe,i as ae,T as tn,n as nn,e as Tn,f as Nn,s as gt,g as b,o as ke}from"./C92Iai7I.js";import{d as at,c as sn,a as Q}from"./DgqEAGrr.js";import{c as Dn,o as Rn}from"./DdUmUt6c.js";import{d as le,s as Bt}from"./CW4wzEu_.js";import{p as tt,i as Vt}from"./hk8xwm9n.js";import{b as Cn}from"./DAFC47d8.js";function ar(t,n,i){Te(()=>{var e=Ne(()=>n(t,i==null?void 0:i())||{});if(i&&(e!=null&&e.update)){var r=!1,c={};De(()=>{var l=i();Re(l),r&&Ce(c,l)&&(c=l,e.update(l))}),r=!0}if(e!=null&&e.destroy)return()=>e.destroy()})}class mt{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const c=i[r],l=n+c,h=Math.abs(n)<Math.abs(c)?n-(l-c):c-(l-n);h&&(i[e++]=h),n=l}return i[e]=n,this._n=e+1,this}valueOf(){const n=this._partials;let i=this._n,e,r,c,l=0;if(i>0){for(l=n[--i];i>0&&(e=l,r=n[--i],l=e+r,c=r-(l-e),!c););i>0&&(c<0&&n[i-1]<0||c>0&&n[i-1]>0)&&(r=c*2,e=l+r,r==e-l&&(l=e))}return l}}function*Le(t){for(const n of t)yield*n}function se(t){return Array.from(Le(t))}function Je(t){let n;for(;n=t.sourceEvent;)t=n;return t}function ft(t,n){if(t=Je(t),n===void 0&&(n=t.currentTarget),n){var i=n.ownerSVGElement||n;if(i.createSVGPoint){var e=i.createSVGPoint();return e.x=t.clientX,e.y=t.clientY,e=e.matrixTransform(n.getScreenCTM().inverse()),[e.x,e.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[t.clientX-r.left-n.clientLeft,t.clientY-r.top-n.clientTop]}}return[t.pageX,t.pageY]}const cn={capture:!0,passive:!1};function fn(t){t.preventDefault(),t.stopImmediatePropagation()}function Ae(t){var n=t.document.documentElement,i=ht(t).on("dragstart.drag",fn,cn);"onselectstart"in n?i.on("selectstart.drag",fn,cn):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Ye(t,n){var i=t.document.documentElement,e=ht(t).on("dragstart.drag",null);n&&(e.on("click.drag",fn,cn),setTimeout(function(){e.on("click.drag",null)},0)),"onselectstart"in i?e.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}var Xe=1e-12;function Jn(t){return((t=Math.exp(t))+1/t)/2}function qe(t){return((t=Math.exp(t))-1/t)/2}function Be(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ge=function t(n,i,e){function r(c,l){var h=c[0],M=c[1],m=c[2],o=l[0],u=l[1],f=l[2],v=o-h,d=u-M,w=v*v+d*d,_,g;if(w<Xe)g=Math.log(f/m)/n,_=function(C){return[h+C*v,M+C*d,m*Math.exp(n*C*g)]};else{var S=Math.sqrt(w),O=(f*f-m*m+e*w)/(2*m*i*S),y=(f*f-m*m-e*w)/(2*f*i*S),z=Math.log(Math.sqrt(O*O+1)-O),I=Math.log(Math.sqrt(y*y+1)-y);g=(I-z)/n,_=function(C){var R=C*g,k=Jn(z),L=m/(i*S)*(k*Be(n*R+z)-qe(z));return[h+L*v,M+L*d,m*k/Jn(n*R+z)]}}return _.duration=g*1e3*n/Math.SQRT2,_}return r.rho=function(c){var l=Math.max(.001,+c),h=l*l,M=h*h;return t(l,h,M)},r}(Math.SQRT2,2,4);function Ve(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function ce(t,n){return fetch(t,n).then(Ve)}var B=1e-6,A=Math.PI,W=A/2,An=A/4,$=A*2,K=180/A,Z=A/180,G=Math.abs,fe=Math.atan,Dt=Math.atan2,U=Math.cos,Ue=Math.exp,je=Math.log,j=Math.sin,Ze=Math.sign||function(t){return t>0?1:t<0?-1:0},yt=Math.sqrt,He=Math.tan;function We(t){return t>1?0:t<-1?A:Math.acos(t)}function Rt(t){return t>1?W:t<-1?-W:Math.asin(t)}function et(){}function Ut(t,n){t&&Xn.hasOwnProperty(t.type)&&Xn[t.type](t,n)}var Yn={Feature:function(t,n){Ut(t.geometry,n)},FeatureCollection:function(t,n){for(var i=t.features,e=-1,r=i.length;++e<r;)Ut(i[e].geometry,n)}},Xn={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)t=i[e],n.point(t[0],t[1],t[2])},LineString:function(t,n){hn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)hn(i[e],n,0)},Polygon:function(t,n){qn(t.coordinates,n)},MultiPolygon:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)qn(i[e],n)},GeometryCollection:function(t,n){for(var i=t.geometries,e=-1,r=i.length;++e<r;)Ut(i[e],n)}};function hn(t,n,i){var e=-1,r=t.length-i,c;for(n.lineStart();++e<r;)c=t[e],n.point(c[0],c[1],c[2]);n.lineEnd()}function qn(t,n){var i=-1,e=t.length;for(n.polygonStart();++i<e;)hn(t[i],n,1);n.polygonEnd()}function Mt(t,n){t&&Yn.hasOwnProperty(t.type)?Yn[t.type](t,n):Ut(t,n)}function pn(t){return[Dt(t[1],t[0]),Rt(t[2])]}function Et(t){var n=t[0],i=t[1],e=U(i);return[e*U(n),e*j(n),j(i)]}function kt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function jt(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function en(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Lt(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function gn(t){var n=yt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function vn(t,n){function i(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(i.invert=function(e,r){return e=n.invert(e,r),e&&t.invert(e[0],e[1])}),i}function mn(t,n){return G(t)>A&&(t-=Math.round(t/$)*$),[t,n]}mn.invert=mn;function he(t,n,i){return(t%=$)?n||i?vn(Gn(t),Vn(n,i)):Gn(t):n||i?Vn(n,i):mn}function Bn(t){return function(n,i){return n+=t,G(n)>A&&(n-=Math.round(n/$)*$),[n,i]}}function Gn(t){var n=Bn(t);return n.invert=Bn(-t),n}function Vn(t,n){var i=U(t),e=j(t),r=U(n),c=j(n);function l(h,M){var m=U(M),o=U(h)*m,u=j(h)*m,f=j(M),v=f*i+o*e;return[Dt(u*r-v*c,o*i-f*e),Rt(v*r+u*c)]}return l.invert=function(h,M){var m=U(M),o=U(h)*m,u=j(h)*m,f=j(M),v=f*r-u*c;return[Dt(u*r+f*c,o*i+v*e),Rt(v*i-o*e)]},l}function Ke(t){t=he(t[0]*Z,t[1]*Z,t.length>2?t[2]*Z:0);function n(i){return i=t(i[0]*Z,i[1]*Z),i[0]*=K,i[1]*=K,i}return n.invert=function(i){return i=t.invert(i[0]*Z,i[1]*Z),i[0]*=K,i[1]*=K,i},n}function Qe(t,n,i,e,r,c){if(i){var l=U(n),h=j(n),M=e*i;r==null?(r=n+e*$,c=n-M/2):(r=Un(l,r),c=Un(l,c),(e>0?r<c:r>c)&&(r+=e*$));for(var m,o=r;e>0?o>c:o<c;o-=M)m=pn([l,-h*U(o),-h*j(o)]),t.point(m[0],m[1])}}function Un(t,n){n=Et(n),n[0]-=t,gn(n);var i=We(-n[1]);return((-n[2]<0?-i:i)+$-B)%$}function pe(){var t=[],n;return{point:function(i,e,r){n.push([i,e,r])},lineStart:function(){t.push(n=[])},lineEnd:et,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],n=null,i}}}function Gt(t,n){return G(t[0]-n[0])<B&&G(t[1]-n[1])<B}function Jt(t,n,i,e){this.x=t,this.z=n,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function ge(t,n,i,e,r){var c=[],l=[],h,M;if(t.forEach(function(d){if(!((w=d.length-1)<=0)){var w,_=d[0],g=d[w],S;if(Gt(_,g)){if(!_[2]&&!g[2]){for(r.lineStart(),h=0;h<w;++h)r.point((_=d[h])[0],_[1]);r.lineEnd();return}g[0]+=2*B}c.push(S=new Jt(_,d,null,!0)),l.push(S.o=new Jt(_,null,S,!1)),c.push(S=new Jt(g,d,null,!1)),l.push(S.o=new Jt(g,null,S,!0))}}),!!c.length){for(l.sort(n),jn(c),jn(l),h=0,M=l.length;h<M;++h)l[h].e=i=!i;for(var m=c[0],o,u;;){for(var f=m,v=!0;f.v;)if((f=f.n)===m)return;o=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(v)for(h=0,M=o.length;h<M;++h)r.point((u=o[h])[0],u[1]);else e(f.x,f.n.x,1,r);f=f.n}else{if(v)for(o=f.p.z,h=o.length-1;h>=0;--h)r.point((u=o[h])[0],u[1]);else e(f.x,f.p.x,-1,r);f=f.p}f=f.o,o=f.z,v=!v}while(!f.v);r.lineEnd()}}}function jn(t){if(n=t.length){for(var n,i=0,e=t[0],r;++i<n;)e.n=r=t[i],r.p=e,e=r;e.n=r=t[0],r.p=e}}function rn(t){return G(t[0])<=A?t[0]:Ze(t[0])*((G(t[0])+A)%$-A)}function be(t,n){var i=rn(n),e=n[1],r=j(e),c=[j(i),-U(i),0],l=0,h=0,M=new mt;r===1?e=W+B:r===-1&&(e=-W-B);for(var m=0,o=t.length;m<o;++m)if(f=(u=t[m]).length)for(var u,f,v=u[f-1],d=rn(v),w=v[1]/2+An,_=j(w),g=U(w),S=0;S<f;++S,d=y,_=I,g=C,v=O){var O=u[S],y=rn(O),z=O[1]/2+An,I=j(z),C=U(z),R=y-d,k=R>=0?1:-1,L=k*R,P=L>A,V=_*I;if(M.add(Dt(V*k*j(L),g*C+V*U(L))),l+=P?R+k*$:R,P^d>=i^y>=i){var J=jt(Et(v),Et(O));gn(J);var a=jt(c,J);gn(a);var s=(P^R>=0?-1:1)*Rt(a[2]);(e>s||e===s&&(J[0]||J[1]))&&(h+=P^R>=0?1:-1)}}return(l<-1e-6||l<B&&M<-1e-12)^h&1}function ve(t,n,i,e){return function(r){var c=n(r),l=pe(),h=n(l),M=!1,m,o,u,f={point:v,lineStart:w,lineEnd:_,polygonStart:function(){f.point=g,f.lineStart=S,f.lineEnd=O,o=[],m=[]},polygonEnd:function(){f.point=v,f.lineStart=w,f.lineEnd=_,o=se(o);var y=be(m,e);o.length?(M||(r.polygonStart(),M=!0),ge(o,ti,y,i,r)):y&&(M||(r.polygonStart(),M=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),M&&(r.polygonEnd(),M=!1),o=m=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function v(y,z){t(y,z)&&r.point(y,z)}function d(y,z){c.point(y,z)}function w(){f.point=d,c.lineStart()}function _(){f.point=v,c.lineEnd()}function g(y,z){u.push([y,z]),h.point(y,z)}function S(){h.lineStart(),u=[]}function O(){g(u[0][0],u[0][1]),h.lineEnd();var y=h.clean(),z=l.result(),I,C=z.length,R,k,L;if(u.pop(),m.push(u),u=null,!!C){if(y&1){if(k=z[0],(R=k.length-1)>0){for(M||(r.polygonStart(),M=!0),r.lineStart(),I=0;I<R;++I)r.point((L=k[I])[0],L[1]);r.lineEnd()}return}C>1&&y&2&&z.push(z.pop().concat(z.shift())),o.push(z.filter($e))}}return f}}function $e(t){return t.length>1}function ti(t,n){return((t=t.x)[0]<0?t[1]-W-B:W-t[1])-((n=n.x)[0]<0?n[1]-W-B:W-n[1])}const Zn=ve(function(){return!0},ni,ii,[-A,-W]);function ni(t){var n=NaN,i=NaN,e=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(c,l){var h=c>0?A:-A,M=G(c-n);G(M-A)<B?(t.point(n,i=(i+l)/2>0?W:-W),t.point(e,i),t.lineEnd(),t.lineStart(),t.point(h,i),t.point(c,i),r=0):e!==h&&M>=A&&(G(n-e)<B&&(n-=e*B),G(c-h)<B&&(c-=h*B),i=ei(n,i,c,l),t.point(e,i),t.lineEnd(),t.lineStart(),t.point(h,i),r=0),t.point(n=c,i=l),e=h},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-r}}}function ei(t,n,i,e){var r,c,l=j(t-i);return G(l)>B?fe((j(n)*(c=U(e))*j(i)-j(e)*(r=U(n))*j(t))/(r*c*l)):(n+e)/2}function ii(t,n,i,e){var r;if(t==null)r=i*W,e.point(-A,r),e.point(0,r),e.point(A,r),e.point(A,0),e.point(A,-r),e.point(0,-r),e.point(-A,-r),e.point(-A,0),e.point(-A,r);else if(G(t[0]-n[0])>B){var c=t[0]<n[0]?A:-A;r=i*c/2,e.point(-c,r),e.point(0,r),e.point(c,r)}else e.point(n[0],n[1])}function ri(t){var n=U(t),i=2*Z,e=n>0,r=G(n)>B;function c(o,u,f,v){Qe(v,t,i,f,o,u)}function l(o,u){return U(o)*U(u)>n}function h(o){var u,f,v,d,w;return{lineStart:function(){d=v=!1,w=1},point:function(_,g){var S=[_,g],O,y=l(_,g),z=e?y?0:m(_,g):y?m(_+(_<0?A:-A),g):0;if(!u&&(d=v=y)&&o.lineStart(),y!==v&&(O=M(u,S),(!O||Gt(u,O)||Gt(S,O))&&(S[2]=1)),y!==v)w=0,y?(o.lineStart(),O=M(S,u),o.point(O[0],O[1])):(O=M(u,S),o.point(O[0],O[1],2),o.lineEnd()),u=O;else if(r&&u&&e^y){var I;!(z&f)&&(I=M(S,u,!0))&&(w=0,e?(o.lineStart(),o.point(I[0][0],I[0][1]),o.point(I[1][0],I[1][1]),o.lineEnd()):(o.point(I[1][0],I[1][1]),o.lineEnd(),o.lineStart(),o.point(I[0][0],I[0][1],3)))}y&&(!u||!Gt(u,S))&&o.point(S[0],S[1]),u=S,v=y,f=z},lineEnd:function(){v&&o.lineEnd(),u=null},clean:function(){return w|(d&&v)<<1}}}function M(o,u,f){var v=Et(o),d=Et(u),w=[1,0,0],_=jt(v,d),g=kt(_,_),S=_[0],O=g-S*S;if(!O)return!f&&o;var y=n*g/O,z=-n*S/O,I=jt(w,_),C=Lt(w,y),R=Lt(_,z);en(C,R);var k=I,L=kt(C,k),P=kt(k,k),V=L*L-P*(kt(C,C)-1);if(!(V<0)){var J=yt(V),a=Lt(k,(-L-J)/P);if(en(a,C),a=pn(a),!f)return a;var s=o[0],p=u[0],E=o[1],x=u[1],T;p<s&&(T=s,s=p,p=T);var N=p-s,D=G(N-A)<B,X=D||N<B;if(!D&&x<E&&(T=E,E=x,x=T),X?D?E+x>0^a[1]<(G(a[0]-s)<B?E:x):E<=a[1]&&a[1]<=x:N>A^(s<=a[0]&&a[0]<=p)){var q=Lt(k,(-L+J)/P);return en(q,C),[a,pn(q)]}}}function m(o,u){var f=e?t:A-t,v=0;return o<-f?v|=1:o>f&&(v|=2),u<-f?v|=4:u>f&&(v|=8),v}return ve(l,h,c,e?[0,-t]:[-A,t-A])}function oi(t,n,i,e,r,c){var l=t[0],h=t[1],M=n[0],m=n[1],o=0,u=1,f=M-l,v=m-h,d;if(d=i-l,!(!f&&d>0)){if(d/=f,f<0){if(d<o)return;d<u&&(u=d)}else if(f>0){if(d>u)return;d>o&&(o=d)}if(d=r-l,!(!f&&d<0)){if(d/=f,f<0){if(d>u)return;d>o&&(o=d)}else if(f>0){if(d<o)return;d<u&&(u=d)}if(d=e-h,!(!v&&d>0)){if(d/=v,v<0){if(d<o)return;d<u&&(u=d)}else if(v>0){if(d>u)return;d>o&&(o=d)}if(d=c-h,!(!v&&d<0)){if(d/=v,v<0){if(d>u)return;d>o&&(o=d)}else if(v>0){if(d<o)return;d<u&&(u=d)}return o>0&&(t[0]=l+o*f,t[1]=h+o*v),u<1&&(n[0]=l+u*f,n[1]=h+u*v),!0}}}}}var At=1e9,Yt=-1e9;function ui(t,n,i,e){function r(m,o){return t<=m&&m<=i&&n<=o&&o<=e}function c(m,o,u,f){var v=0,d=0;if(m==null||(v=l(m,u))!==(d=l(o,u))||M(m,o)<0^u>0)do f.point(v===0||v===3?t:i,v>1?e:n);while((v=(v+u+4)%4)!==d);else f.point(o[0],o[1])}function l(m,o){return G(m[0]-t)<B?o>0?0:3:G(m[0]-i)<B?o>0?2:1:G(m[1]-n)<B?o>0?1:0:o>0?3:2}function h(m,o){return M(m.x,o.x)}function M(m,o){var u=l(m,1),f=l(o,1);return u!==f?u-f:u===0?o[1]-m[1]:u===1?m[0]-o[0]:u===2?m[1]-o[1]:o[0]-m[0]}return function(m){var o=m,u=pe(),f,v,d,w,_,g,S,O,y,z,I,C={point:R,lineStart:V,lineEnd:J,polygonStart:L,polygonEnd:P};function R(s,p){r(s,p)&&o.point(s,p)}function k(){for(var s=0,p=0,E=v.length;p<E;++p)for(var x=v[p],T=1,N=x.length,D=x[0],X,q,Y=D[0],H=D[1];T<N;++T)X=Y,q=H,D=x[T],Y=D[0],H=D[1],q<=e?H>e&&(Y-X)*(e-q)>(H-q)*(t-X)&&++s:H<=e&&(Y-X)*(e-q)<(H-q)*(t-X)&&--s;return s}function L(){o=u,f=[],v=[],I=!0}function P(){var s=k(),p=I&&s,E=(f=se(f)).length;(p||E)&&(m.polygonStart(),p&&(m.lineStart(),c(null,null,1,m),m.lineEnd()),E&&ge(f,h,s,c,m),m.polygonEnd()),o=m,f=v=d=null}function V(){C.point=a,v&&v.push(d=[]),z=!0,y=!1,S=O=NaN}function J(){f&&(a(w,_),g&&y&&u.rejoin(),f.push(u.result())),C.point=R,y&&o.lineEnd()}function a(s,p){var E=r(s,p);if(v&&d.push([s,p]),z)w=s,_=p,g=E,z=!1,E&&(o.lineStart(),o.point(s,p));else if(E&&y)o.point(s,p);else{var x=[S=Math.max(Yt,Math.min(At,S)),O=Math.max(Yt,Math.min(At,O))],T=[s=Math.max(Yt,Math.min(At,s)),p=Math.max(Yt,Math.min(At,p))];oi(x,T,t,n,i,e)?(y||(o.lineStart(),o.point(x[0],x[1])),o.point(T[0],T[1]),E||o.lineEnd(),I=!1):E&&(o.lineStart(),o.point(s,p),I=!1)}S=s,O=p,y=E}return C}}const dn=t=>t;var on=new mt,yn=new mt,me,de,Mn,Sn,ct={point:et,lineStart:et,lineEnd:et,polygonStart:function(){ct.lineStart=ai,ct.lineEnd=si},polygonEnd:function(){ct.lineStart=ct.lineEnd=ct.point=et,on.add(G(yn)),yn=new mt},result:function(){var t=on/2;return on=new mt,t}};function ai(){ct.point=li}function li(t,n){ct.point=ye,me=Mn=t,de=Sn=n}function ye(t,n){yn.add(Sn*t-Mn*n),Mn=t,Sn=n}function si(){ye(me,de)}var wt=1/0,Zt=wt,Ct=-wt,Ht=Ct,Wt={point:ci,lineStart:et,lineEnd:et,polygonStart:et,polygonEnd:et,result:function(){var t=[[wt,Zt],[Ct,Ht]];return Ct=Ht=-(Zt=wt=1/0),t}};function ci(t,n){t<wt&&(wt=t),t>Ct&&(Ct=t),n<Zt&&(Zt=n),n>Ht&&(Ht=n)}var _n=0,En=0,xt=0,Kt=0,Qt=0,_t=0,wn=0,zn=0,It=0,Me,Se,rt,ot,nt={point:dt,lineStart:Hn,lineEnd:Wn,polygonStart:function(){nt.lineStart=pi,nt.lineEnd=gi},polygonEnd:function(){nt.point=dt,nt.lineStart=Hn,nt.lineEnd=Wn},result:function(){var t=It?[wn/It,zn/It]:_t?[Kt/_t,Qt/_t]:xt?[_n/xt,En/xt]:[NaN,NaN];return _n=En=xt=Kt=Qt=_t=wn=zn=It=0,t}};function dt(t,n){_n+=t,En+=n,++xt}function Hn(){nt.point=fi}function fi(t,n){nt.point=hi,dt(rt=t,ot=n)}function hi(t,n){var i=t-rt,e=n-ot,r=yt(i*i+e*e);Kt+=r*(rt+t)/2,Qt+=r*(ot+n)/2,_t+=r,dt(rt=t,ot=n)}function Wn(){nt.point=dt}function pi(){nt.point=vi}function gi(){_e(Me,Se)}function vi(t,n){nt.point=_e,dt(Me=rt=t,Se=ot=n)}function _e(t,n){var i=t-rt,e=n-ot,r=yt(i*i+e*e);Kt+=r*(rt+t)/2,Qt+=r*(ot+n)/2,_t+=r,r=ot*t-rt*n,wn+=r*(rt+t),zn+=r*(ot+n),It+=r*3,dt(rt=t,ot=n)}function Ee(t){this._context=t}Ee.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,$);break}}},result:et};var xn=new mt,un,we,ze,Ot,Pt,Ft={point:et,lineStart:function(){Ft.point=mi},lineEnd:function(){un&&xe(we,ze),Ft.point=et},polygonStart:function(){un=!0},polygonEnd:function(){un=null},result:function(){var t=+xn;return xn=new mt,t}};function mi(t,n){Ft.point=xe,we=Ot=t,ze=Pt=n}function xe(t,n){Ot-=t,Pt-=n,xn.add(yt(Ot*Ot+Pt*Pt)),Ot=t,Pt=n}let Kn,bt,Qn,bn;class $n{constructor(n){this._append=n==null?Ie:di(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,i){switch(this._point){case 0:{this._append`M${n},${i}`,this._point=1;break}case 1:{this._append`L${n},${i}`;break}default:{if(this._append`M${n},${i}`,this._radius!==Qn||this._append!==bt){const e=this._radius,r=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,Qn=e,bt=this._append,bn=this._,this._=r}this._+=bn;break}}}result(){const n=this._;return this._="",n.length?n:null}}function Ie(t){let n=1;this._+=t[0];for(const i=t.length;n<i;++n)this._+=arguments[n]+t[n]}function di(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return Ie;if(n!==Kn){const i=10**n;Kn=n,bt=function(r){let c=1;this._+=r[0];for(const l=r.length;c<l;++c)this._+=Math.round(arguments[c]*i)/i+r[c]}}return bt}function Oe(t,n){let i=3,e=4.5,r,c;function l(h){return h&&(typeof e=="function"&&c.pointRadius(+e.apply(this,arguments)),Mt(h,r(c))),c.result()}return l.area=function(h){return Mt(h,r(ct)),ct.result()},l.measure=function(h){return Mt(h,r(Ft)),Ft.result()},l.bounds=function(h){return Mt(h,r(Wt)),Wt.result()},l.centroid=function(h){return Mt(h,r(nt)),nt.result()},l.projection=function(h){return arguments.length?(r=h==null?(t=null,dn):(t=h).stream,l):t},l.context=function(h){return arguments.length?(c=h==null?(n=null,new $n(i)):new Ee(n=h),typeof e!="function"&&c.pointRadius(e),l):n},l.pointRadius=function(h){return arguments.length?(e=typeof h=="function"?h:(c.pointRadius(+h),+h),l):e},l.digits=function(h){if(!arguments.length)return i;if(h==null)i=null;else{const M=Math.floor(h);if(!(M>=0))throw new RangeError(`invalid digits: ${h}`);i=M}return n===null&&(c=new $n(i)),l},l.projection(t).digits(i).context(n)}function Fn(t){return function(n){var i=new In;for(var e in t)i[e]=t[e];return i.stream=n,i}}function In(){}In.prototype={constructor:In,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function kn(t,n,i){var e=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),e!=null&&t.clipExtent(null),Mt(i,t.stream(Wt)),n(Wt.result()),e!=null&&t.clipExtent(e),t}function Pe(t,n,i){return kn(t,function(e){var r=n[1][0]-n[0][0],c=n[1][1]-n[0][1],l=Math.min(r/(e[1][0]-e[0][0]),c/(e[1][1]-e[0][1])),h=+n[0][0]+(r-l*(e[1][0]+e[0][0]))/2,M=+n[0][1]+(c-l*(e[1][1]+e[0][1]))/2;t.scale(150*l).translate([h,M])},i)}function yi(t,n,i){return Pe(t,[[0,0],n],i)}function Mi(t,n,i){return kn(t,function(e){var r=+n,c=r/(e[1][0]-e[0][0]),l=(r-c*(e[1][0]+e[0][0]))/2,h=-c*e[0][1];t.scale(150*c).translate([l,h])},i)}function Si(t,n,i){return kn(t,function(e){var r=+n,c=r/(e[1][1]-e[0][1]),l=-c*e[0][0],h=(r-c*(e[1][1]+e[0][1]))/2;t.scale(150*c).translate([l,h])},i)}var te=16,_i=U(30*Z);function ne(t,n){return+n?wi(t,n):Ei(t)}function Ei(t){return Fn({point:function(n,i){n=t(n,i),this.stream.point(n[0],n[1])}})}function wi(t,n){function i(e,r,c,l,h,M,m,o,u,f,v,d,w,_){var g=m-e,S=o-r,O=g*g+S*S;if(O>4*n&&w--){var y=l+f,z=h+v,I=M+d,C=yt(y*y+z*z+I*I),R=Rt(I/=C),k=G(G(I)-1)<B||G(c-u)<B?(c+u)/2:Dt(z,y),L=t(k,R),P=L[0],V=L[1],J=P-e,a=V-r,s=S*J-g*a;(s*s/O>n||G((g*J+S*a)/O-.5)>.3||l*f+h*v+M*d<_i)&&(i(e,r,c,l,h,M,P,V,k,y/=C,z/=C,I,w,_),_.point(P,V),i(P,V,k,y,z,I,m,o,u,f,v,d,w,_))}}return function(e){var r,c,l,h,M,m,o,u,f,v,d,w,_={point:g,lineStart:S,lineEnd:y,polygonStart:function(){e.polygonStart(),_.lineStart=z},polygonEnd:function(){e.polygonEnd(),_.lineStart=S}};function g(R,k){R=t(R,k),e.point(R[0],R[1])}function S(){u=NaN,_.point=O,e.lineStart()}function O(R,k){var L=Et([R,k]),P=t(R,k);i(u,f,o,v,d,w,u=P[0],f=P[1],o=R,v=L[0],d=L[1],w=L[2],te,e),e.point(u,f)}function y(){_.point=g,e.lineEnd()}function z(){S(),_.point=I,_.lineEnd=C}function I(R,k){O(r=R,k),c=u,l=f,h=v,M=d,m=w,_.point=O}function C(){i(u,f,o,v,d,w,c,l,r,h,M,m,te,e),_.lineEnd=y,y()}return _}}var zi=Fn({point:function(t,n){this.stream.point(t*Z,n*Z)}});function xi(t){return Fn({point:function(n,i){var e=t(n,i);return this.stream.point(e[0],e[1])}})}function Ii(t,n,i,e,r){function c(l,h){return l*=e,h*=r,[n+t*l,i-t*h]}return c.invert=function(l,h){return[(l-n)/t*e,(i-h)/t*r]},c}function ee(t,n,i,e,r,c){if(!c)return Ii(t,n,i,e,r);var l=U(c),h=j(c),M=l*t,m=h*t,o=l/t,u=h/t,f=(h*i-l*n)/t,v=(h*n+l*i)/t;function d(w,_){return w*=e,_*=r,[M*w-m*_+n,i-m*w-M*_]}return d.invert=function(w,_){return[e*(o*w-u*_+f),r*(v-u*w-o*_)]},d}function Oi(t){return Pi(function(){return t})()}function Pi(t){var n,i=150,e=480,r=250,c=0,l=0,h=0,M=0,m=0,o,u=0,f=1,v=1,d=null,w=Zn,_=null,g,S,O,y=dn,z=.5,I,C,R,k,L;function P(s){return R(s[0]*Z,s[1]*Z)}function V(s){return s=R.invert(s[0],s[1]),s&&[s[0]*K,s[1]*K]}P.stream=function(s){return k&&L===s?k:k=zi(xi(o)(w(I(y(L=s)))))},P.preclip=function(s){return arguments.length?(w=s,d=void 0,a()):w},P.postclip=function(s){return arguments.length?(y=s,_=g=S=O=null,a()):y},P.clipAngle=function(s){return arguments.length?(w=+s?ri(d=s*Z):(d=null,Zn),a()):d*K},P.clipExtent=function(s){return arguments.length?(y=s==null?(_=g=S=O=null,dn):ui(_=+s[0][0],g=+s[0][1],S=+s[1][0],O=+s[1][1]),a()):_==null?null:[[_,g],[S,O]]},P.scale=function(s){return arguments.length?(i=+s,J()):i},P.translate=function(s){return arguments.length?(e=+s[0],r=+s[1],J()):[e,r]},P.center=function(s){return arguments.length?(c=s[0]%360*Z,l=s[1]%360*Z,J()):[c*K,l*K]},P.rotate=function(s){return arguments.length?(h=s[0]%360*Z,M=s[1]%360*Z,m=s.length>2?s[2]%360*Z:0,J()):[h*K,M*K,m*K]},P.angle=function(s){return arguments.length?(u=s%360*Z,J()):u*K},P.reflectX=function(s){return arguments.length?(f=s?-1:1,J()):f<0},P.reflectY=function(s){return arguments.length?(v=s?-1:1,J()):v<0},P.precision=function(s){return arguments.length?(I=ne(C,z=s*s),a()):yt(z)},P.fitExtent=function(s,p){return Pe(P,s,p)},P.fitSize=function(s,p){return yi(P,s,p)},P.fitWidth=function(s,p){return Mi(P,s,p)},P.fitHeight=function(s,p){return Si(P,s,p)};function J(){var s=ee(i,0,0,f,v,u).apply(null,n(c,l)),p=ee(i,e-s[0],r-s[1],f,v,u);return o=he(h,M,m),C=vn(n,p),R=vn(o,C),I=ne(C,z),a()}function a(){return k=L=null,P}return function(){return n=t.apply(this,arguments),P.invert=n.invert&&V,J()}}function Ln(t,n){return[t,je(He((W+n)/2))]}Ln.invert=function(t,n){return[t,2*fe(Ue(n))-W]};function lr(){return Ti(Ln).scale(961/$)}function Ti(t){var n=Oi(t),i=n.center,e=n.scale,r=n.translate,c=n.clipExtent,l=null,h,M,m;n.scale=function(u){return arguments.length?(e(u),o()):e()},n.translate=function(u){return arguments.length?(r(u),o()):r()},n.center=function(u){return arguments.length?(i(u),o()):i()},n.clipExtent=function(u){return arguments.length?(u==null?l=h=M=m=null:(l=+u[0][0],h=+u[0][1],M=+u[1][0],m=+u[1][1]),o()):l==null?null:[[l,h],[M,m]]};function o(){var u=A*e(),f=n(Ke(n.rotate()).invert([0,0]));return c(l==null?[[f[0]-u,f[1]-u],[f[0]+u,f[1]+u]]:t===Ln?[[Math.max(f[0]-u,l),h],[Math.min(f[0]+u,M),m]]:[[l,Math.max(f[1]-u,h)],[M,Math.min(f[1]+u,m)]])}return o()}const Xt=t=>()=>t;function Ni(t,{sourceEvent:n,target:i,transform:e,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:e,enumerable:!0,configurable:!0},_:{value:r}})}function an(t){t.stopImmediatePropagation()}function zt(t){t.preventDefault(),t.stopImmediatePropagation()}function Di(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Ri(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ie(){return this.__zoom||ae}function Ci(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Fi(){return navigator.maxTouchPoints||"ontouchstart"in this}function ki(t,n,i){var e=t.invertX(n[0][0])-i[0][0],r=t.invertX(n[1][0])-i[1][0],c=t.invertY(n[0][1])-i[0][1],l=t.invertY(n[1][1])-i[1][1];return t.translate(r>e?(e+r)/2:Math.min(0,e)||Math.max(0,r),l>c?(c+l)/2:Math.min(0,c)||Math.max(0,l))}function sr(){var t=Di,n=Ri,i=ki,e=Ci,r=Fi,c=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],h=250,M=Ge,m=Fe("start","zoom","end"),o,u,f,v=500,d=150,w=0,_=10;function g(a){a.property("__zoom",ie).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",L).filter(r).on("touchstart.zoom",P).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",J).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(a,s,p,E){var x=a.selection?a.selection():a;x.property("__zoom",ie),a!==x?z(a,s,p,E):x.interrupt().each(function(){I(this,arguments).event(E).start().zoom(null,typeof s=="function"?s.apply(this,arguments):s).end()})},g.scaleBy=function(a,s,p,E){g.scaleTo(a,function(){var x=this.__zoom.k,T=typeof s=="function"?s.apply(this,arguments):s;return x*T},p,E)},g.scaleTo=function(a,s,p,E){g.transform(a,function(){var x=n.apply(this,arguments),T=this.__zoom,N=p==null?y(x):typeof p=="function"?p.apply(this,arguments):p,D=T.invert(N),X=typeof s=="function"?s.apply(this,arguments):s;return i(O(S(T,X),N,D),x,l)},p,E)},g.translateBy=function(a,s,p,E){g.transform(a,function(){return i(this.__zoom.translate(typeof s=="function"?s.apply(this,arguments):s,typeof p=="function"?p.apply(this,arguments):p),n.apply(this,arguments),l)},null,E)},g.translateTo=function(a,s,p,E,x){g.transform(a,function(){var T=n.apply(this,arguments),N=this.__zoom,D=E==null?y(T):typeof E=="function"?E.apply(this,arguments):E;return i(ae.translate(D[0],D[1]).scale(N.k).translate(typeof s=="function"?-s.apply(this,arguments):-s,typeof p=="function"?-p.apply(this,arguments):-p),T,l)},E,x)};function S(a,s){return s=Math.max(c[0],Math.min(c[1],s)),s===a.k?a:new tn(s,a.x,a.y)}function O(a,s,p){var E=s[0]-p[0]*a.k,x=s[1]-p[1]*a.k;return E===a.x&&x===a.y?a:new tn(a.k,E,x)}function y(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function z(a,s,p,E){a.on("start.zoom",function(){I(this,arguments).event(E).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(E).end()}).tween("zoom",function(){var x=this,T=arguments,N=I(x,T).event(E),D=n.apply(x,T),X=p==null?y(D):typeof p=="function"?p.apply(x,T):p,q=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),Y=x.__zoom,H=typeof s=="function"?s.apply(x,T):s,lt=M(Y.invert(X).concat(q/Y.k),H.invert(X).concat(q/H.k));return function(it){if(it===1)it=H;else{var st=lt(it),$t=q/st[2];it=new tn($t,X[0]-st[0]*$t,X[1]-st[1]*$t)}N.zoom(null,it)}})}function I(a,s,p){return!p&&a.__zooming||new C(a,s)}function C(a,s){this.that=a,this.args=s,this.active=0,this.sourceEvent=null,this.extent=n.apply(a,s),this.taps=0}C.prototype={event:function(a){return a&&(this.sourceEvent=a),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(a,s){return this.mouse&&a!=="mouse"&&(this.mouse[1]=s.invert(this.mouse[0])),this.touch0&&a!=="touch"&&(this.touch0[1]=s.invert(this.touch0[0])),this.touch1&&a!=="touch"&&(this.touch1[1]=s.invert(this.touch1[0])),this.that.__zoom=s,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(a){var s=ht(this.that).datum();m.call(a,this.that,new Ni(a,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:m}),s)}};function R(a,...s){if(!t.apply(this,arguments))return;var p=I(this,s).event(a),E=this.__zoom,x=Math.max(c[0],Math.min(c[1],E.k*Math.pow(2,e.apply(this,arguments)))),T=ft(a);if(p.wheel)(p.mouse[0][0]!==T[0]||p.mouse[0][1]!==T[1])&&(p.mouse[1]=E.invert(p.mouse[0]=T)),clearTimeout(p.wheel);else{if(E.k===x)return;p.mouse=[T,E.invert(T)],nn(this),p.start()}zt(a),p.wheel=setTimeout(N,d),p.zoom("mouse",i(O(S(E,x),p.mouse[0],p.mouse[1]),p.extent,l));function N(){p.wheel=null,p.end()}}function k(a,...s){if(f||!t.apply(this,arguments))return;var p=a.currentTarget,E=I(this,s,!0).event(a),x=ht(a.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",q,!0),T=ft(a,p),N=a.clientX,D=a.clientY;Ae(a.view),an(a),E.mouse=[T,this.__zoom.invert(T)],nn(this),E.start();function X(Y){if(zt(Y),!E.moved){var H=Y.clientX-N,lt=Y.clientY-D;E.moved=H*H+lt*lt>w}E.event(Y).zoom("mouse",i(O(E.that.__zoom,E.mouse[0]=ft(Y,p),E.mouse[1]),E.extent,l))}function q(Y){x.on("mousemove.zoom mouseup.zoom",null),Ye(Y.view,E.moved),zt(Y),E.event(Y).end()}}function L(a,...s){if(t.apply(this,arguments)){var p=this.__zoom,E=ft(a.changedTouches?a.changedTouches[0]:a,this),x=p.invert(E),T=p.k*(a.shiftKey?.5:2),N=i(O(S(p,T),E,x),n.apply(this,s),l);zt(a),h>0?ht(this).transition().duration(h).call(z,N,E,a):ht(this).call(g.transform,N,E,a)}}function P(a,...s){if(t.apply(this,arguments)){var p=a.touches,E=p.length,x=I(this,s,a.changedTouches.length===E).event(a),T,N,D,X;for(an(a),N=0;N<E;++N)D=p[N],X=ft(D,this),X=[X,this.__zoom.invert(X),D.identifier],x.touch0?!x.touch1&&x.touch0[2]!==X[2]&&(x.touch1=X,x.taps=0):(x.touch0=X,T=!0,x.taps=1+!!o);o&&(o=clearTimeout(o)),T&&(x.taps<2&&(u=X[0],o=setTimeout(function(){o=null},v)),nn(this),x.start())}}function V(a,...s){if(this.__zooming){var p=I(this,s).event(a),E=a.changedTouches,x=E.length,T,N,D,X;for(zt(a),T=0;T<x;++T)N=E[T],D=ft(N,this),p.touch0&&p.touch0[2]===N.identifier?p.touch0[0]=D:p.touch1&&p.touch1[2]===N.identifier&&(p.touch1[0]=D);if(N=p.that.__zoom,p.touch1){var q=p.touch0[0],Y=p.touch0[1],H=p.touch1[0],lt=p.touch1[1],it=(it=H[0]-q[0])*it+(it=H[1]-q[1])*it,st=(st=lt[0]-Y[0])*st+(st=lt[1]-Y[1])*st;N=S(N,Math.sqrt(it/st)),D=[(q[0]+H[0])/2,(q[1]+H[1])/2],X=[(Y[0]+lt[0])/2,(Y[1]+lt[1])/2]}else if(p.touch0)D=p.touch0[0],X=p.touch0[1];else return;p.zoom("touch",i(O(N,D,X),p.extent,l))}}function J(a,...s){if(this.__zooming){var p=I(this,s).event(a),E=a.changedTouches,x=E.length,T,N;for(an(a),f&&clearTimeout(f),f=setTimeout(function(){f=null},v),T=0;T<x;++T)N=E[T],p.touch0&&p.touch0[2]===N.identifier?delete p.touch0:p.touch1&&p.touch1[2]===N.identifier&&delete p.touch1;if(p.touch1&&!p.touch0&&(p.touch0=p.touch1,delete p.touch1),p.touch0)p.touch0[1]=this.__zoom.invert(p.touch0[0]);else if(p.end(),p.taps===2&&(N=ft(N,this),Math.hypot(u[0]-N[0],u[1]-N[1])<_)){var D=ht(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return g.wheelDelta=function(a){return arguments.length?(e=typeof a=="function"?a:Xt(+a),g):e},g.filter=function(a){return arguments.length?(t=typeof a=="function"?a:Xt(!!a),g):t},g.touchable=function(a){return arguments.length?(r=typeof a=="function"?a:Xt(!!a),g):r},g.extent=function(a){return arguments.length?(n=typeof a=="function"?a:Xt([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),g):n},g.scaleExtent=function(a){return arguments.length?(c[0]=+a[0],c[1]=+a[1],g):[c[0],c[1]]},g.translateExtent=function(a){return arguments.length?(l[0][0]=+a[0][0],l[1][0]=+a[1][0],l[0][1]=+a[0][1],l[1][1]=+a[1][1],g):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},g.constrain=function(a){return arguments.length?(i=a,g):i},g.duration=function(a){return arguments.length?(h=+a,g):h},g.interpolate=function(a){return arguments.length?(M=a,g):M},g.on=function(){var a=m.on.apply(m,arguments);return a===m?g:a},g.clickDistance=function(a){return arguments.length?(w=(a=+a)*a,g):Math.sqrt(w)},g.tapDistance=function(a){return arguments.length?(_=+a,g):_},g}function cr(t,n){const i=new IntersectionObserver(e,{threshold:1});i.observe(t);function e(r){const c=r.find(l=>l.isIntersecting);if(c){const l=c.target.dataset.id;n(l)}}return{destroy:()=>i.disconnect()}}function Li(t){return t}function Ji(t){if(t==null)return Li;var n,i,e=t.scale[0],r=t.scale[1],c=t.translate[0],l=t.translate[1];return function(h,M){M||(n=i=0);var m=2,o=h.length,u=new Array(o);for(u[0]=(n+=h[0])*e+c,u[1]=(i+=h[1])*r+l;m<o;)u[m]=h[m],++m;return u}}function Ai(t,n){for(var i,e=t.length,r=e-n;r<--e;)i=t[r],t[r++]=t[e],t[e]=i}function Yi(t,n){return typeof n=="string"&&(n=t.objects[n]),n.type==="GeometryCollection"?{type:"FeatureCollection",features:n.geometries.map(function(i){return re(t,i)})}:re(t,n)}function re(t,n){var i=n.id,e=n.bbox,r=n.properties==null?{}:n.properties,c=Xi(t,n);return i==null&&e==null?{type:"Feature",properties:r,geometry:c}:e==null?{type:"Feature",id:i,properties:r,geometry:c}:{type:"Feature",id:i,bbox:e,properties:r,geometry:c}}function Xi(t,n){var i=Ji(t.transform),e=t.arcs;function r(o,u){u.length&&u.pop();for(var f=e[o<0?~o:o],v=0,d=f.length;v<d;++v)u.push(i(f[v],v));o<0&&Ai(u,d)}function c(o){return i(o)}function l(o){for(var u=[],f=0,v=o.length;f<v;++f)r(o[f],u);return u.length<2&&u.push(u[0]),u}function h(o){for(var u=l(o);u.length<4;)u.push(u[0]);return u}function M(o){return o.map(h)}function m(o){var u=o.type,f;switch(u){case"GeometryCollection":return{type:u,geometries:o.geometries.map(m)};case"Point":f=c(o.coordinates);break;case"MultiPoint":f=o.coordinates.map(c);break;case"LineString":f=l(o.arcs);break;case"MultiLineString":f=o.arcs.map(l);break;case"Polygon":f=M(o.arcs);break;case"MultiPolygon":f=o.arcs.map(M);break;default:return null}return{type:u,coordinates:f}}return m(n)}var qi=at(" <path></path>",1),Bi=at("<path></path>"),Gi=at('<circle r="30" fill="#599FF0"></circle>'),Vi=at('<g><pattern id="circles-urban-industrial-era" x="0" y="0" width="2" height="2" patternUnits="userSpaceOnUse"><circle cx="1" cy="1" r="0.6" fill="#A060C1"></circle></pattern><pattern id="circles-pre-1600s" x="0" y="0" width="10" height="10" patternUnits="userSpaceOnUse"><circle cx="5" cy="5" r="2" fill="#83BC6E"></circle></pattern><pattern id="circles-intro" x="0" y="0" width="1" height="1" patternUnits="userSpaceOnUse"><circle cx="0.5" cy="0.5" r="0.4" fill="#83BC6E"></circle></pattern><!></g>');function fr(t,n){On(n,!0);let i=tt(n,"url",3,""),e=tt(n,"topoJson",3,!1),r=tt(n,"topoJsonObjectsName",3,""),c=tt(n,"interactive",3,!1),l=tt(n,"visible",3,!1),h=tt(n,"geometryType",3,"polygons");function M(y){console.log("Map(id: "+n.id+"):onChapterMouseOver(event:"+JSON.stringify(y.detail)+")"),pt(f,y.detail.id,!0)}function m(y){console.log("Map(id: "+n.id+"):onChapterMouseLeave(event:"+JSON.stringify(y.detail)+")"),pt(f,null)}let o=Tt(ue([])),u=Tt(null),f=Tt(null);const v=Dn();Rn(()=>{ce(Cn+i()).then(y=>{pt(o,e()?Yi(y,y.objects[r()]).features:y.features,!0),pt(u,Oe().projection(n.projection),!0)})});function d(y){console.log("Map:onFeatureMouseOver(feature:"+JSON.stringify(y)+")"),y.properties&&y.properties.chapter&&console.log("Map:onFeatureMouseOver(section:"+JSON.stringify(y.properties.chapter)+")"),v("featureMouseOver",{mapID:n.id,featureID:y.properties&&y.properties.chapter?y.properties.chapter:"?"})}function w(y){console.log("Map:onFeatureMouseOut(feature:"+JSON.stringify(y)+")"),y.properties&&y.properties.chapter&&console.log("Map:onFeatureMouseOut(id:"+JSON.stringify(y.properties.chapter)+")"),v("featureMouseOut",{mapID:n.id,featureID:y.properties&&y.properties.chapter?y.properties.chapter:"?"})}function _(y){console.log("Map:onFeatureClick(feature:"+JSON.stringify(y)+")"),v("featureClick",{mapID:n.id,featureID:y.properties&&y.properties.chapter?y.properties.chapter:"?"})}var g=Vi();let S;var O=ln(qt(g),3);return Tn(O,17,()=>F(o),Nn,(y,z)=>{var I=sn(),C=Nt(I);{var R=L=>{var P=sn(),V=Nt(P);{var J=s=>{var p=qi(),E=Nt(p),x=ln(E);let T;var N=vt(()=>d(F(z)));x.__mouseover=function(...q){var Y;(Y=F(N))==null||Y.apply(this,q)};var D=vt(()=>w(F(z)));x.__mouseout=function(...q){var Y;(Y=F(D))==null||Y.apply(this,q)};var X=vt(()=>_(F(z)));x.__click=function(...q){var Y;(Y=F(X))==null||Y.apply(this,q)},ut((q,Y)=>{Bt(E,`${F(z).properties.chapter??""}
            ${F(f)??""}`),T=gt(x,0,`feature-${F(z).properties.id}`,"svelte-1up1s3s",T,q),b(x,"d",Y)},[()=>({hover:c()&&F(z).properties&&F(z).properties.chapter&&F(f)==F(z).properties.chapter}),()=>F(u)(F(z))]),Q(s,p)},a=s=>{var p=Bi();ut(E=>{gt(p,0,`feature-${F(z).properties.id}`,"svelte-1up1s3s"),b(p,"d",E)},[()=>F(u)(F(z))]),Q(s,p)};Vt(V,s=>{c()?s(J):s(a,!1)})}Q(L,P)},k=L=>{var P=Gi();ut((V,J)=>{gt(P,0,`feature-${F(z).properties.id}`),b(P,"cx",V),b(P,"cy",J)},[()=>n.projection(F(z))[0],()=>n.projection(F(z))[1]]),Q(L,P)};Vt(C,L=>{h()=="polygons"?L(R):L(k,!1)})}Q(y,I)}),St(g),ut(y=>{S=gt(g,0,`map-svg-g ${`view-${n.activeViewID}`} ${`era-${n.activeEraID}`} ${`stop-${n.activeStopID}`}`,"svelte-1up1s3s",S,y),b(g,"id",n.id)},[()=>({visible:l(),hidden:!l(),interactive:c()})]),Q(t,g),Pn({onChapterMouseOver:M,onChapterMouseLeave:m})}le(["mouseover","mouseout","click"]);function Ui(t){return t.k}function ji(t){return[t.x,t.y]}function oe(t){return function(){return t}}function Zi(){let t=0,n=0,i=960,e=500,r=!0,c=!0,l=256,h=Ui,M=ji,m=0;function o(){const u=+h.apply(this,arguments),f=M.apply(this,arguments),v=Math.log2(u/l),d=Math.round(Math.max(v+m,0)),w=Math.pow(2,v-d)*l,_=+f[0]-u/2,g=+f[1]-u/2,S=Math.max(r?0:-1/0,Math.floor((t-_)/w)),O=Math.min(r?1<<d:1/0,Math.ceil((i-_)/w)),y=Math.max(c?0:-1/0,Math.floor((n-g)/w)),z=Math.min(c?1<<d:1/0,Math.ceil((e-g)/w)),I=[];for(let C=y;C<z;++C)for(let R=S;R<O;++R)I.push([R,C,d]);return I.translate=[_/w,g/w],I.scale=w,I}return o.size=function(u){return arguments.length?(t=n=0,i=+u[0],e=+u[1],o):[i-t,e-n]},o.extent=function(u){return arguments.length?(t=+u[0][0],n=+u[0][1],i=+u[1][0],e=+u[1][1],o):[[t,n],[i,e]]},o.scale=function(u){return arguments.length?(h=typeof u=="function"?u:oe(+u),o):h},o.translate=function(u){return arguments.length?(M=typeof u=="function"?u:oe([+u[0],+u[1]]),o):M},o.zoomDelta=function(u){return arguments.length?(m=+u,o):m},o.tileSize=function(u){return arguments.length?(l=+u,o):l},o.clamp=function(u){return arguments.length?(r=c=!!u,o):r&&c},o.clampX=function(u){return arguments.length?(r=!!u,o):r},o.clampY=function(u){return arguments.length?(c=!!u,o):c},o}var Hi=at('<image class="svelte-fuuzqb"></image>'),Wi=at("<g></g>");function hr(t,n){On(n,!0);let i=tt(n,"visible",3,!1);Dn(),Rn(()=>{});const r=Zi().size([2e3,1e3]).scale(n.projection.scale()*2*Math.PI).translate(n.projection([0,0]))(),{translate:[c,l],scale:h}=r,M=(f,v,d)=>`${Cn}${n.urlPath}${d}/${f}/${v}.${n.urlExtension}`;function m(f,v){const[d,w]=f,{translate:[_,g],scale:S}=v;return[(d+_)*S,(w+g)*S]}var o=Wi();let u;Tn(o,21,()=>r,Nn,(f,v,d,w)=>{var _=Hi();const g=vt(()=>{const[S,O]=m(F(v),r);return{x:S,y:O}});b(_,"width",h),b(_,"height",h),ut(S=>{ke(_,"xlink:href",S),b(_,"x",F(g).x),b(_,"y",F(g).y)},[()=>M(...F(v))]),Q(f,_)}),St(o),ut(f=>u=gt(o,0,"map-svg-g svelte-fuuzqb",null,u,f),[()=>({visible:i()})]),Q(t,o),Pn()}var Ki=at('<text dy=".35em"> </text>'),Qi=at('<text dy=".35em" class="svelte-ys1p4g"> </text>'),bi=at('<text class="text-background svelte-ys1p4g" dy=".35em"> </text><!>',1),$i=at("<g></g>");function pr(t,n){On(n,!0);let i=tt(n,"path",15),e=tt(n,"interactive",3,!1),r=tt(n,"visible",3,!1),c=tt(n,"filterOnContext",3,!1),l=tt(n,"labelField",3,"label");function h(g){console.log("Map(id: "+n.id+"):onChapterMouseOver(event:"+JSON.stringify(g.detail)+")"),pt(o,g.detail.id,!0)}function M(g){console.log("Map(id: "+n.id+"):onChapterMouseLeave(event:"+JSON.stringify(g.detail)+")"),pt(o,null)}let m=Tt(ue([])),o=Tt(null);const u=Dn();Rn(()=>{console.log(`Labels:onMount(id:${n.id})`),ce(Cn+i()).then(g=>{pt(m,g.features,!0),i(Oe().projection(n.projection))})});function f(g){console.log("Map:onFeatureMouseOver(feature:"+JSON.stringify(g)+")"),g.properties&&g.properties.chapter&&console.log("Map:onFeatureMouseOver(section:"+JSON.stringify(g.properties.chapter)+")"),u("featureMouseOver",{mapID:n.id,featureID:g.properties&&g.properties.chapter?g.properties.chapter:"?"})}function v(g){console.log("Map:onFeatureMouseOut(feature:"+JSON.stringify(g)+")"),g.properties&&g.properties.chapter&&console.log("Map:onFeatureMouseOut(id:"+JSON.stringify(g.properties.chapter)+")"),u("featureMouseOut",{mapID:n.id,featureID:g.properties&&g.properties.chapter?g.properties.chapter:"?"})}function d(g){console.log("Map:onFeatureClick(feature:"+JSON.stringify(g)+")"),u("featureClick",{mapID:n.id,featureID:g.properties&&g.properties.chapter?g.properties.chapter:"?"})}var w=$i();let _;return Tn(w,21,()=>F(m),Nn,(g,S)=>{var O=sn(),y=Nt(O);{var z=I=>{var C=bi(),R=Nt(C),k=qt(R,!0);St(R);var L=ln(R);{var P=J=>{var a=Ki(),s=vt(()=>f(F(S)));a.__mouseover=function(...N){var D;(D=F(s))==null||D.apply(this,N)};var p=vt(()=>v(F(S)));a.__mouseout=function(...N){var D;(D=F(p))==null||D.apply(this,N)};var E=vt(()=>d(F(S)));a.__click=function(...N){var D;(D=F(E))==null||D.apply(this,N)};let x;var T=qt(a,!0);St(a),ut((N,D)=>{b(a,"transform",N),x=gt(a,0,"svelte-ys1p4g",null,x,D),Bt(T,F(S).properties[l()])},[()=>`translate(${n.projection(F(S).geometry.coordinates)})`,()=>({hover:e()&&F(S).properties&&F(S).properties.chapter&&F(o)==F(S).properties.chapter})]),Q(J,a)},V=J=>{var a=Qi(),s=qt(a,!0);St(a),ut(p=>{b(a,"transform",p),Bt(s,F(S).properties[l()])},[()=>`translate(${n.projection(F(S).geometry.coordinates)})`]),Q(J,a)};Vt(L,J=>{e()?J(P):J(V,!1)})}ut(J=>{b(R,"transform",J),Bt(k,F(S).properties[l()])},[()=>`translate(${n.projection(F(S).geometry.coordinates)})`]),Q(I,C)};Vt(y,I=>{F(S).geometry&&(!c()||F(S).properties.era==n.activeEraID)&&I(z)})}Q(g,O)}),St(w),ut(g=>{_=gt(w,0,`map-svg-g ${`view-${n.activeViewID}`} ${`era-${n.activeEraID}`} ${`stop-${n.activeStopID}`}`,"svelte-ys1p4g",_,g),b(w,"id",n.id)},[()=>({visible:r(),hidden:!r(),interactive:e()})]),Q(t,w),Pn({onChapterMouseOver:h,onChapterMouseLeave:M})}le(["mouseover","mouseout","click"]);export{pr as L,fr as M,hr as T,lr as a,ar as b,Oe as g,cr as o,sr as z};
