import{b as vt,d as Le,i as pe,T as en,f as rn,e as zt}from"./styles.BkXuGDYP.js";import{s as On,x as Q,y as x,b as $,f as J,r as w,z as W,i as tt,h as ft,n as mt,D as kn,B as Pn,A as Nn,E as pt,v as jt,t as Rt,d as Ft,G as Et,O as wt,j as Lt,L as ge,Z as be}from"./scheduler.N6BefM9d.js";import{S as Tn,i as Cn}from"./index.C9XHDwOH.js";import{b as Rn}from"./entry.BFUSpNLR.js";class dt{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const o=i[r],u=n+o,s=Math.abs(n)<Math.abs(o)?n-(u-o):o-(u-n);s&&(i[e++]=s),n=u}return i[e]=n,this._n=e+1,this}valueOf(){const n=this._partials;let i=this._n,e,r,o,u=0;if(i>0){for(u=n[--i];i>0&&(e=u,r=n[--i],u=e+r,o=r-(u-e),!o););i>0&&(o<0&&n[i-1]<0||o>0&&n[i-1]>0)&&(r=o*2,e=u+r,r==e-u&&(u=e))}return u}}function*Je(t){for(const n of t)yield*n}function ve(t){return Array.from(Je(t))}function Ae(t){let n;for(;n=t.sourceEvent;)t=n;return t}function gt(t,n){if(t=Ae(t),n===void 0&&(n=t.currentTarget),n){var i=n.ownerSVGElement||n;if(i.createSVGPoint){var e=i.createSVGPoint();return e.x=t.clientX,e.y=t.clientY,e=e.matrixTransform(n.getScreenCTM().inverse()),[e.x,e.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[t.clientX-r.left-n.clientLeft,t.clientY-r.top-n.clientTop]}}return[t.pageX,t.pageY]}const cn={capture:!0,passive:!1};function fn(t){t.preventDefault(),t.stopImmediatePropagation()}function Ve(t){var n=t.document.documentElement,i=vt(t).on("dragstart.drag",fn,cn);"onselectstart"in n?i.on("selectstart.drag",fn,cn):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Ye(t,n){var i=t.document.documentElement,e=vt(t).on("dragstart.drag",null);n&&(e.on("click.drag",fn,cn),setTimeout(function(){e.on("click.drag",null)},0)),"onselectstart"in i?e.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}var Xe=1e-12;function Jn(t){return((t=Math.exp(t))+1/t)/2}function qe(t){return((t=Math.exp(t))-1/t)/2}function Be(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ge=function t(n,i,e){function r(o,u){var s=o[0],m=o[1],p=o[2],l=u[0],a=u[1],c=u[2],g=l-s,d=a-m,z=g*g+d*d,S,M;if(z<Xe)M=Math.log(c/p)/n,S=function(y){return[s+y*g,m+y*d,p*Math.exp(n*y*M)]};else{var D=Math.sqrt(z),O=(c*c-p*p+e*z)/(2*p*i*D),I=(c*c-p*p-e*z)/(2*c*i*D),_=Math.log(Math.sqrt(O*O+1)-O),k=Math.log(Math.sqrt(I*I+1)-I);M=(k-_)/n,S=function(y){var R=y*M,F=Jn(_),A=p/(i*D)*(F*Be(n*R+_)-qe(_));return[s+A*g,m+A*d,p*F/Jn(n*R+_)]}}return S.duration=M*1e3*n/Math.SQRT2,S}return r.rho=function(o){var u=Math.max(.001,+o),s=u*u,m=s*s;return t(u,s,m)},r}(Math.SQRT2,2,4);function Ue(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function me(t,n){return fetch(t,n).then(Ue)}var Y=1e-6,je=1e-12,b=Math.PI,nt=b/2,An=b/4,it=b*2,et=180/b,Z=b/180,q=Math.abs,de=Math.atan,bt=Math.atan2,G=Math.cos,Ze=Math.exp,He=Math.log,U=Math.sin,We=Math.sign||function(t){return t>0?1:t<0?-1:0},yt=Math.sqrt,Ke=Math.tan;function Qe(t){return t>1?0:t<-1?b:Math.acos(t)}function Jt(t){return t>1?nt:t<-1?-nt:Math.asin(t)}function ot(){}function Zt(t,n){t&&Yn.hasOwnProperty(t.type)&&Yn[t.type](t,n)}var Vn={Feature:function(t,n){Zt(t.geometry,n)},FeatureCollection:function(t,n){for(var i=t.features,e=-1,r=i.length;++e<r;)Zt(i[e].geometry,n)}},Yn={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)t=i[e],n.point(t[0],t[1],t[2])},LineString:function(t,n){hn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)hn(i[e],n,0)},Polygon:function(t,n){Xn(t.coordinates,n)},MultiPolygon:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)Xn(i[e],n)},GeometryCollection:function(t,n){for(var i=t.geometries,e=-1,r=i.length;++e<r;)Zt(i[e],n)}};function hn(t,n,i){var e=-1,r=t.length-i,o;for(n.lineStart();++e<r;)o=t[e],n.point(o[0],o[1],o[2]);n.lineEnd()}function Xn(t,n){var i=-1,e=t.length;for(n.polygonStart();++i<e;)hn(t[i],n,1);n.polygonEnd()}function Mt(t,n){t&&Vn.hasOwnProperty(t.type)?Vn[t.type](t,n):Zt(t,n)}function pn(t){return[bt(t[1],t[0]),Jt(t[2])]}function It(t){var n=t[0],i=t[1],e=G(i);return[e*G(n),e*U(n),U(i)]}function Yt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Ht(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function on(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Xt(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function gn(t){var n=yt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function vn(t,n){function i(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(i.invert=function(e,r){return e=n.invert(e,r),e&&t.invert(e[0],e[1])}),i}function mn(t,n){return q(t)>b&&(t-=Math.round(t/it)*it),[t,n]}mn.invert=mn;function _e(t,n,i){return(t%=it)?n||i?vn(Bn(t),Gn(n,i)):Bn(t):n||i?Gn(n,i):mn}function qn(t){return function(n,i){return n+=t,q(n)>b&&(n-=Math.round(n/it)*it),[n,i]}}function Bn(t){var n=qn(t);return n.invert=qn(-t),n}function Gn(t,n){var i=G(t),e=U(t),r=G(n),o=U(n);function u(s,m){var p=G(m),l=G(s)*p,a=U(s)*p,c=U(m),g=c*i+l*e;return[bt(a*r-g*o,l*i-c*e),Jt(g*r+a*o)]}return u.invert=function(s,m){var p=G(m),l=G(s)*p,a=U(s)*p,c=U(m),g=c*r-a*o;return[bt(a*r+c*o,l*i+g*e),Jt(g*i-l*e)]},u}function xe(t){t=_e(t[0]*Z,t[1]*Z,t.length>2?t[2]*Z:0);function n(i){return i=t(i[0]*Z,i[1]*Z),i[0]*=et,i[1]*=et,i}return n.invert=function(i){return i=t.invert(i[0]*Z,i[1]*Z),i[0]*=et,i[1]*=et,i},n}function $e(t,n,i,e,r,o){if(i){var u=G(n),s=U(n),m=e*i;r==null?(r=n+e*it,o=n-m/2):(r=Un(u,r),o=Un(u,o),(e>0?r<o:r>o)&&(r+=e*it));for(var p,l=r;e>0?l>o:l<o;l-=m)p=pn([u,-s*G(l),-s*U(l)]),t.point(p[0],p[1])}}function Un(t,n){n=It(n),n[0]-=t,gn(n);var i=Qe(-n[1]);return((-n[2]<0?-i:i)+it-Y)%it}function ye(){var t=[],n;return{point:function(i,e,r){n.push([i,e,r])},lineStart:function(){t.push(n=[])},lineEnd:ot,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],n=null,i}}}function Ut(t,n){return q(t[0]-n[0])<Y&&q(t[1]-n[1])<Y}function qt(t,n,i,e){this.x=t,this.z=n,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function Me(t,n,i,e,r){var o=[],u=[],s,m;if(t.forEach(function(d){if(!((z=d.length-1)<=0)){var z,S=d[0],M=d[z],D;if(Ut(S,M)){if(!S[2]&&!M[2]){for(r.lineStart(),s=0;s<z;++s)r.point((S=d[s])[0],S[1]);r.lineEnd();return}M[0]+=2*Y}o.push(D=new qt(S,d,null,!0)),u.push(D.o=new qt(S,null,D,!1)),o.push(D=new qt(M,d,null,!1)),u.push(D.o=new qt(M,null,D,!0))}}),!!o.length){for(u.sort(n),jn(o),jn(u),s=0,m=u.length;s<m;++s)u[s].e=i=!i;for(var p=o[0],l,a;;){for(var c=p,g=!0;c.v;)if((c=c.n)===p)return;l=c.z,r.lineStart();do{if(c.v=c.o.v=!0,c.e){if(g)for(s=0,m=l.length;s<m;++s)r.point((a=l[s])[0],a[1]);else e(c.x,c.n.x,1,r);c=c.n}else{if(g)for(l=c.p.z,s=l.length-1;s>=0;--s)r.point((a=l[s])[0],a[1]);else e(c.x,c.p.x,-1,r);c=c.p}c=c.o,l=c.z,g=!g}while(!c.v);r.lineEnd()}}}function jn(t){if(n=t.length){for(var n,i=0,e=t[0],r;++i<n;)e.n=r=t[i],r.p=e,e=r;e.n=r=t[0],r.p=e}}function un(t){return q(t[0])<=b?t[0]:We(t[0])*((q(t[0])+b)%it-b)}function ti(t,n){var i=un(n),e=n[1],r=U(e),o=[U(i),-G(i),0],u=0,s=0,m=new dt;r===1?e=nt+Y:r===-1&&(e=-nt-Y);for(var p=0,l=t.length;p<l;++p)if(c=(a=t[p]).length)for(var a,c,g=a[c-1],d=un(g),z=g[1]/2+An,S=U(z),M=G(z),D=0;D<c;++D,d=I,S=k,M=y,g=O){var O=a[D],I=un(O),_=O[1]/2+An,k=U(_),y=G(_),R=I-d,F=R>=0?1:-1,A=F*R,T=A>b,K=S*k;if(m.add(bt(K*F*U(A),M*y+K*G(A))),u+=T?R+F*it:R,T^d>=i^I>=i){var X=Ht(It(g),It(O));gn(X);var f=Ht(o,X);gn(f);var h=(T^R>=0?-1:1)*Jt(f[2]);(e>h||e===h&&(X[0]||X[1]))&&(s+=T^R>=0?1:-1)}}return(u<-Y||u<Y&&m<-je)^s&1}function Se(t,n,i,e){return function(r){var o=n(r),u=ye(),s=n(u),m=!1,p,l,a,c={point:g,lineStart:z,lineEnd:S,polygonStart:function(){c.point=M,c.lineStart=D,c.lineEnd=O,l=[],p=[]},polygonEnd:function(){c.point=g,c.lineStart=z,c.lineEnd=S,l=ve(l);var I=ti(p,e);l.length?(m||(r.polygonStart(),m=!0),Me(l,ei,I,i,r)):I&&(m||(r.polygonStart(),m=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),m&&(r.polygonEnd(),m=!1),l=p=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function g(I,_){t(I,_)&&r.point(I,_)}function d(I,_){o.point(I,_)}function z(){c.point=d,o.lineStart()}function S(){c.point=g,o.lineEnd()}function M(I,_){a.push([I,_]),s.point(I,_)}function D(){s.lineStart(),a=[]}function O(){M(a[0][0],a[0][1]),s.lineEnd();var I=s.clean(),_=u.result(),k,y=_.length,R,F,A;if(a.pop(),p.push(a),a=null,!!y){if(I&1){if(F=_[0],(R=F.length-1)>0){for(m||(r.polygonStart(),m=!0),r.lineStart(),k=0;k<R;++k)r.point((A=F[k])[0],A[1]);r.lineEnd()}return}y>1&&I&2&&_.push(_.pop().concat(_.shift())),l.push(_.filter(ni))}}return c}}function ni(t){return t.length>1}function ei(t,n){return((t=t.x)[0]<0?t[1]-nt-Y:nt-t[1])-((n=n.x)[0]<0?n[1]-nt-Y:nt-n[1])}const Zn=Se(function(){return!0},ii,oi,[-b,-nt]);function ii(t){var n=NaN,i=NaN,e=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,u){var s=o>0?b:-b,m=q(o-n);q(m-b)<Y?(t.point(n,i=(i+u)/2>0?nt:-nt),t.point(e,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),r=0):e!==s&&m>=b&&(q(n-e)<Y&&(n-=e*Y),q(o-s)<Y&&(o-=s*Y),i=ri(n,i,o,u),t.point(e,i),t.lineEnd(),t.lineStart(),t.point(s,i),r=0),t.point(n=o,i=u),e=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-r}}}function ri(t,n,i,e){var r,o,u=U(t-i);return q(u)>Y?de((U(n)*(o=G(e))*U(i)-U(e)*(r=G(n))*U(t))/(r*o*u)):(n+e)/2}function oi(t,n,i,e){var r;if(t==null)r=i*nt,e.point(-b,r),e.point(0,r),e.point(b,r),e.point(b,0),e.point(b,-r),e.point(0,-r),e.point(-b,-r),e.point(-b,0),e.point(-b,r);else if(q(t[0]-n[0])>Y){var o=t[0]<n[0]?b:-b;r=i*o/2,e.point(-o,r),e.point(0,r),e.point(o,r)}else e.point(n[0],n[1])}function ui(t){var n=G(t),i=2*Z,e=n>0,r=q(n)>Y;function o(l,a,c,g){$e(g,t,i,c,l,a)}function u(l,a){return G(l)*G(a)>n}function s(l){var a,c,g,d,z;return{lineStart:function(){d=g=!1,z=1},point:function(S,M){var D=[S,M],O,I=u(S,M),_=e?I?0:p(S,M):I?p(S+(S<0?b:-b),M):0;if(!a&&(d=g=I)&&l.lineStart(),I!==g&&(O=m(a,D),(!O||Ut(a,O)||Ut(D,O))&&(D[2]=1)),I!==g)z=0,I?(l.lineStart(),O=m(D,a),l.point(O[0],O[1])):(O=m(a,D),l.point(O[0],O[1],2),l.lineEnd()),a=O;else if(r&&a&&e^I){var k;!(_&c)&&(k=m(D,a,!0))&&(z=0,e?(l.lineStart(),l.point(k[0][0],k[0][1]),l.point(k[1][0],k[1][1]),l.lineEnd()):(l.point(k[1][0],k[1][1]),l.lineEnd(),l.lineStart(),l.point(k[0][0],k[0][1],3)))}I&&(!a||!Ut(a,D))&&l.point(D[0],D[1]),a=D,g=I,c=_},lineEnd:function(){g&&l.lineEnd(),a=null},clean:function(){return z|(d&&g)<<1}}}function m(l,a,c){var g=It(l),d=It(a),z=[1,0,0],S=Ht(g,d),M=Yt(S,S),D=S[0],O=M-D*D;if(!O)return!c&&l;var I=n*M/O,_=-n*D/O,k=Ht(z,S),y=Xt(z,I),R=Xt(S,_);on(y,R);var F=k,A=Yt(y,F),T=Yt(F,F),K=A*A-T*(Yt(y,y)-1);if(!(K<0)){var X=yt(K),f=Xt(F,(-A-X)/T);if(on(f,y),f=pn(f),!c)return f;var h=l[0],v=a[0],E=l[1],P=a[1],N;v<h&&(N=h,h=v,v=N);var C=v-h,L=q(C-b)<Y,V=L||C<Y;if(!L&&P<E&&(N=E,E=P,P=N),V?L?E+P>0^f[1]<(q(f[0]-h)<Y?E:P):E<=f[1]&&f[1]<=P:C>b^(h<=f[0]&&f[0]<=v)){var j=Xt(F,(-A+X)/T);return on(j,y),[f,pn(j)]}}}function p(l,a){var c=e?t:b-t,g=0;return l<-c?g|=1:l>c&&(g|=2),a<-c?g|=4:a>c&&(g|=8),g}return Se(u,s,o,e?[0,-t]:[-b,t-b])}function li(t,n,i,e,r,o){var u=t[0],s=t[1],m=n[0],p=n[1],l=0,a=1,c=m-u,g=p-s,d;if(d=i-u,!(!c&&d>0)){if(d/=c,c<0){if(d<l)return;d<a&&(a=d)}else if(c>0){if(d>a)return;d>l&&(l=d)}if(d=r-u,!(!c&&d<0)){if(d/=c,c<0){if(d>a)return;d>l&&(l=d)}else if(c>0){if(d<l)return;d<a&&(a=d)}if(d=e-s,!(!g&&d>0)){if(d/=g,g<0){if(d<l)return;d<a&&(a=d)}else if(g>0){if(d>a)return;d>l&&(l=d)}if(d=o-s,!(!g&&d<0)){if(d/=g,g<0){if(d>a)return;d>l&&(l=d)}else if(g>0){if(d<l)return;d<a&&(a=d)}return l>0&&(t[0]=u+l*c,t[1]=s+l*g),a<1&&(n[0]=u+a*c,n[1]=s+a*g),!0}}}}}var kt=1e9,Bt=-kt;function ai(t,n,i,e){function r(p,l){return t<=p&&p<=i&&n<=l&&l<=e}function o(p,l,a,c){var g=0,d=0;if(p==null||(g=u(p,a))!==(d=u(l,a))||m(p,l)<0^a>0)do c.point(g===0||g===3?t:i,g>1?e:n);while((g=(g+a+4)%4)!==d);else c.point(l[0],l[1])}function u(p,l){return q(p[0]-t)<Y?l>0?0:3:q(p[0]-i)<Y?l>0?2:1:q(p[1]-n)<Y?l>0?1:0:l>0?3:2}function s(p,l){return m(p.x,l.x)}function m(p,l){var a=u(p,1),c=u(l,1);return a!==c?a-c:a===0?l[1]-p[1]:a===1?p[0]-l[0]:a===2?p[1]-l[1]:l[0]-p[0]}return function(p){var l=p,a=ye(),c,g,d,z,S,M,D,O,I,_,k,y={point:R,lineStart:K,lineEnd:X,polygonStart:A,polygonEnd:T};function R(h,v){r(h,v)&&l.point(h,v)}function F(){for(var h=0,v=0,E=g.length;v<E;++v)for(var P=g[v],N=1,C=P.length,L=P[0],V,j,B=L[0],H=L[1];N<C;++N)V=B,j=H,L=P[N],B=L[0],H=L[1],j<=e?H>e&&(B-V)*(e-j)>(H-j)*(t-V)&&++h:H<=e&&(B-V)*(e-j)<(H-j)*(t-V)&&--h;return h}function A(){l=a,c=[],g=[],k=!0}function T(){var h=F(),v=k&&h,E=(c=ve(c)).length;(v||E)&&(p.polygonStart(),v&&(p.lineStart(),o(null,null,1,p),p.lineEnd()),E&&Me(c,s,h,o,p),p.polygonEnd()),l=p,c=g=d=null}function K(){y.point=f,g&&g.push(d=[]),_=!0,I=!1,D=O=NaN}function X(){c&&(f(z,S),M&&I&&a.rejoin(),c.push(a.result())),y.point=R,I&&l.lineEnd()}function f(h,v){var E=r(h,v);if(g&&d.push([h,v]),_)z=h,S=v,M=E,_=!1,E&&(l.lineStart(),l.point(h,v));else if(E&&I)l.point(h,v);else{var P=[D=Math.max(Bt,Math.min(kt,D)),O=Math.max(Bt,Math.min(kt,O))],N=[h=Math.max(Bt,Math.min(kt,h)),v=Math.max(Bt,Math.min(kt,v))];li(P,N,t,n,i,e)?(I||(l.lineStart(),l.point(P[0],P[1])),l.point(N[0],N[1]),E||l.lineEnd(),k=!1):E&&(l.lineStart(),l.point(h,v),k=!1)}D=h,O=v,I=E}return y}}const dn=t=>t;var ln=new dt,_n=new dt,Ee,we,yn,Mn,ht={point:ot,lineStart:ot,lineEnd:ot,polygonStart:function(){ht.lineStart=si,ht.lineEnd=fi},polygonEnd:function(){ht.lineStart=ht.lineEnd=ht.point=ot,ln.add(q(_n)),_n=new dt},result:function(){var t=ln/2;return ln=new dt,t}};function si(){ht.point=ci}function ci(t,n){ht.point=ze,Ee=yn=t,we=Mn=n}function ze(t,n){_n.add(Mn*t-yn*n),yn=t,Mn=n}function fi(){ze(Ee,we)}var Dt=1/0,Wt=Dt,At=-Dt,Kt=At,Qt={point:hi,lineStart:ot,lineEnd:ot,polygonStart:ot,polygonEnd:ot,result:function(){var t=[[Dt,Wt],[At,Kt]];return At=Kt=-(Wt=Dt=1/0),t}};function hi(t,n){t<Dt&&(Dt=t),t>At&&(At=t),n<Wt&&(Wt=n),n>Kt&&(Kt=n)}var Sn=0,En=0,Pt=0,xt=0,$t=0,St=0,wn=0,zn=0,Nt=0,Ie,De,lt,at,rt={point:_t,lineStart:Hn,lineEnd:Wn,polygonStart:function(){rt.lineStart=vi,rt.lineEnd=mi},polygonEnd:function(){rt.point=_t,rt.lineStart=Hn,rt.lineEnd=Wn},result:function(){var t=Nt?[wn/Nt,zn/Nt]:St?[xt/St,$t/St]:Pt?[Sn/Pt,En/Pt]:[NaN,NaN];return Sn=En=Pt=xt=$t=St=wn=zn=Nt=0,t}};function _t(t,n){Sn+=t,En+=n,++Pt}function Hn(){rt.point=pi}function pi(t,n){rt.point=gi,_t(lt=t,at=n)}function gi(t,n){var i=t-lt,e=n-at,r=yt(i*i+e*e);xt+=r*(lt+t)/2,$t+=r*(at+n)/2,St+=r,_t(lt=t,at=n)}function Wn(){rt.point=_t}function vi(){rt.point=di}function mi(){Oe(Ie,De)}function di(t,n){rt.point=Oe,_t(Ie=lt=t,De=at=n)}function Oe(t,n){var i=t-lt,e=n-at,r=yt(i*i+e*e);xt+=r*(lt+t)/2,$t+=r*(at+n)/2,St+=r,r=at*t-lt*n,wn+=r*(lt+t),zn+=r*(at+n),Nt+=r*3,_t(lt=t,at=n)}function ke(t){this._context=t}ke.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,it);break}}},result:ot};var In=new dt,an,Pe,Ne,Tt,Ct,Vt={point:ot,lineStart:function(){Vt.point=_i},lineEnd:function(){an&&Te(Pe,Ne),Vt.point=ot},polygonStart:function(){an=!0},polygonEnd:function(){an=null},result:function(){var t=+In;return In=new dt,t}};function _i(t,n){Vt.point=Te,Pe=Tt=t,Ne=Ct=n}function Te(t,n){Tt-=t,Ct-=n,In.add(yt(Tt*Tt+Ct*Ct)),Tt=t,Ct=n}let Kn,tn,Qn,xn;class $n{constructor(n){this._append=n==null?Ce:yi(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,i){switch(this._point){case 0:{this._append`M${n},${i}`,this._point=1;break}case 1:{this._append`L${n},${i}`;break}default:{if(this._append`M${n},${i}`,this._radius!==Qn||this._append!==tn){const e=this._radius,r=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,Qn=e,tn=this._append,xn=this._,this._=r}this._+=xn;break}}}result(){const n=this._;return this._="",n.length?n:null}}function Ce(t){let n=1;this._+=t[0];for(const i=t.length;n<i;++n)this._+=arguments[n]+t[n]}function yi(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return Ce;if(n!==Kn){const i=10**n;Kn=n,tn=function(r){let o=1;this._+=r[0];for(const u=r.length;o<u;++o)this._+=Math.round(arguments[o]*i)/i+r[o]}}return tn}function Re(t,n){let i=3,e=4.5,r,o;function u(s){return s&&(typeof e=="function"&&o.pointRadius(+e.apply(this,arguments)),Mt(s,r(o))),o.result()}return u.area=function(s){return Mt(s,r(ht)),ht.result()},u.measure=function(s){return Mt(s,r(Vt)),Vt.result()},u.bounds=function(s){return Mt(s,r(Qt)),Qt.result()},u.centroid=function(s){return Mt(s,r(rt)),rt.result()},u.projection=function(s){return arguments.length?(r=s==null?(t=null,dn):(t=s).stream,u):t},u.context=function(s){return arguments.length?(o=s==null?(n=null,new $n(i)):new ke(n=s),typeof e!="function"&&o.pointRadius(e),u):n},u.pointRadius=function(s){return arguments.length?(e=typeof s=="function"?s:(o.pointRadius(+s),+s),u):e},u.digits=function(s){if(!arguments.length)return i;if(s==null)i=null;else{const m=Math.floor(s);if(!(m>=0))throw new RangeError(`invalid digits: ${s}`);i=m}return n===null&&(o=new $n(i)),u},u.projection(t).digits(i).context(n)}function Fn(t){return function(n){var i=new Dn;for(var e in t)i[e]=t[e];return i.stream=n,i}}function Dn(){}Dn.prototype={constructor:Dn,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ln(t,n,i){var e=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),e!=null&&t.clipExtent(null),Mt(i,t.stream(Qt)),n(Qt.result()),e!=null&&t.clipExtent(e),t}function Fe(t,n,i){return Ln(t,function(e){var r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],u=Math.min(r/(e[1][0]-e[0][0]),o/(e[1][1]-e[0][1])),s=+n[0][0]+(r-u*(e[1][0]+e[0][0]))/2,m=+n[0][1]+(o-u*(e[1][1]+e[0][1]))/2;t.scale(150*u).translate([s,m])},i)}function Mi(t,n,i){return Fe(t,[[0,0],n],i)}function Si(t,n,i){return Ln(t,function(e){var r=+n,o=r/(e[1][0]-e[0][0]),u=(r-o*(e[1][0]+e[0][0]))/2,s=-o*e[0][1];t.scale(150*o).translate([u,s])},i)}function Ei(t,n,i){return Ln(t,function(e){var r=+n,o=r/(e[1][1]-e[0][1]),u=-o*e[0][0],s=(r-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([u,s])},i)}var te=16,wi=G(30*Z);function ne(t,n){return+n?Ii(t,n):zi(t)}function zi(t){return Fn({point:function(n,i){n=t(n,i),this.stream.point(n[0],n[1])}})}function Ii(t,n){function i(e,r,o,u,s,m,p,l,a,c,g,d,z,S){var M=p-e,D=l-r,O=M*M+D*D;if(O>4*n&&z--){var I=u+c,_=s+g,k=m+d,y=yt(I*I+_*_+k*k),R=Jt(k/=y),F=q(q(k)-1)<Y||q(o-a)<Y?(o+a)/2:bt(_,I),A=t(F,R),T=A[0],K=A[1],X=T-e,f=K-r,h=D*X-M*f;(h*h/O>n||q((M*X+D*f)/O-.5)>.3||u*c+s*g+m*d<wi)&&(i(e,r,o,u,s,m,T,K,F,I/=y,_/=y,k,z,S),S.point(T,K),i(T,K,F,I,_,k,p,l,a,c,g,d,z,S))}}return function(e){var r,o,u,s,m,p,l,a,c,g,d,z,S={point:M,lineStart:D,lineEnd:I,polygonStart:function(){e.polygonStart(),S.lineStart=_},polygonEnd:function(){e.polygonEnd(),S.lineStart=D}};function M(R,F){R=t(R,F),e.point(R[0],R[1])}function D(){a=NaN,S.point=O,e.lineStart()}function O(R,F){var A=It([R,F]),T=t(R,F);i(a,c,l,g,d,z,a=T[0],c=T[1],l=R,g=A[0],d=A[1],z=A[2],te,e),e.point(a,c)}function I(){S.point=M,e.lineEnd()}function _(){D(),S.point=k,S.lineEnd=y}function k(R,F){O(r=R,F),o=a,u=c,s=g,m=d,p=z,S.point=O}function y(){i(a,c,l,g,d,z,o,u,r,s,m,p,te,e),S.lineEnd=I,I()}return S}}var Di=Fn({point:function(t,n){this.stream.point(t*Z,n*Z)}});function Oi(t){return Fn({point:function(n,i){var e=t(n,i);return this.stream.point(e[0],e[1])}})}function ki(t,n,i,e,r){function o(u,s){return u*=e,s*=r,[n+t*u,i-t*s]}return o.invert=function(u,s){return[(u-n)/t*e,(i-s)/t*r]},o}function ee(t,n,i,e,r,o){if(!o)return ki(t,n,i,e,r);var u=G(o),s=U(o),m=u*t,p=s*t,l=u/t,a=s/t,c=(s*i-u*n)/t,g=(s*n+u*i)/t;function d(z,S){return z*=e,S*=r,[m*z-p*S+n,i-p*z-m*S]}return d.invert=function(z,S){return[e*(l*z-a*S+c),r*(g-a*z-l*S)]},d}function Pi(t){return Ni(function(){return t})()}function Ni(t){var n,i=150,e=480,r=250,o=0,u=0,s=0,m=0,p=0,l,a=0,c=1,g=1,d=null,z=Zn,S=null,M,D,O,I=dn,_=.5,k,y,R,F,A;function T(h){return R(h[0]*Z,h[1]*Z)}function K(h){return h=R.invert(h[0],h[1]),h&&[h[0]*et,h[1]*et]}T.stream=function(h){return F&&A===h?F:F=Di(Oi(l)(z(k(I(A=h)))))},T.preclip=function(h){return arguments.length?(z=h,d=void 0,f()):z},T.postclip=function(h){return arguments.length?(I=h,S=M=D=O=null,f()):I},T.clipAngle=function(h){return arguments.length?(z=+h?ui(d=h*Z):(d=null,Zn),f()):d*et},T.clipExtent=function(h){return arguments.length?(I=h==null?(S=M=D=O=null,dn):ai(S=+h[0][0],M=+h[0][1],D=+h[1][0],O=+h[1][1]),f()):S==null?null:[[S,M],[D,O]]},T.scale=function(h){return arguments.length?(i=+h,X()):i},T.translate=function(h){return arguments.length?(e=+h[0],r=+h[1],X()):[e,r]},T.center=function(h){return arguments.length?(o=h[0]%360*Z,u=h[1]%360*Z,X()):[o*et,u*et]},T.rotate=function(h){return arguments.length?(s=h[0]%360*Z,m=h[1]%360*Z,p=h.length>2?h[2]%360*Z:0,X()):[s*et,m*et,p*et]},T.angle=function(h){return arguments.length?(a=h%360*Z,X()):a*et},T.reflectX=function(h){return arguments.length?(c=h?-1:1,X()):c<0},T.reflectY=function(h){return arguments.length?(g=h?-1:1,X()):g<0},T.precision=function(h){return arguments.length?(k=ne(y,_=h*h),f()):yt(_)},T.fitExtent=function(h,v){return Fe(T,h,v)},T.fitSize=function(h,v){return Mi(T,h,v)},T.fitWidth=function(h,v){return Si(T,h,v)},T.fitHeight=function(h,v){return Ei(T,h,v)};function X(){var h=ee(i,0,0,c,g,a).apply(null,n(o,u)),v=ee(i,e-h[0],r-h[1],c,g,a);return l=_e(s,m,p),y=vn(n,v),R=vn(l,y),k=ne(y,_),f()}function f(){return F=A=null,T}return function(){return n=t.apply(this,arguments),T.invert=n.invert&&K,X()}}function bn(t,n){return[t,He(Ke((nt+n)/2))]}bn.invert=function(t,n){return[t,2*de(Ze(n))-nt]};function sr(){return Ti(bn).scale(961/it)}function Ti(t){var n=Pi(t),i=n.center,e=n.scale,r=n.translate,o=n.clipExtent,u=null,s,m,p;n.scale=function(a){return arguments.length?(e(a),l()):e()},n.translate=function(a){return arguments.length?(r(a),l()):r()},n.center=function(a){return arguments.length?(i(a),l()):i()},n.clipExtent=function(a){return arguments.length?(a==null?u=s=m=p=null:(u=+a[0][0],s=+a[0][1],m=+a[1][0],p=+a[1][1]),l()):u==null?null:[[u,s],[m,p]]};function l(){var a=b*e(),c=n(xe(n.rotate()).invert([0,0]));return o(u==null?[[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]]:t===bn?[[Math.max(c[0]-a,u),s],[Math.min(c[0]+a,m),p]]:[[u,Math.max(c[1]-a,s)],[m,Math.min(c[1]+a,p)]])}return l()}const Gt=t=>()=>t;function Ci(t,{sourceEvent:n,target:i,transform:e,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:e,enumerable:!0,configurable:!0},_:{value:r}})}function sn(t){t.stopImmediatePropagation()}function Ot(t){t.preventDefault(),t.stopImmediatePropagation()}function Ri(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Fi(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ie(){return this.__zoom||pe}function Li(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function bi(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ji(t,n,i){var e=t.invertX(n[0][0])-i[0][0],r=t.invertX(n[1][0])-i[1][0],o=t.invertY(n[0][1])-i[0][1],u=t.invertY(n[1][1])-i[1][1];return t.translate(r>e?(e+r)/2:Math.min(0,e)||Math.max(0,r),u>o?(o+u)/2:Math.min(0,o)||Math.max(0,u))}function cr(){var t=Ri,n=Fi,i=Ji,e=Li,r=bi,o=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],s=250,m=Ge,p=Le("start","zoom","end"),l,a,c,g=500,d=150,z=0,S=10;function M(f){f.property("__zoom",ie).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",A).filter(r).on("touchstart.zoom",T).on("touchmove.zoom",K).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(f,h,v,E){var P=f.selection?f.selection():f;P.property("__zoom",ie),f!==P?_(f,h,v,E):P.interrupt().each(function(){k(this,arguments).event(E).start().zoom(null,typeof h=="function"?h.apply(this,arguments):h).end()})},M.scaleBy=function(f,h,v,E){M.scaleTo(f,function(){var P=this.__zoom.k,N=typeof h=="function"?h.apply(this,arguments):h;return P*N},v,E)},M.scaleTo=function(f,h,v,E){M.transform(f,function(){var P=n.apply(this,arguments),N=this.__zoom,C=v==null?I(P):typeof v=="function"?v.apply(this,arguments):v,L=N.invert(C),V=typeof h=="function"?h.apply(this,arguments):h;return i(O(D(N,V),C,L),P,u)},v,E)},M.translateBy=function(f,h,v,E){M.transform(f,function(){return i(this.__zoom.translate(typeof h=="function"?h.apply(this,arguments):h,typeof v=="function"?v.apply(this,arguments):v),n.apply(this,arguments),u)},null,E)},M.translateTo=function(f,h,v,E,P){M.transform(f,function(){var N=n.apply(this,arguments),C=this.__zoom,L=E==null?I(N):typeof E=="function"?E.apply(this,arguments):E;return i(pe.translate(L[0],L[1]).scale(C.k).translate(typeof h=="function"?-h.apply(this,arguments):-h,typeof v=="function"?-v.apply(this,arguments):-v),N,u)},E,P)};function D(f,h){return h=Math.max(o[0],Math.min(o[1],h)),h===f.k?f:new en(h,f.x,f.y)}function O(f,h,v){var E=h[0]-v[0]*f.k,P=h[1]-v[1]*f.k;return E===f.x&&P===f.y?f:new en(f.k,E,P)}function I(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function _(f,h,v,E){f.on("start.zoom",function(){k(this,arguments).event(E).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(E).end()}).tween("zoom",function(){var P=this,N=arguments,C=k(P,N).event(E),L=n.apply(P,N),V=v==null?I(L):typeof v=="function"?v.apply(P,N):v,j=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),B=P.__zoom,H=typeof h=="function"?h.apply(P,N):h,st=m(B.invert(V).concat(j/B.k),H.invert(V).concat(j/H.k));return function(ut){if(ut===1)ut=H;else{var ct=st(ut),nn=j/ct[2];ut=new en(nn,V[0]-ct[0]*nn,V[1]-ct[1]*nn)}C.zoom(null,ut)}})}function k(f,h,v){return!v&&f.__zooming||new y(f,h)}function y(f,h){this.that=f,this.args=h,this.active=0,this.sourceEvent=null,this.extent=n.apply(f,h),this.taps=0}y.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,h){return this.mouse&&f!=="mouse"&&(this.mouse[1]=h.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=h.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=h.invert(this.touch1[0])),this.that.__zoom=h,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var h=vt(this.that).datum();p.call(f,this.that,new Ci(f,{sourceEvent:this.sourceEvent,target:M,type:f,transform:this.that.__zoom,dispatch:p}),h)}};function R(f,...h){if(!t.apply(this,arguments))return;var v=k(this,h).event(f),E=this.__zoom,P=Math.max(o[0],Math.min(o[1],E.k*Math.pow(2,e.apply(this,arguments)))),N=gt(f);if(v.wheel)(v.mouse[0][0]!==N[0]||v.mouse[0][1]!==N[1])&&(v.mouse[1]=E.invert(v.mouse[0]=N)),clearTimeout(v.wheel);else{if(E.k===P)return;v.mouse=[N,E.invert(N)],rn(this),v.start()}Ot(f),v.wheel=setTimeout(C,d),v.zoom("mouse",i(O(D(E,P),v.mouse[0],v.mouse[1]),v.extent,u));function C(){v.wheel=null,v.end()}}function F(f,...h){if(c||!t.apply(this,arguments))return;var v=f.currentTarget,E=k(this,h,!0).event(f),P=vt(f.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",j,!0),N=gt(f,v),C=f.clientX,L=f.clientY;Ve(f.view),sn(f),E.mouse=[N,this.__zoom.invert(N)],rn(this),E.start();function V(B){if(Ot(B),!E.moved){var H=B.clientX-C,st=B.clientY-L;E.moved=H*H+st*st>z}E.event(B).zoom("mouse",i(O(E.that.__zoom,E.mouse[0]=gt(B,v),E.mouse[1]),E.extent,u))}function j(B){P.on("mousemove.zoom mouseup.zoom",null),Ye(B.view,E.moved),Ot(B),E.event(B).end()}}function A(f,...h){if(t.apply(this,arguments)){var v=this.__zoom,E=gt(f.changedTouches?f.changedTouches[0]:f,this),P=v.invert(E),N=v.k*(f.shiftKey?.5:2),C=i(O(D(v,N),E,P),n.apply(this,h),u);Ot(f),s>0?vt(this).transition().duration(s).call(_,C,E,f):vt(this).call(M.transform,C,E,f)}}function T(f,...h){if(t.apply(this,arguments)){var v=f.touches,E=v.length,P=k(this,h,f.changedTouches.length===E).event(f),N,C,L,V;for(sn(f),C=0;C<E;++C)L=v[C],V=gt(L,this),V=[V,this.__zoom.invert(V),L.identifier],P.touch0?!P.touch1&&P.touch0[2]!==V[2]&&(P.touch1=V,P.taps=0):(P.touch0=V,N=!0,P.taps=1+!!l);l&&(l=clearTimeout(l)),N&&(P.taps<2&&(a=V[0],l=setTimeout(function(){l=null},g)),rn(this),P.start())}}function K(f,...h){if(this.__zooming){var v=k(this,h).event(f),E=f.changedTouches,P=E.length,N,C,L,V;for(Ot(f),N=0;N<P;++N)C=E[N],L=gt(C,this),v.touch0&&v.touch0[2]===C.identifier?v.touch0[0]=L:v.touch1&&v.touch1[2]===C.identifier&&(v.touch1[0]=L);if(C=v.that.__zoom,v.touch1){var j=v.touch0[0],B=v.touch0[1],H=v.touch1[0],st=v.touch1[1],ut=(ut=H[0]-j[0])*ut+(ut=H[1]-j[1])*ut,ct=(ct=st[0]-B[0])*ct+(ct=st[1]-B[1])*ct;C=D(C,Math.sqrt(ut/ct)),L=[(j[0]+H[0])/2,(j[1]+H[1])/2],V=[(B[0]+st[0])/2,(B[1]+st[1])/2]}else if(v.touch0)L=v.touch0[0],V=v.touch0[1];else return;v.zoom("touch",i(O(C,L,V),v.extent,u))}}function X(f,...h){if(this.__zooming){var v=k(this,h).event(f),E=f.changedTouches,P=E.length,N,C;for(sn(f),c&&clearTimeout(c),c=setTimeout(function(){c=null},g),N=0;N<P;++N)C=E[N],v.touch0&&v.touch0[2]===C.identifier?delete v.touch0:v.touch1&&v.touch1[2]===C.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(C=gt(C,this),Math.hypot(a[0]-C[0],a[1]-C[1])<S)){var L=vt(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return M.wheelDelta=function(f){return arguments.length?(e=typeof f=="function"?f:Gt(+f),M):e},M.filter=function(f){return arguments.length?(t=typeof f=="function"?f:Gt(!!f),M):t},M.touchable=function(f){return arguments.length?(r=typeof f=="function"?f:Gt(!!f),M):r},M.extent=function(f){return arguments.length?(n=typeof f=="function"?f:Gt([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),M):n},M.scaleExtent=function(f){return arguments.length?(o[0]=+f[0],o[1]=+f[1],M):[o[0],o[1]]},M.translateExtent=function(f){return arguments.length?(u[0][0]=+f[0][0],u[1][0]=+f[1][0],u[0][1]=+f[0][1],u[1][1]=+f[1][1],M):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},M.constrain=function(f){return arguments.length?(i=f,M):i},M.duration=function(f){return arguments.length?(s=+f,M):s},M.interpolate=function(f){return arguments.length?(m=f,M):m},M.on=function(){var f=p.on.apply(p,arguments);return f===p?M:f},M.clickDistance=function(f){return arguments.length?(z=(f=+f)*f,M):Math.sqrt(z)},M.tapDistance=function(f){return arguments.length?(S=+f,M):S},M}function Ai(t){return t}function Vi(t){if(t==null)return Ai;var n,i,e=t.scale[0],r=t.scale[1],o=t.translate[0],u=t.translate[1];return function(s,m){m||(n=i=0);var p=2,l=s.length,a=new Array(l);for(a[0]=(n+=s[0])*e+o,a[1]=(i+=s[1])*r+u;p<l;)a[p]=s[p],++p;return a}}function Yi(t,n){for(var i,e=t.length,r=e-n;r<--e;)i=t[r],t[r++]=t[e],t[e]=i}function Xi(t,n){return typeof n=="string"&&(n=t.objects[n]),n.type==="GeometryCollection"?{type:"FeatureCollection",features:n.geometries.map(function(i){return re(t,i)})}:re(t,n)}function re(t,n){var i=n.id,e=n.bbox,r=n.properties==null?{}:n.properties,o=qi(t,n);return i==null&&e==null?{type:"Feature",properties:r,geometry:o}:e==null?{type:"Feature",id:i,properties:r,geometry:o}:{type:"Feature",id:i,bbox:e,properties:r,geometry:o}}function qi(t,n){var i=Vi(t.transform),e=t.arcs;function r(l,a){a.length&&a.pop();for(var c=e[l<0?~l:l],g=0,d=c.length;g<d;++g)a.push(i(c[g],g));l<0&&Yi(a,d)}function o(l){return i(l)}function u(l){for(var a=[],c=0,g=l.length;c<g;++c)r(l[c],a);return a.length<2&&a.push(a[0]),a}function s(l){for(var a=u(l);a.length<4;)a.push(a[0]);return a}function m(l){return l.map(s)}function p(l){var a=l.type,c;switch(a){case"GeometryCollection":return{type:a,geometries:l.geometries.map(p)};case"Point":c=o(l.coordinates);break;case"MultiPoint":c=l.coordinates.map(o);break;case"LineString":c=u(l.arcs);break;case"MultiLineString":c=l.arcs.map(u);break;case"Polygon":c=m(l.arcs);break;case"MultiPolygon":c=l.arcs.map(m);break;default:return null}return{type:a,coordinates:c}}return p(n)}function oe(t,n,i){const e=t.slice();return e[20]=n[i],e}function Bi(t){let n,i,e,r;return{c(){n=Q("circle"),this.h()},l(o){n=x(o,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0}),$(n).forEach(J),this.h()},h(){w(n,"class",i=`feature-${t[20].properties.id}`),w(n,"cx",e=t[0](t[20])[0]),w(n,"cy",r=t[0](t[20])[1]),w(n,"r","30"),w(n,"fill","#599FF0")},m(o,u){tt(o,n,u)},p(o,u){u&256&&i!==(i=`feature-${o[20].properties.id}`)&&w(n,"class",i),u&257&&e!==(e=o[0](o[20])[0])&&w(n,"cx",e),u&257&&r!==(r=o[0](o[20])[1])&&w(n,"cy",r)},d(o){o&&J(n)}}}function Gi(t){let n;function i(o,u){return o[2]?ji:Ui}let e=i(t),r=e(t);return{c(){r.c(),n=pt()},l(o){r.l(o),n=pt()},m(o,u){r.m(o,u),tt(o,n,u)},p(o,u){e===(e=i(o))&&r?r.p(o,u):(r.d(1),r=e(o),r&&(r.c(),r.m(n.parentNode,n)))},d(o){o&&J(n),r.d(o)}}}function Ui(t){let n,i,e;return{c(){n=Q("path"),this.h()},l(r){n=x(r,"path",{class:!0,d:!0}),$(n).forEach(J),this.h()},h(){w(n,"class",i=jt(`feature-${t[20].properties.id}`)+" svelte-1up1s3s"),w(n,"d",e=t[9](t[20]))},m(r,o){tt(r,n,o)},p(r,o){o&256&&i!==(i=jt(`feature-${r[20].properties.id}`)+" svelte-1up1s3s")&&w(n,"class",i),o&768&&e!==(e=r[9](r[20]))&&w(n,"d",e)},d(r){r&&J(n)}}}function ji(t){let n=t[20].properties.chapter+"",i,e,r,o,u,s,m;return{c(){i=Rt(n),e=Rt(t[10]),r=Q("path"),this.h()},l(p){i=Ft(p,n),e=Ft(p,t[10]),r=x(p,"path",{class:!0,d:!0}),$(r).forEach(J),this.h()},h(){w(r,"class",o=jt(`feature-${t[20].properties.id}`)+" svelte-1up1s3s"),w(r,"d",u=t[9](t[20])),W(r,"hover",t[2]&&t[20].properties&&t[20].properties.chapter&&t[10]==t[20].properties.chapter)},m(p,l){tt(p,i,l),tt(p,e,l),tt(p,r,l),s||(m=[Et(r,"mouseover",function(){wt(t[11](t[20]))&&t[11](t[20]).apply(this,arguments)}),Et(r,"mouseout",function(){wt(t[12](t[20]))&&t[12](t[20]).apply(this,arguments)}),Et(r,"click",function(){wt(t[13](t[20]))&&t[13](t[20]).apply(this,arguments)})],s=!0)},p(p,l){t=p,l&256&&n!==(n=t[20].properties.chapter+"")&&Lt(i,n),l&1024&&Lt(e,t[10]),l&256&&o!==(o=jt(`feature-${t[20].properties.id}`)+" svelte-1up1s3s")&&w(r,"class",o),l&768&&u!==(u=t[9](t[20]))&&w(r,"d",u),l&1284&&W(r,"hover",t[2]&&t[20].properties&&t[20].properties.chapter&&t[10]==t[20].properties.chapter)},d(p){p&&(J(i),J(e),J(r)),s=!1,ge(m)}}}function ue(t){let n;function i(o,u){return o[4]=="polygons"?Gi:Bi}let e=i(t),r=e(t);return{c(){r.c(),n=pt()},l(o){r.l(o),n=pt()},m(o,u){r.m(o,u),tt(o,n,u)},p(o,u){e===(e=i(o))&&r?r.p(o,u):(r.d(1),r=e(o),r&&(r.c(),r.m(n.parentNode,n)))},d(o){o&&J(n),r.d(o)}}}function Zi(t){let n,i,e,r,o,u,s,m,p=zt(t[8]),l=[];for(let a=0;a<p.length;a+=1)l[a]=ue(oe(t,p,a));return{c(){n=Q("g"),i=Q("pattern"),e=Q("circle"),r=Q("pattern"),o=Q("circle"),u=Q("pattern"),s=Q("circle");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){n=x(a,"g",{class:!0,id:!0});var c=$(n);i=x(c,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0});var g=$(i);e=x(g,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(e).forEach(J),g.forEach(J),r=x(c,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0});var d=$(r);o=x(d,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(o).forEach(J),d.forEach(J),u=x(c,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0});var z=$(u);s=x(z,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(s).forEach(J),z.forEach(J);for(let S=0;S<l.length;S+=1)l[S].l(c);c.forEach(J),this.h()},h(){w(e,"cx","1"),w(e,"cy","1"),w(e,"r","0.6"),w(e,"fill","#A060C1"),w(i,"id","circles-urban-industrial-era"),w(i,"x","0"),w(i,"y","0"),w(i,"width","2"),w(i,"height","2"),w(i,"patternUnits","userSpaceOnUse"),w(o,"cx","5"),w(o,"cy","5"),w(o,"r","2"),w(o,"fill","#83BC6E"),w(r,"id","circles-pre-1600s"),w(r,"x","0"),w(r,"y","0"),w(r,"width","10"),w(r,"height","10"),w(r,"patternUnits","userSpaceOnUse"),w(s,"cx","0.5"),w(s,"cy","0.5"),w(s,"r","0.4"),w(s,"fill","#83BC6E"),w(u,"id","circles-intro"),w(u,"x","0"),w(u,"y","0"),w(u,"width","1"),w(u,"height","1"),w(u,"patternUnits","userSpaceOnUse"),w(n,"class",m=`map-svg-g view-${t[5]} era-${t[6]} stop-${t[7]} svelte-1up1s3s`),w(n,"id",t[1]),W(n,"visible",t[3]),W(n,"hidden",!t[3]),W(n,"interactive",t[2])},m(a,c){tt(a,n,c),ft(n,i),ft(i,e),ft(n,r),ft(r,o),ft(n,u),ft(u,s);for(let g=0;g<l.length;g+=1)l[g]&&l[g].m(n,null)},p(a,[c]){if(c&16149){p=zt(a[8]);let g;for(g=0;g<p.length;g+=1){const d=oe(a,p,g);l[g]?l[g].p(d,c):(l[g]=ue(d),l[g].c(),l[g].m(n,null))}for(;g<l.length;g+=1)l[g].d(1);l.length=p.length}c&224&&m!==(m=`map-svg-g view-${a[5]} era-${a[6]} stop-${a[7]} svelte-1up1s3s`)&&w(n,"class",m),c&2&&w(n,"id",a[1]),c&232&&W(n,"visible",a[3]),c&232&&W(n,"hidden",!a[3]),c&228&&W(n,"interactive",a[2])},i:mt,o:mt,d(a){a&&J(n),kn(l,a)}}}function Hi(t,n,i){let{url:e=""}=n,{topoJson:r=!1}=n,{topoJsonObjectsName:o=""}=n,{projection:u}=n,{id:s}=n,{interactive:m=!1}=n,{visible:p=!1}=n,{geometryType:l="polygons"}=n,{activeViewID:a}=n,{activeEraID:c}=n,{activeStopID:g}=n;function d(y){console.log("Map(id: "+s+"):onChapterMouseOver(event:"+JSON.stringify(y.detail)+")"),i(10,D=y.detail.id)}function z(y){console.log("Map(id: "+s+"):onChapterMouseLeave(event:"+JSON.stringify(y.detail)+")"),i(10,D=null)}let S=[],M=null,D=null;const O=Pn();Nn(()=>{me(Rn+e).then(y=>{i(8,S=r?Xi(y,y.objects[o]).features:y.features),i(9,M=Re().projection(u))})});function I(y){console.log("Map:onFeatureMouseOver(feature:"+JSON.stringify(y)+")"),y.properties&&y.properties.chapter&&console.log("Map:onFeatureMouseOver(section:"+JSON.stringify(y.properties.chapter)+")"),O("featureMouseOver",{mapID:s,featureID:y.properties&&y.properties.chapter?y.properties.chapter:"?"})}function _(y){console.log("Map:onFeatureMouseOut(feature:"+JSON.stringify(y)+")"),y.properties&&y.properties.chapter&&console.log("Map:onFeatureMouseOut(id:"+JSON.stringify(y.properties.chapter)+")"),O("featureMouseOut",{mapID:s,featureID:y.properties&&y.properties.chapter?y.properties.chapter:"?"})}function k(y){console.log("Map:onFeatureClick(feature:"+JSON.stringify(y)+")"),O("featureClick",{mapID:s,featureID:y.properties&&y.properties.chapter?y.properties.chapter:"?"})}return t.$$set=y=>{"url"in y&&i(14,e=y.url),"topoJson"in y&&i(15,r=y.topoJson),"topoJsonObjectsName"in y&&i(16,o=y.topoJsonObjectsName),"projection"in y&&i(0,u=y.projection),"id"in y&&i(1,s=y.id),"interactive"in y&&i(2,m=y.interactive),"visible"in y&&i(3,p=y.visible),"geometryType"in y&&i(4,l=y.geometryType),"activeViewID"in y&&i(5,a=y.activeViewID),"activeEraID"in y&&i(6,c=y.activeEraID),"activeStopID"in y&&i(7,g=y.activeStopID)},[u,s,m,p,l,a,c,g,S,M,D,I,_,k,e,r,o,d,z]}class fr extends Tn{constructor(n){super(),Cn(this,n,Hi,Zi,On,{url:14,topoJson:15,topoJsonObjectsName:16,projection:0,id:1,interactive:2,visible:3,geometryType:4,activeViewID:5,activeEraID:6,activeStopID:7,onChapterMouseOver:17,onChapterMouseLeave:18})}get onChapterMouseOver(){return this.$$.ctx[17]}get onChapterMouseLeave(){return this.$$.ctx[18]}}function Wi(t){return t.k}function Ki(t){return[t.x,t.y]}function le(t){return function(){return t}}function Qi(){let t=0,n=0,i=960,e=500,r=!0,o=!0,u=256,s=Wi,m=Ki,p=0;function l(){const a=+s.apply(this,arguments),c=m.apply(this,arguments),g=Math.log2(a/u),d=Math.round(Math.max(g+p,0)),z=Math.pow(2,g-d)*u,S=+c[0]-a/2,M=+c[1]-a/2,D=Math.max(r?0:-1/0,Math.floor((t-S)/z)),O=Math.min(r?1<<d:1/0,Math.ceil((i-S)/z)),I=Math.max(o?0:-1/0,Math.floor((n-M)/z)),_=Math.min(o?1<<d:1/0,Math.ceil((e-M)/z)),k=[];for(let y=I;y<_;++y)for(let R=D;R<O;++R)k.push([R,y,d]);return k.translate=[S/z,M/z],k.scale=z,k}return l.size=function(a){return arguments.length?(t=n=0,i=+a[0],e=+a[1],l):[i-t,e-n]},l.extent=function(a){return arguments.length?(t=+a[0][0],n=+a[0][1],i=+a[1][0],e=+a[1][1],l):[[t,n],[i,e]]},l.scale=function(a){return arguments.length?(s=typeof a=="function"?a:le(+a),l):s},l.translate=function(a){return arguments.length?(m=typeof a=="function"?a:le([+a[0],+a[1]]),l):m},l.zoomDelta=function(a){return arguments.length?(p=+a,l):p},l.tileSize=function(a){return arguments.length?(u=+a,l):u},l.clamp=function(a){return arguments.length?(r=o=!!a,l):r&&o},l.clampX=function(a){return arguments.length?(r=!!a,l):r},l.clampY=function(a){return arguments.length?(o=!!a,l):o},l}function ae(t,n,i){const e=t.slice();e[11]=n[i];const r=$i(e[11],e[1]);return e[12]=r[0],e[13]=r[1],e}function se(t){let n;return{c(){n=Q("image"),this.h()},l(i){n=x(i,"image",{"xlink:href":!0,x:!0,y:!0,width:!0,height:!0,class:!0}),$(n).forEach(J),this.h()},h(){be(n,"xlink:href",t[3](...t[11])),w(n,"x",t[12]),w(n,"y",t[13]),w(n,"width",t[2]),w(n,"height",t[2]),w(n,"class","svelte-fuuzqb")},m(i,e){tt(i,n,e)},p:mt,d(i){i&&J(n)}}}function xi(t){let n,i=zt(t[1]),e=[];for(let r=0;r<i.length;r+=1)e[r]=se(ae(t,i,r));return{c(){n=Q("g");for(let r=0;r<e.length;r+=1)e[r].c();this.h()},l(r){n=x(r,"g",{class:!0});var o=$(n);for(let u=0;u<e.length;u+=1)e[u].l(o);o.forEach(J),this.h()},h(){w(n,"class","map-svg-g svelte-fuuzqb"),W(n,"visible",t[0])},m(r,o){tt(r,n,o);for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(n,null)},p(r,[o]){if(o&14){i=zt(r[1]);let u;for(u=0;u<i.length;u+=1){const s=ae(r,i,u);e[u]?e[u].p(s,o):(e[u]=se(s),e[u].c(),e[u].m(n,null))}for(;u<e.length;u+=1)e[u].d(1);e.length=i.length}o&1&&W(n,"visible",r[0])},i:mt,o:mt,d(r){r&&J(n),kn(e,r)}}}function $i(t,n){const[i,e]=t,{translate:[r,o],scale:u}=n;return[(i+r)*u,(e+o)*u]}function tr(t,n,i){let{urlPath:e}=n,{urlExtension:r}=n,{projection:o}=n,{visible:u=!1}=n;Pn(),Nn(()=>{});const m=Qi().size([2e3,1e3]).scale(o.scale()*2*Math.PI).translate(o([0,0]))(),{translate:[p,l],scale:a}=m,c=(g,d,z)=>`${Rn}${e}${z}/${g}/${d}.${r}`;return t.$$set=g=>{"urlPath"in g&&i(4,e=g.urlPath),"urlExtension"in g&&i(5,r=g.urlExtension),"projection"in g&&i(6,o=g.projection),"visible"in g&&i(0,u=g.visible)},[u,m,a,c,e,r,o]}class hr extends Tn{constructor(n){super(),Cn(this,n,tr,xi,On,{urlPath:4,urlExtension:5,projection:6,visible:0})}}function ce(t,n,i){const e=t.slice();return e[18]=n[i],e}function fe(t){let n,i=t[18].properties[t[8]]+"",e,r,o;function u(p,l){return p[2]?er:nr}let s=u(t),m=s(t);return{c(){n=Q("text"),e=Rt(i),m.c(),o=pt(),this.h()},l(p){n=x(p,"text",{class:!0,transform:!0,dy:!0});var l=$(n);e=Ft(l,i),l.forEach(J),m.l(p),o=pt(),this.h()},h(){w(n,"class","text-background svelte-ys1p4g"),w(n,"transform",r=`translate(${t[0](t[18].geometry.coordinates)})`),w(n,"dy",".35em")},m(p,l){tt(p,n,l),ft(n,e),m.m(p,l),tt(p,o,l)},p(p,l){l&768&&i!==(i=p[18].properties[p[8]]+"")&&Lt(e,i),l&513&&r!==(r=`translate(${p[0](p[18].geometry.coordinates)})`)&&w(n,"transform",r),s===(s=u(p))&&m?m.p(p,l):(m.d(1),m=s(p),m&&(m.c(),m.m(o.parentNode,o)))},d(p){p&&(J(n),J(o)),m.d(p)}}}function nr(t){let n,i=t[18].properties[t[8]]+"",e,r;return{c(){n=Q("text"),e=Rt(i),this.h()},l(o){n=x(o,"text",{transform:!0,dy:!0,class:!0});var u=$(n);e=Ft(u,i),u.forEach(J),this.h()},h(){w(n,"transform",r=`translate(${t[0](t[18].geometry.coordinates)})`),w(n,"dy",".35em"),w(n,"class","svelte-ys1p4g")},m(o,u){tt(o,n,u),ft(n,e)},p(o,u){u&768&&i!==(i=o[18].properties[o[8]]+"")&&Lt(e,i),u&513&&r!==(r=`translate(${o[0](o[18].geometry.coordinates)})`)&&w(n,"transform",r)},d(o){o&&J(n)}}}function er(t){let n,i=t[18].properties[t[8]]+"",e,r,o,u;return{c(){n=Q("text"),e=Rt(i),this.h()},l(s){n=x(s,"text",{transform:!0,dy:!0,class:!0});var m=$(n);e=Ft(m,i),m.forEach(J),this.h()},h(){w(n,"transform",r=`translate(${t[0](t[18].geometry.coordinates)})`),w(n,"dy",".35em"),w(n,"class","svelte-ys1p4g"),W(n,"hover",t[2]&&t[18].properties&&t[18].properties.chapter&&t[10]==t[18].properties.chapter)},m(s,m){tt(s,n,m),ft(n,e),o||(u=[Et(n,"mouseover",function(){wt(t[11](t[18]))&&t[11](t[18]).apply(this,arguments)}),Et(n,"mouseout",function(){wt(t[12](t[18]))&&t[12](t[18]).apply(this,arguments)}),Et(n,"click",function(){wt(t[13](t[18]))&&t[13](t[18]).apply(this,arguments)})],o=!0)},p(s,m){t=s,m&768&&i!==(i=t[18].properties[t[8]]+"")&&Lt(e,i),m&513&&r!==(r=`translate(${t[0](t[18].geometry.coordinates)})`)&&w(n,"transform",r),m&1540&&W(n,"hover",t[2]&&t[18].properties&&t[18].properties.chapter&&t[10]==t[18].properties.chapter)},d(s){s&&J(n),o=!1,ge(u)}}}function he(t){let n,i=t[18].geometry&&(!t[4]||t[18].properties.era==t[6])&&fe(t);return{c(){i&&i.c(),n=pt()},l(e){i&&i.l(e),n=pt()},m(e,r){i&&i.m(e,r),tt(e,n,r)},p(e,r){e[18].geometry&&(!e[4]||e[18].properties.era==e[6])?i?i.p(e,r):(i=fe(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(e){e&&J(n),i&&i.d(e)}}}function ir(t){let n,i,e=zt(t[9]),r=[];for(let o=0;o<e.length;o+=1)r[o]=he(ce(t,e,o));return{c(){n=Q("g");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){n=x(o,"g",{class:!0,id:!0});var u=$(n);for(let s=0;s<r.length;s+=1)r[s].l(u);u.forEach(J),this.h()},h(){w(n,"class",i=`map-svg-g view-${t[5]} era-${t[6]} stop-${t[7]} svelte-ys1p4g`),w(n,"id",t[1]),W(n,"visible",t[3]),W(n,"hidden",!t[3]),W(n,"interactive",t[2])},m(o,u){tt(o,n,u);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(n,null)},p(o,[u]){if(u&16213){e=zt(o[9]);let s;for(s=0;s<e.length;s+=1){const m=ce(o,e,s);r[s]?r[s].p(m,u):(r[s]=he(m),r[s].c(),r[s].m(n,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=e.length}u&224&&i!==(i=`map-svg-g view-${o[5]} era-${o[6]} stop-${o[7]} svelte-ys1p4g`)&&w(n,"class",i),u&2&&w(n,"id",o[1]),u&232&&W(n,"visible",o[3]),u&232&&W(n,"hidden",!o[3]),u&228&&W(n,"interactive",o[2])},i:mt,o:mt,d(o){o&&J(n),kn(r,o)}}}function rr(t,n,i){let{path:e}=n,{projection:r}=n,{id:o}=n,{interactive:u=!1}=n,{visible:s=!1}=n,{filterOnContext:m=!1}=n,{activeViewID:p}=n,{activeEraID:l}=n,{activeStopID:a}=n,{labelField:c="label"}=n;function g(_){console.log("Map(id: "+o+"):onChapterMouseOver(event:"+JSON.stringify(_.detail)+")"),i(10,S=_.detail.id)}function d(_){console.log("Map(id: "+o+"):onChapterMouseLeave(event:"+JSON.stringify(_.detail)+")"),i(10,S=null)}let z=[],S=null;const M=Pn();Nn(()=>{console.log(`Labels:onMount(id:${o})`),me(Rn+e).then(_=>{i(9,z=_.features),i(14,e=Re().projection(r))})});function D(_){console.log("Map:onFeatureMouseOver(feature:"+JSON.stringify(_)+")"),_.properties&&_.properties.chapter&&console.log("Map:onFeatureMouseOver(section:"+JSON.stringify(_.properties.chapter)+")"),M("featureMouseOver",{mapID:o,featureID:_.properties&&_.properties.chapter?_.properties.chapter:"?"})}function O(_){console.log("Map:onFeatureMouseOut(feature:"+JSON.stringify(_)+")"),_.properties&&_.properties.chapter&&console.log("Map:onFeatureMouseOut(id:"+JSON.stringify(_.properties.chapter)+")"),M("featureMouseOut",{mapID:o,featureID:_.properties&&_.properties.chapter?_.properties.chapter:"?"})}function I(_){console.log("Map:onFeatureClick(feature:"+JSON.stringify(_)+")"),M("featureClick",{mapID:o,featureID:_.properties&&_.properties.chapter?_.properties.chapter:"?"})}return t.$$set=_=>{"path"in _&&i(14,e=_.path),"projection"in _&&i(0,r=_.projection),"id"in _&&i(1,o=_.id),"interactive"in _&&i(2,u=_.interactive),"visible"in _&&i(3,s=_.visible),"filterOnContext"in _&&i(4,m=_.filterOnContext),"activeViewID"in _&&i(5,p=_.activeViewID),"activeEraID"in _&&i(6,l=_.activeEraID),"activeStopID"in _&&i(7,a=_.activeStopID),"labelField"in _&&i(8,c=_.labelField)},[r,o,u,s,m,p,l,a,c,z,S,D,O,I,e,g,d]}class pr extends Tn{constructor(n){super(),Cn(this,n,rr,ir,On,{path:14,projection:0,id:1,interactive:2,visible:3,filterOnContext:4,activeViewID:5,activeEraID:6,activeStopID:7,labelField:8,onChapterMouseOver:15,onChapterMouseLeave:16})}get onChapterMouseOver(){return this.$$.ctx[15]}get onChapterMouseLeave(){return this.$$.ctx[16]}}export{pr as L,fr as M,hr as T,Re as a,sr as g,cr as z};
