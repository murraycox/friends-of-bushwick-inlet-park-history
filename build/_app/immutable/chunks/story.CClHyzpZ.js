import{s as me,e as $,a as q,c as L,b as M,f as _,g as W,q as m,r as Bt,T as V,i as j,h as x,W as yt,n as Ht,C as hn,V as ye,t as ve,d as we,j as _e,R as J,S as Y,U as Le,y as Vn,z as Gn}from"./scheduler.BwjH7zTA.js";import{S as be,i as xe,c as et,b as nt,m as rt,t as it,a as at,d as ot}from"./index.BU9U6aD7.js";import{g as dn,b as vt}from"./entry.Bt7RQuqs.js";function St(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Pe(t){let e;return{c(){e=ve(t[1])},l(n){e=we(n,t[1])},m(n,r){j(n,e,r)},p(n,r){r&2&&_e(e,n[1])},d(n){n&&_(e)}}}function Re(t){let e,n,r;return{c(){e=$("div"),n=$("span"),r=ve(t[2]),this.h()},l(i){e=L(i,"DIV",{class:!0});var a=M(e);n=L(a,"SPAN",{class:!0});var o=M(n);r=we(o,t[2]),o.forEach(_),a.forEach(_),this.h()},h(){m(n,"class","svelte-1e4hxag"),m(e,"class","story-navigation-label svelte-1e4hxag")},m(i,a){j(i,e,a),x(e,n),x(n,r)},p(i,a){a&4&&_e(r,i[2])},d(i){i&&_(e)}}}function Xn(t){let e,n,r,i,a,o,s,l=t[1]&&Pe(t),u=t[2]&&Re(t);return{c(){e=$("a"),n=$("div"),r=$("div"),l&&l.c(),i=q(),u&&u.c(),this.h()},l(c){e=L(c,"A",{class:!0});var f=M(e);n=L(f,"DIV",{class:!0});var h=M(n);r=L(h,"DIV",{class:!0});var p=M(r);l&&l.l(p),p.forEach(_),i=W(h),u&&u.l(h),h.forEach(_),f.forEach(_),this.h()},h(){m(r,"class","story-navigation-button svelte-1e4hxag"),m(n,"class",a=Bt(`story-navigation-button-and-label era-${t[0]}`)+" svelte-1e4hxag"),V(n,"hover",t[4]),V(n,"active",t[3]),m(e,"class","svelte-1e4hxag")},m(c,f){j(c,e,f),x(e,n),x(n,r),l&&l.m(r,null),x(n,i),u&&u.m(n,null),o||(s=[yt(e,"click",t[10]),yt(e,"mouseleave",t[6])],o=!0)},p(c,[f]){c[1]?l?l.p(c,f):(l=Pe(c),l.c(),l.m(r,null)):l&&(l.d(1),l=null),c[2]?u?u.p(c,f):(u=Re(c),u.c(),u.m(n,null)):u&&(u.d(1),u=null),f&1&&a!==(a=Bt(`story-navigation-button-and-label era-${c[0]}`)+" svelte-1e4hxag")&&m(n,"class",a),f&17&&V(n,"hover",c[4]),f&9&&V(n,"active",c[3])},i:Ht,o:Ht,d(c){c&&_(e),l&&l.d(),u&&u.d(),o=!1,hn(s)}}}function Jn(t,e,n){let{navigateToMap:r=null}=e,{navigateToPage:i=null}=e,{viewID:a=null}=e,{eraID:o=null}=e,{buttonText:s=null}=e,{labelText:l=null}=e,{active:u=!1}=e,c=!1;const f=ye();function h(g){console.log("NavErasButton:onClick()"),console.log(`NavErasButton:onClick(e.pointerType: ${g.pointerType})`),!l||g.pointerType=="mouse"||g.pointerType!="mouse"&&c?(console.log(`NavErasButton:dispatch: navigate, viewID: ${a}, eraID: ${o}`),f("navigate",{viewID:a||o,eraID:o})):g.pointerType!="mouse"&&!c&&n(4,c=!0)}function p(){console.log("NavErasButton:onMouseLeave()"),n(4,c=!1)}const d=g=>h(g);return t.$$set=g=>{"navigateToMap"in g&&n(7,r=g.navigateToMap),"navigateToPage"in g&&n(8,i=g.navigateToPage),"viewID"in g&&n(9,a=g.viewID),"eraID"in g&&n(0,o=g.eraID),"buttonText"in g&&n(1,s=g.buttonText),"labelText"in g&&n(2,l=g.labelText),"active"in g&&n(3,u=g.active)},[o,s,l,u,c,h,p,r,i,a,d]}class st extends be{constructor(e){super(),xe(this,e,Jn,Xn,me,{navigateToMap:7,navigateToPage:8,viewID:9,eraID:0,buttonText:1,labelText:2,active:3})}}function Yn(t){let e,n,r,i,a,o,s,l,u,c,f,h,p;return n=new st({props:{viewID:"intro",buttonText:"Intro"}}),n.$on("navigate",t[1]),i=new st({props:{eraID:"pre-1600s",active:t[0]=="pre-1600s",labelText:"pre 1600s"}}),i.$on("navigate",t[1]),o=new st({props:{eraID:"early-european-settlement",active:t[0]=="early-european-settlement",labelText:"1620-1855"}}),o.$on("navigate",t[1]),l=new st({props:{eraID:"urban-industrial",active:t[0]=="urban-industrial",labelText:"1855-1950"}}),l.$on("navigate",t[1]),c=new st({props:{eraID:"migration",labelText:"1950-2005"}}),c.$on("navigate",t[1]),h=new st({props:{eraID:"activism-deindustrialization",labelText:"2005-Future"}}),h.$on("navigate",t[1]),{c(){e=$("div"),et(n.$$.fragment),r=q(),et(i.$$.fragment),a=q(),et(o.$$.fragment),s=q(),et(l.$$.fragment),u=q(),et(c.$$.fragment),f=q(),et(h.$$.fragment),this.h()},l(d){e=L(d,"DIV",{id:!0,class:!0});var g=M(e);nt(n.$$.fragment,g),r=W(g),nt(i.$$.fragment,g),a=W(g),nt(o.$$.fragment,g),s=W(g),nt(l.$$.fragment,g),u=W(g),nt(c.$$.fragment,g),f=W(g),nt(h.$$.fragment,g),g.forEach(_),this.h()},h(){m(e,"id","story-navigation"),m(e,"class","position-fixed svelte-2jdffa")},m(d,g){j(d,e,g),rt(n,e,null),x(e,r),rt(i,e,null),x(e,a),rt(o,e,null),x(e,s),rt(l,e,null),x(e,u),rt(c,e,null),x(e,f),rt(h,e,null),p=!0},p(d,[g]){const y={};g&1&&(y.active=d[0]=="pre-1600s"),i.$set(y);const b={};g&1&&(b.active=d[0]=="early-european-settlement"),o.$set(b);const N={};g&1&&(N.active=d[0]=="urban-industrial"),l.$set(N)},i(d){p||(it(n.$$.fragment,d),it(i.$$.fragment,d),it(o.$$.fragment,d),it(l.$$.fragment,d),it(c.$$.fragment,d),it(h.$$.fragment,d),p=!0)},o(d){at(n.$$.fragment,d),at(i.$$.fragment,d),at(o.$$.fragment,d),at(l.$$.fragment,d),at(c.$$.fragment,d),at(h.$$.fragment,d),p=!1},d(d){d&&_(e),ot(n),ot(i),ot(o),ot(l),ot(c),ot(h)}}}function Un(t,e,n){let{navigateWithinMap:r=!0}=e,{activeEraID:i=null}=e;function a(l){console.log(`NavEras:navigate(event:${JSON.stringify(l.detail)})`),l.detail.viewID,n(0,i=l.detail.eraID)}const o=ye();function s(l){console.log(`NavEras:onNavigate(event: ${JSON.stringify(l)}`),r?o("navigate",l.detail):dn(`${vt==""?"/":vt}`)}return t.$$set=l=>{"navigateWithinMap"in l&&n(2,r=l.navigateWithinMap),"activeEraID"in l&&n(0,i=l.activeEraID)},[i,s,r,a]}class is extends be{constructor(e){super(),xe(this,e,Un,Yn,me,{navigateWithinMap:2,activeEraID:0,navigate:3})}get navigate(){return this.$$.ctx[3]}}function Rt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Kn(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pn(t){let e,n,r;t.length!==2?(e=Rt,n=(s,l)=>Rt(t(s),l),r=(s,l)=>t(s)-l):(e=t===Rt||t===Kn?t:Zn,n=t,r=t);function i(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function a(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){const f=i(s,l,u,c-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:o,right:a}}function Zn(){return 0}function Qn(t){return t===null?NaN:+t}const jn=pn(Rt),tr=jn.right;pn(Qn).center;const er=Math.sqrt(50),nr=Math.sqrt(10),rr=Math.sqrt(2);function qt(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=er?10:a>=nr?5:a>=rr?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?qt(t,e,n*2):[s,l,u]}function ir(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?qt(e,t,n):qt(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)l[u]=(a-u)/-o;else for(let u=0;u<s;++u)l[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(i+u)/-o;else for(let u=0;u<s;++u)l[u]=(i+u)*o;return l}function ae(t,e,n){return e=+e,t=+t,n=+n,qt(t,e,n)[2]}function ar(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?ae(e,t,n):ae(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}var or={value:()=>{}};function gn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ft(n)}function Ft(t){this._=t}function sr(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ft.prototype=gn.prototype={constructor:Ft,on:function(t,e){var n=this._,r=sr(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=lr(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Fe(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Fe(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ft(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function lr(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Fe(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=or,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var oe="http://www.w3.org/1999/xhtml";const Oe={svg:"http://www.w3.org/2000/svg",xhtml:oe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qt(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Oe.hasOwnProperty(e)?{space:Oe[e],local:t}:t}function ur(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===oe&&e.documentElement.namespaceURI===oe?e.createElement(t):e.createElementNS(n,t)}}function cr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function mn(t){var e=Qt(t);return(e.local?cr:ur)(e)}function fr(){}function ke(t){return t==null?fr:function(){return this.querySelector(t)}}function hr(t){typeof t!="function"&&(t=ke(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=a[c])&&(u=t.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new I(r,this._parents)}function yn(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function dr(){return[]}function vn(t){return t==null?dr:function(){return this.querySelectorAll(t)}}function pr(t){return function(){return yn(t.apply(this,arguments))}}function gr(t){typeof t=="function"?t=pr(t):t=vn(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),i.push(l));return new I(r,i)}function wn(t){return function(){return this.matches(t)}}function _n(t){return function(e){return e.matches(t)}}var mr=Array.prototype.find;function yr(t){return function(){return mr.call(this.children,t)}}function vr(){return this.firstElementChild}function wr(t){return this.select(t==null?vr:yr(typeof t=="function"?t:_n(t)))}var _r=Array.prototype.filter;function br(){return Array.from(this.children)}function xr(t){return function(){return _r.call(this.children,t)}}function kr(t){return this.selectAll(t==null?br:xr(typeof t=="function"?t:_n(t)))}function Nr(t){typeof t!="function"&&(t=wn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new I(r,this._parents)}function bn(t){return new Array(t.length)}function Mr(){return new I(this._enter||this._groups.map(bn),this._parents)}function Wt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Wt.prototype={constructor:Wt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Er(t){return function(){return t}}function Ar(t,e,n,r,i,a){for(var o=0,s,l=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new Wt(t,a[o]);for(;o<l;++o)(s=e[o])&&(i[o]=s)}function Ir(t,e,n,r,i,a,o){var s,l,u=new Map,c=e.length,f=a.length,h=new Array(c),p;for(s=0;s<c;++s)(l=e[s])&&(h[s]=p=o.call(l,l.__data__,s,e)+"",u.has(p)?i[s]=l:u.set(p,l));for(s=0;s<f;++s)p=o.call(t,a[s],s,a)+"",(l=u.get(p))?(r[s]=l,l.__data__=a[s],u.delete(p)):n[s]=new Wt(t,a[s]);for(s=0;s<c;++s)(l=e[s])&&u.get(h[s])===l&&(i[s]=l)}function Tr(t){return t.__data__}function Sr(t,e){if(!arguments.length)return Array.from(this,Tr);var n=e?Ir:Ar,r=this._parents,i=this._groups;typeof t!="function"&&(t=Er(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=r[u],f=i[u],h=f.length,p=Dr(t.call(c,c&&c.__data__,u,r)),d=p.length,g=s[u]=new Array(d),y=o[u]=new Array(d),b=l[u]=new Array(h);n(c,f,g,y,b,p,e);for(var N=0,k=0,E,A;N<d;++N)if(E=g[N]){for(N>=k&&(k=N+1);!(A=y[k])&&++k<d;);E._next=A||null}}return o=new I(o,r),o._enter=s,o._exit=l,o}function Dr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Cr(){return new I(this._exit||this._groups.map(bn),this._parents)}function $r(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Lr(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var u=n[l],c=r[l],f=u.length,h=s[l]=new Array(f),p,d=0;d<f;++d)(p=u[d]||c[d])&&(h[d]=p);for(;l<i;++l)s[l]=n[l];return new I(s,this._parents)}function Pr(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Rr(t){t||(t=Fr);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),u,c=0;c<s;++c)(u=o[c])&&(l[c]=u);l.sort(e)}return new I(i,this._parents).order()}function Fr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Or(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function zr(){return Array.from(this)}function Br(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Hr(){let t=0;for(const e of this)++t;return t}function qr(){return!this.node()}function Wr(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function Vr(t){return function(){this.removeAttribute(t)}}function Gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xr(t,e){return function(){this.setAttribute(t,e)}}function Jr(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Yr(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ur(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Kr(t,e){var n=Qt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Gr:Vr:typeof e=="function"?n.local?Ur:Yr:n.local?Jr:Xr)(n,e))}function xn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Zr(t){return function(){this.style.removeProperty(t)}}function Qr(t,e,n){return function(){this.style.setProperty(t,e,n)}}function jr(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ti(t,e,n){return arguments.length>1?this.each((e==null?Zr:typeof e=="function"?jr:Qr)(t,e,n??"")):ft(this.node(),t)}function ft(t,e){return t.style.getPropertyValue(e)||xn(t).getComputedStyle(t,null).getPropertyValue(e)}function ei(t){return function(){delete this[t]}}function ni(t,e){return function(){this[t]=e}}function ri(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ii(t,e){return arguments.length>1?this.each((e==null?ei:typeof e=="function"?ri:ni)(t,e)):this.node()[t]}function kn(t){return t.trim().split(/^|\s+/)}function Ne(t){return t.classList||new Nn(t)}function Nn(t){this._node=t,this._names=kn(t.getAttribute("class")||"")}Nn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Mn(t,e){for(var n=Ne(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function En(t,e){for(var n=Ne(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ai(t){return function(){Mn(this,t)}}function oi(t){return function(){En(this,t)}}function si(t,e){return function(){(e.apply(this,arguments)?Mn:En)(this,t)}}function li(t,e){var n=kn(t+"");if(arguments.length<2){for(var r=Ne(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?si:e?ai:oi)(n,e))}function ui(){this.textContent=""}function ci(t){return function(){this.textContent=t}}function fi(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function hi(t){return arguments.length?this.each(t==null?ui:(typeof t=="function"?fi:ci)(t)):this.node().textContent}function di(){this.innerHTML=""}function pi(t){return function(){this.innerHTML=t}}function gi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function mi(t){return arguments.length?this.each(t==null?di:(typeof t=="function"?gi:pi)(t)):this.node().innerHTML}function yi(){this.nextSibling&&this.parentNode.appendChild(this)}function vi(){return this.each(yi)}function wi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _i(){return this.each(wi)}function bi(t){var e=typeof t=="function"?t:mn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function xi(){return null}function ki(t,e){var n=typeof t=="function"?t:mn(t),r=e==null?xi:typeof e=="function"?e:ke(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ni(){var t=this.parentNode;t&&t.removeChild(this)}function Mi(){return this.each(Ni)}function Ei(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ai(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ii(t){return this.select(t?Ai:Ei)}function Ti(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Si(t){return function(e){t.call(this,e,this.__data__)}}function Di(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ci(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function $i(t,e,n){return function(){var r=this.__on,i,a=Si(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Li(t,e,n){var r=Di(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(s=e?$i:Ci,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function An(t,e,n){var r=xn(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Pi(t,e){return function(){return An(this,t,e)}}function Ri(t,e){return function(){return An(this,t,e.apply(this,arguments))}}function Fi(t,e){return this.each((typeof e=="function"?Ri:Pi)(t,e))}function*Oi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Me=[null];function I(t,e){this._groups=t,this._parents=e}function Nt(){return new I([[document.documentElement]],Me)}function zi(){return this}I.prototype=Nt.prototype={constructor:I,select:hr,selectAll:gr,selectChild:wr,selectChildren:kr,filter:Nr,data:Sr,enter:Mr,exit:Cr,join:$r,merge:Lr,selection:zi,order:Pr,sort:Rr,call:Or,nodes:zr,node:Br,size:Hr,empty:qr,each:Wr,attr:Kr,style:ti,property:ii,classed:li,text:hi,html:mi,raise:vi,lower:_i,append:bi,insert:ki,remove:Mi,clone:Ii,datum:Ti,on:Li,dispatch:Fi,[Symbol.iterator]:Oi};function Bi(t){return typeof t=="string"?new I([[document.querySelector(t)]],[document.documentElement]):new I([[t]],Me)}function ze(t){return typeof t=="string"?new I([document.querySelectorAll(t)],[document.documentElement]):new I([yn(t)],Me)}function Ee(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function In(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Mt(){}var bt=.7,Vt=1/bt,ct="\\s*([+-]?\\d+)\\s*",xt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",R="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hi=/^#([0-9a-f]{3,8})$/,qi=new RegExp(`^rgb\\(${ct},${ct},${ct}\\)$`),Wi=new RegExp(`^rgb\\(${R},${R},${R}\\)$`),Vi=new RegExp(`^rgba\\(${ct},${ct},${ct},${xt}\\)$`),Gi=new RegExp(`^rgba\\(${R},${R},${R},${xt}\\)$`),Xi=new RegExp(`^hsl\\(${xt},${R},${R}\\)$`),Ji=new RegExp(`^hsla\\(${xt},${R},${R},${xt}\\)$`),Be={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ee(Mt,Z,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:He,formatHex:He,formatHex8:Yi,formatHsl:Ui,formatRgb:qe,toString:qe});function He(){return this.rgb().formatHex()}function Yi(){return this.rgb().formatHex8()}function Ui(){return Tn(this).formatHsl()}function qe(){return this.rgb().formatRgb()}function Z(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Hi.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?We(e):n===3?new T(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Dt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Dt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qi.exec(t))?new T(e[1],e[2],e[3],1):(e=Wi.exec(t))?new T(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Vi.exec(t))?Dt(e[1],e[2],e[3],e[4]):(e=Gi.exec(t))?Dt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Xi.exec(t))?Xe(e[1],e[2]/100,e[3]/100,1):(e=Ji.exec(t))?Xe(e[1],e[2]/100,e[3]/100,e[4]):Be.hasOwnProperty(t)?We(Be[t]):t==="transparent"?new T(NaN,NaN,NaN,0):null}function We(t){return new T(t>>16&255,t>>8&255,t&255,1)}function Dt(t,e,n,r){return r<=0&&(t=e=n=NaN),new T(t,e,n,r)}function Ki(t){return t instanceof Mt||(t=Z(t)),t?(t=t.rgb(),new T(t.r,t.g,t.b,t.opacity)):new T}function se(t,e,n,r){return arguments.length===1?Ki(t):new T(t,e,n,r??1)}function T(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ee(T,se,In(Mt,{brighter(t){return t=t==null?Vt:Math.pow(Vt,t),new T(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?bt:Math.pow(bt,t),new T(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new T(K(this.r),K(this.g),K(this.b),Gt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ve,formatHex:Ve,formatHex8:Zi,formatRgb:Ge,toString:Ge}));function Ve(){return`#${U(this.r)}${U(this.g)}${U(this.b)}`}function Zi(){return`#${U(this.r)}${U(this.g)}${U(this.b)}${U((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ge(){const t=Gt(this.opacity);return`${t===1?"rgb(":"rgba("}${K(this.r)}, ${K(this.g)}, ${K(this.b)}${t===1?")":`, ${t})`}`}function Gt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function K(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function U(t){return t=K(t),(t<16?"0":"")+t.toString(16)}function Xe(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new C(t,e,n,r)}function Tn(t){if(t instanceof C)return new C(t.h,t.s,t.l,t.opacity);if(t instanceof Mt||(t=Z(t)),!t)return new C;if(t instanceof C)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new C(o,s,l,t.opacity)}function Qi(t,e,n,r){return arguments.length===1?Tn(t):new C(t,e,n,r??1)}function C(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ee(C,Qi,In(Mt,{brighter(t){return t=t==null?Vt:Math.pow(Vt,t),new C(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bt:Math.pow(bt,t),new C(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new T(re(t>=240?t-240:t+120,i,r),re(t,i,r),re(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new C(Je(this.h),Ct(this.s),Ct(this.l),Gt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Gt(this.opacity);return`${t===1?"hsl(":"hsla("}${Je(this.h)}, ${Ct(this.s)*100}%, ${Ct(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Je(t){return t=(t||0)%360,t<0?t+360:t}function Ct(t){return Math.max(0,Math.min(1,t||0))}function re(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ae=t=>()=>t;function ji(t,e){return function(n){return t+n*e}}function ta(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ea(t){return(t=+t)==1?Sn:function(e,n){return n-e?ta(e,n,t):Ae(isNaN(e)?n:e)}}function Sn(t,e){var n=e-t;return n?ji(t,n):Ae(isNaN(t)?e:t)}const Xt=function t(e){var n=ea(e);function r(i,a){var o=n((i=se(i)).r,(a=se(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=Sn(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function na(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function ra(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ia(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Ie(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function aa(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function D(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function oa(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ie(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var le=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ie=new RegExp(le.source,"g");function sa(t){return function(){return t}}function la(t){return function(e){return t(e)+""}}function Dn(t,e){var n=le.lastIndex=ie.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(r=le.exec(t))&&(i=ie.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:D(r,i)})),n=ie.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?la(l[0].x):sa(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function Ie(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ae(e):(n==="number"?D:n==="string"?(r=Z(e))?(e=r,Xt):Dn:e instanceof Z?Xt:e instanceof Date?aa:ra(e)?na:Array.isArray(e)?ia:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?oa:D)(t,e)}function ua(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ye=180/Math.PI,ue={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cn(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Ye,skewX:Math.atan(l)*Ye,scaleX:o,scaleY:s}}var $t;function ca(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ue:Cn(e.a,e.b,e.c,e.d,e.e,e.f)}function fa(t){return t==null||($t||($t=document.createElementNS("http://www.w3.org/2000/svg","g")),$t.setAttribute("transform",t),!(t=$t.transform.baseVal.consolidate()))?ue:(t=t.matrix,Cn(t.a,t.b,t.c,t.d,t.e,t.f))}function $n(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,c,f,h,p,d){if(u!==f||c!==h){var g=p.push("translate(",null,e,null,n);d.push({i:g-4,x:D(u,f)},{i:g-2,x:D(c,h)})}else(f||h)&&p.push("translate("+f+e+h+n)}function o(u,c,f,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:D(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function s(u,c,f,h){u!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:D(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,h,p,d){if(u!==f||c!==h){var g=p.push(i(p)+"scale(",null,",",null,")");d.push({i:g-4,x:D(u,f)},{i:g-2,x:D(c,h)})}else(f!==1||h!==1)&&p.push(i(p)+"scale("+f+","+h+")")}return function(u,c){var f=[],h=[];return u=t(u),c=t(c),a(u.translateX,u.translateY,c.translateX,c.translateY,f,h),o(u.rotate,c.rotate,f,h),s(u.skewX,c.skewX,f,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,h),u=c=null,function(p){for(var d=-1,g=h.length,y;++d<g;)f[(y=h[d]).i]=y.x(p);return f.join("")}}}var ha=$n(ca,"px, ","px)","deg)"),da=$n(fa,", ",")",")"),ht=0,gt=0,pt=0,Ln=1e3,Jt,mt,Yt=0,Q=0,jt=0,kt=typeof performance=="object"&&performance.now?performance:Date,Pn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Te(){return Q||(Pn(pa),Q=kt.now()+jt)}function pa(){Q=0}function Ut(){this._call=this._time=this._next=null}Ut.prototype=Rn.prototype={constructor:Ut,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Te():+n)+(e==null?0:+e),!this._next&&mt!==this&&(mt?mt._next=this:Jt=this,mt=this),this._call=t,this._time=n,ce()},stop:function(){this._call&&(this._call=null,this._time=1/0,ce())}};function Rn(t,e,n){var r=new Ut;return r.restart(t,e,n),r}function ga(){Te(),++ht;for(var t=Jt,e;t;)(e=Q-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ht}function Ue(){Q=(Yt=kt.now())+jt,ht=gt=0;try{ga()}finally{ht=0,ya(),Q=0}}function ma(){var t=kt.now(),e=t-Yt;e>Ln&&(jt-=e,Yt=t)}function ya(){for(var t,e=Jt,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Jt=n);mt=t,ce(r)}function ce(t){if(!ht){gt&&(gt=clearTimeout(gt));var e=t-Q;e>24?(t<1/0&&(gt=setTimeout(Ue,t-kt.now()-jt)),pt&&(pt=clearInterval(pt))):(pt||(Yt=kt.now(),pt=setInterval(ma,Ln)),ht=1,Pn(Ue))}}function fe(t,e,n){var r=new Ut;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var va=gn("start","end","cancel","interrupt"),wa=[],Fn=0,Ke=1,he=2,Ot=3,Ze=4,de=5,zt=6;function te(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;_a(t,n,{name:e,index:r,group:i,on:va,tween:wa,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Fn})}function Se(t,e){var n=P(t,e);if(n.state>Fn)throw new Error("too late; already scheduled");return n}function F(t,e){var n=P(t,e);if(n.state>Ot)throw new Error("too late; already running");return n}function P(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function _a(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Rn(a,0,n.time);function a(u){n.state=Ke,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,f,h,p;if(n.state!==Ke)return l();for(c in r)if(p=r[c],p.name===n.name){if(p.state===Ot)return fe(o);p.state===Ze?(p.state=zt,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[c]):+c<e&&(p.state=zt,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[c])}if(fe(function(){n.state===Ot&&(n.state=Ze,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=he,n.on.call("start",t,t.__data__,n.index,n.group),n.state===he){for(n.state=Ot,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(p=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=de,1),f=-1,h=i.length;++f<h;)i[f].call(t,c);n.state===de&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=zt,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function ba(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>he&&r.state<de,r.state=zt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function xa(t){return this.each(function(){ba(this,t)})}function ka(t,e){var n,r;return function(){var i=F(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Na(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=F(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function Ma(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=P(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?ka:Na)(n,t,e))}function De(t,e,n){var r=t._id;return t.each(function(){var i=F(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return P(i,r).value[e]}}function On(t,e){var n;return(typeof e=="number"?D:e instanceof Z?Xt:(n=Z(e))?(e=n,Xt):Dn)(t,e)}function Ea(t){return function(){this.removeAttribute(t)}}function Aa(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ia(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function Ta(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function Sa(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function Da(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function Ca(t,e){var n=Qt(t),r=n==="transform"?da:On;return this.attrTween(t,typeof e=="function"?(n.local?Da:Sa)(n,r,De(this,"attr."+t,e)):e==null?(n.local?Aa:Ea)(n):(n.local?Ta:Ia)(n,r,e))}function $a(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function La(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Pa(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&La(t,a)),n}return i._value=e,i}function Ra(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&$a(t,a)),n}return i._value=e,i}function Fa(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Qt(t);return this.tween(n,(r.local?Pa:Ra)(r,e))}function Oa(t,e){return function(){Se(this,t).delay=+e.apply(this,arguments)}}function za(t,e){return e=+e,function(){Se(this,t).delay=e}}function Ba(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Oa:za)(e,t)):P(this.node(),e).delay}function Ha(t,e){return function(){F(this,t).duration=+e.apply(this,arguments)}}function qa(t,e){return e=+e,function(){F(this,t).duration=e}}function Wa(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ha:qa)(e,t)):P(this.node(),e).duration}function Va(t,e){if(typeof e!="function")throw new Error;return function(){F(this,t).ease=e}}function Ga(t){var e=this._id;return arguments.length?this.each(Va(e,t)):P(this.node(),e).ease}function Xa(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;F(this,t).ease=n}}function Ja(t){if(typeof t!="function")throw new Error;return this.each(Xa(this._id,t))}function Ya(t){typeof t!="function"&&(t=wn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new B(r,this._parents,this._name,this._id)}function Ua(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=e[s],u=n[s],c=l.length,f=o[s]=new Array(c),h,p=0;p<c;++p)(h=l[p]||u[p])&&(f[p]=h);for(;s<r;++s)o[s]=e[s];return new B(o,this._parents,this._name,this._id)}function Ka(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Za(t,e,n){var r,i,a=Ka(e)?Se:F;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function Qa(t,e){var n=this._id;return arguments.length<2?P(this.node(),n).on.on(t):this.each(Za(n,t,e))}function ja(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function to(){return this.on("end.remove",ja(this._id))}function eo(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ke(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,u=a[o]=new Array(l),c,f,h=0;h<l;++h)(c=s[h])&&(f=t.call(c,c.__data__,h,s))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f,te(u[h],e,n,h,u,P(c,n)));return new B(a,this._parents,e,n)}function no(t){var e=this._name,n=this._id;typeof t!="function"&&(t=vn(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var h=t.call(c,c.__data__,f,l),p,d=P(c,n),g=0,y=h.length;g<y;++g)(p=h[g])&&te(p,e,n,g,h,d);a.push(h),o.push(c)}return new B(a,o,e,n)}var ro=Nt.prototype.constructor;function io(){return new ro(this._groups,this._parents)}function ao(t,e){var n,r,i;return function(){var a=ft(this,t),o=(this.style.removeProperty(t),ft(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function zn(t){return function(){this.style.removeProperty(t)}}function oo(t,e,n){var r,i=n+"",a;return function(){var o=ft(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function so(t,e,n){var r,i,a;return function(){var o=ft(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),ft(this,t))),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}function lo(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var l=F(this,t),u=l.on,c=l.value[a]==null?s||(s=zn(e)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),l.on=r}}function uo(t,e,n){var r=(t+="")=="transform"?ha:On;return e==null?this.styleTween(t,ao(t,r)).on("end.style."+t,zn(t)):typeof e=="function"?this.styleTween(t,so(t,r,De(this,"style."+t,e))).each(lo(this._id,t)):this.styleTween(t,oo(t,r,e),n).on("end.style."+t,null)}function co(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function fo(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&co(t,o,n)),r}return a._value=e,a}function ho(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,fo(t,e,n??""))}function po(t){return function(){this.textContent=t}}function go(t){return function(){var e=t(this);this.textContent=e??""}}function mo(t){return this.tween("text",typeof t=="function"?go(De(this,"text",t)):po(t==null?"":t+""))}function yo(t){return function(e){this.textContent=t.call(this,e)}}function vo(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&yo(i)),e}return r._value=t,r}function wo(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,vo(t))}function _o(){for(var t=this._name,e=this._id,n=Bn(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var c=P(l,e);te(l,t,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new B(r,this._parents,t,n)}function bo(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var u=F(this,r),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e}),i===0&&a()})}var xo=0;function B(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Bn(){return++xo}var z=Nt.prototype;B.prototype={constructor:B,select:eo,selectAll:no,selectChild:z.selectChild,selectChildren:z.selectChildren,filter:Ya,merge:Ua,selection:io,transition:_o,call:z.call,nodes:z.nodes,node:z.node,size:z.size,empty:z.empty,each:z.each,on:Qa,attr:Ca,attrTween:Fa,style:uo,styleTween:ho,text:mo,textTween:wo,remove:to,tween:Ma,delay:Ba,duration:Wa,ease:Ga,easeVarying:Ja,end:bo,[Symbol.iterator]:z[Symbol.iterator]};function as(t){return--t*t*t+1}function ko(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var No={time:null,delay:0,duration:250,ease:ko};function Mo(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Eo(t){var e,n;t instanceof B?(e=t._id,t=t._name):(e=Bn(),(n=No).time=Te(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&te(l,t,e,u,o,n||Mo(l,e));return new B(r,this._parents,t,e)}Nt.prototype.interrupt=xa;Nt.prototype.transition=Eo;function Ao(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Kt(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function dt(t){return t=Kt(Math.abs(t)),t?t[1]:NaN}function Io(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function To(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var So=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zt(t){if(!(e=So.exec(t)))throw new Error("invalid format: "+t);var e;return new Ce({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Zt.prototype=Ce.prototype;function Ce(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ce.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Do(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Hn;function Co(t,e){var n=Kt(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Hn=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Kt(t,Math.max(0,e+a-1))[0]}function Qe(t,e){var n=Kt(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const je={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ao,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Qe(t*100,e),r:Qe,s:Co,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function tn(t){return t}var en=Array.prototype.map,nn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function $o(t){var e=t.grouping===void 0||t.thousands===void 0?tn:Io(en.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?tn:To(en.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=Zt(f);var h=f.fill,p=f.align,d=f.sign,g=f.symbol,y=f.zero,b=f.width,N=f.comma,k=f.precision,E=f.trim,A=f.type;A==="n"?(N=!0,A="g"):je[A]||(k===void 0&&(k=12),E=!0,A="g"),(y||h==="0"&&p==="=")&&(y=!0,h="0",p="=");var ee=g==="$"?n:g==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",ne=g==="$"?r:/[%p]/.test(A)?o:"",Et=je[A],v=/[defgprs%]/.test(A);k=k===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function H(w){var G=ee,S=ne,tt,$e,At;if(A==="c")S=Et(w)+S,w="";else{w=+w;var It=w<0||1/w<0;if(w=isNaN(w)?l:Et(Math.abs(w),k),E&&(w=Do(w)),It&&+w==0&&d!=="+"&&(It=!1),G=(It?d==="("?d:s:d==="-"||d==="("?"":d)+G,S=(A==="s"?nn[8+Hn/3]:"")+S+(It&&d==="("?")":""),v){for(tt=-1,$e=w.length;++tt<$e;)if(At=w.charCodeAt(tt),48>At||At>57){S=(At===46?i+w.slice(tt+1):w.slice(tt))+S,w=w.slice(0,tt);break}}}N&&!y&&(w=e(w,1/0));var Tt=G.length+w.length+S.length,O=Tt<b?new Array(b-Tt+1).join(h):"";switch(N&&y&&(w=e(O+w,O.length?b-S.length:1/0),O=""),p){case"<":w=G+w+S+O;break;case"=":w=G+O+w+S;break;case"^":w=O.slice(0,Tt=O.length>>1)+G+w+S+O.slice(Tt);break;default:w=O+G+w+S;break}return a(w)}return H.toString=function(){return f+""},H}function c(f,h){var p=u((f=Zt(f),f.type="f",f)),d=Math.max(-8,Math.min(8,Math.floor(dt(h)/3)))*3,g=Math.pow(10,-d),y=nn[8+d/3];return function(b){return p(g*b)+y}}return{format:u,formatPrefix:c}}var Lt,qn,Wn;Lo({thousands:",",grouping:[3],currency:["$",""]});function Lo(t){return Lt=$o(t),qn=Lt.format,Wn=Lt.formatPrefix,Lt}function Po(t){return Math.max(0,-dt(Math.abs(t)))}function Ro(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(dt(e)/3)))*3-dt(Math.abs(t)))}function Fo(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,dt(e)-dt(t))+1}function Oo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function zo(t){return function(){return t}}function Bo(t){return+t}var rn=[0,1];function lt(t){return t}function pe(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:zo(isNaN(e)?NaN:.5)}function Ho(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function qo(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=pe(i,r),a=n(o,a)):(r=pe(r,i),a=n(a,o)),function(s){return a(r(s))}}function Wo(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=pe(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=tr(t,s,1,r)-1;return a[l](i[l](s))}}function Vo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Go(){var t=rn,e=rn,n=Ie,r,i,a,o=lt,s,l,u;function c(){var h=Math.min(t.length,e.length);return o!==lt&&(o=Ho(t[0],t[h-1])),s=h>2?Wo:qo,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=s(t.map(r),e,n)))(r(o(h)))}return f.invert=function(h){return o(i((u||(u=s(e,t.map(r),D)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Bo),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=ua,c()},f.clamp=function(h){return arguments.length?(o=h?!0:lt,c()):o!==lt},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,p){return r=h,i=p,c()}}function Xo(){return Go()(lt,lt)}function Jo(t,e,n,r){var i=ar(t,e,n),a;switch(r=Zt(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Ro(i,o))&&(r.precision=a),Wn(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Fo(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Po(i))&&(r.precision=a-(r.type==="%")*2);break}}return qn(r)}function Yo(t){var e=t.domain;return t.ticks=function(n){var r=e();return ir(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Jo(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,c=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);c-- >0;){if(u=ae(o,s,n),u===l)return r[i]=o,r[a]=s,e(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function ge(){var t=Xo();return t.copy=function(){return Vo(t,ge())},Oo.apply(t,arguments),Yo(t)}function ut(t,e,n){this.k=t,this.x=e,this.y=n}ut.prototype={constructor:ut,scale:function(t){return t===1?this:new ut(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ut(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var os=new ut(1,0,0);ut.prototype;new TextEncoder;function an(t,e,n){const r=t.slice();return r[22]=e[n],r[24]=n,r}function on(t,e,n){const r=t.slice();return r[22]=e[n],r[24]=n,r}function sn(t){let e,n,r=t[22].name+"",i,a,o,s,l;return{c(){e=$("div"),n=$("div"),i=ve(r),a=q(),this.h()},l(u){e=L(u,"DIV",{id:!0,class:!0,style:!0});var c=M(e);n=L(c,"DIV",{class:!0});var f=M(n);i=we(f,r),f.forEach(_),a=W(c),c.forEach(_),this.h()},h(){m(n,"class","story-controller-timeline-era-title svelte-19wp3kf"),m(e,"id",o="title-"+t[22].id),m(e,"class",s=`timeline-title-container era-${t[22].type=="era"?t[22].id:t[22].eraID} svelte-19wp3kf`),m(e,"style",l=`left:${t[3](t[24])-fn/2}px`)},m(u,c){j(u,e,c),x(e,n),x(n,i),x(e,a)},p(u,c){c&4&&r!==(r=u[22].name+"")&&_e(i,r),c&4&&o!==(o="title-"+u[22].id)&&m(e,"id",o),c&4&&s!==(s=`timeline-title-container era-${u[22].type=="era"?u[22].id:u[22].eraID} svelte-19wp3kf`)&&m(e,"class",s),c&8&&l!==(l=`left:${u[3](u[24])-fn/2}px`)&&m(e,"style",l)},d(u){u&&_(e)}}}function ln(t){let e,n,r,i,a,o,s,l,u;function c(){return t[15](t[22])}function f(){return t[16](t[22])}function h(){return t[17](t[22])}return{c(){e=J("g"),n=J("circle"),a=J("line"),this.h()},l(p){e=Y(p,"g",{class:!0,transform:!0});var d=M(e);n=Y(d,"circle",{cx:!0,cy:!0,r:!0,class:!0,"stroke-width":!0,stroke:!0}),M(n).forEach(_),a=Y(d,"line",{class:!0,id:!0,x1:!0,y1:!0,x2:!0,y2:!0,"stroke-width":!0,stroke:!0}),M(a).forEach(_),d.forEach(_),this.h()},h(){m(n,"cx","0"),m(n,"cy",Pt),m(n,"r",r=t[22].type=="era"?cn:un),m(n,"class",i=Bt(`era-${t[22].type=="era"?t[22].id:t[22].eraID}`)+" svelte-19wp3kf"),m(n,"stroke-width","1"),m(n,"stroke","grey"),V(n,"era",t[22].type=="era"),V(n,"chapter",t[22].type=="chapter"),m(a,"class","timeline-node-anchors svelte-19wp3kf"),m(a,"id",o=`anchor-${t[22].id}`),m(a,"x1","0"),m(a,"y1","0"),m(a,"x2","0"),m(a,"y2",Pt),m(a,"stroke-width","1"),m(a,"stroke","grey"),m(e,"class","timeline-era-and-chapter-group svelte-19wp3kf"),m(e,"transform",s=`translate(${t[3](t[24])},${wt+X/2-Pt})`)},m(p,d){j(p,e,d),x(e,n),x(e,a),l||(u=[yt(n,"mouseover",c),yt(n,"mouseleave",f),yt(n,"click",h)],l=!0)},p(p,d){t=p,d&4&&r!==(r=t[22].type=="era"?cn:un)&&m(n,"r",r),d&4&&i!==(i=Bt(`era-${t[22].type=="era"?t[22].id:t[22].eraID}`)+" svelte-19wp3kf")&&m(n,"class",i),d&4&&V(n,"era",t[22].type=="era"),d&4&&V(n,"chapter",t[22].type=="chapter"),d&4&&o!==(o=`anchor-${t[22].id}`)&&m(a,"id",o),d&8&&s!==(s=`translate(${t[3](t[24])},${wt+X/2-Pt})`)&&m(e,"transform",s)},d(p){p&&_(e),l=!1,hn(u)}}}function Uo(t){let e,n,r,i,a,o,s,l,u,c=St(t[2]),f=[];for(let d=0;d<c.length;d+=1)f[d]=sn(on(t,c,d));let h=St(t[2]),p=[];for(let d=0;d<h.length;d+=1)p[d]=ln(an(t,h,d));return{c(){e=$("div"),n=$("div");for(let d=0;d<f.length;d+=1)f[d].c();r=q(),i=$("div"),a=J("svg"),o=J("g"),s=J("rect"),l=J("line");for(let d=0;d<p.length;d+=1)p[d].c();this.h()},l(d){e=L(d,"DIV",{id:!0,class:!0});var g=M(e);n=L(g,"DIV",{id:!0,class:!0});var y=M(n);for(let E=0;E<f.length;E+=1)f[E].l(y);y.forEach(_),r=W(g),i=L(g,"DIV",{id:!0,class:!0});var b=M(i);a=Y(b,"svg",{width:!0,height:!0,class:!0});var N=M(a);o=Y(N,"g",{class:!0});var k=M(o);s=Y(k,"rect",{class:!0,x:!0,y:!0,height:!0,width:!0,rx:!0,ry:!0}),M(s).forEach(_),l=Y(k,"line",{x1:!0,y1:!0,y2:!0,x2:!0,"stroke-width":!0,stroke:!0,class:!0}),M(l).forEach(_);for(let E=0;E<p.length;E+=1)p[E].l(k);k.forEach(_),N.forEach(_),b.forEach(_),g.forEach(_),this.h()},h(){m(n,"id","timeline-titles"),m(n,"class","svelte-19wp3kf"),m(s,"class","timeline-background svelte-19wp3kf"),m(s,"x","0"),m(s,"y",wt),m(s,"height",X),m(s,"width",t[1]),m(s,"rx",X/2),m(s,"ry",X/2),m(l,"x1",_t),m(l,"y1",wt+X/2),m(l,"y2",wt+X/2),m(l,"x2",u=t[1]-_t),m(l,"stroke-width","1"),m(l,"stroke","grey"),m(l,"class","svelte-19wp3kf"),m(o,"class","svelte-19wp3kf"),m(a,"width","100%"),m(a,"height","100%"),m(a,"class","svelte-19wp3kf"),m(i,"id","timeline"),m(i,"class","svelte-19wp3kf"),m(e,"id","timeline-container"),m(e,"class","position-fixed svelte-19wp3kf")},m(d,g){j(d,e,g),x(e,n);for(let y=0;y<f.length;y+=1)f[y]&&f[y].m(n,null);x(e,r),x(e,i),x(i,a),x(a,o),x(o,s),x(o,l);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(o,null);t[18](o)},p(d,[g]){if(g&12){c=St(d[2]);let y;for(y=0;y<c.length;y+=1){const b=on(d,c,y);f[y]?f[y].p(b,g):(f[y]=sn(b),f[y].c(),f[y].m(n,null))}for(;y<f.length;y+=1)f[y].d(1);f.length=c.length}if(g&2&&m(s,"width",d[1]),g&2&&u!==(u=d[1]-_t)&&m(l,"x2",u),g&252){h=St(d[2]);let y;for(y=0;y<h.length;y+=1){const b=an(d,h,y);p[y]?p[y].p(b,g):(p[y]=ln(b),p[y].c(),p[y].m(o,null))}for(;y<p.length;y+=1)p[y].d(1);p.length=h.length}},i:Ht,o:Ht,d(d){d&&_(e),Le(f,d),Le(p,d),t[18](null)}}}const X=45,wt=85,Pt=20,un=4,cn=6,_t=25,fn=80;function Ko(t,e,n){let{eras:r}=e,{navigateWithinMap:i=!0}=e,{activeEraID:a=null}=e;function o(v){console.log("NavTimeline:onMapFeatureMouseOver(event:"+JSON.stringify(v.detail)+")"),y(v.detail.featureID)}function s(v){console.log("NavTimeline:onMapFeatureMouseOut(event:"+JSON.stringify(v.detail)+")"),b(v.detail.featureID)}function l(v){console.log("NavTimeline:onMapFeatureClick(event:"+JSON.stringify(v.detail)+")"),N(v.detail.featureID)}function u(v){console.log(`NavTimeline:onNavigate(event:${JSON.stringify(v.detail)})`),n(8,a=v.detail.eraID),g(),E()}const c=ye();let f,h,p=[],d=ge().domain([0,p.length-1]);Vn(()=>{console.log("NavTimeline:onMount"),E(),window.addEventListener("resize",E)});function g(){console.log(`NavTimeline:recalculateActiveChapters(activeEraID:${a})`),r&&(n(2,p=[]),Object.values(r).forEach(v=>{v.type="era",p.push(v),a&&v.id==a&&v.chapters&&Object.values(v.chapters).forEach(H=>{H.type="chapter",H.eraID=v.id,p.push(H)})}))}console.log(p.length),g();function y(v){console.log("NavTimeline:onMouseOver(id:"+JSON.stringify(v)+")"),ze("#title-"+v+", #anchor-"+v).classed("visible",!0),c("chapterMouseOver",{id:v})}function b(v){console.log("NavTimeline:onMouseLeave(id:"+JSON.stringify(v)+")"),fe(function(){ze("#title-"+v+", #anchor-"+v).classed("visible",!1)},100),c("chapterMouseLeave",{id:v})}function N(v){Object.values(r).forEach(H=>{Object.values(H.chapters).forEach(w=>{w.link&&w.id==v&&(window.location=vt+w.link)})})}function k(v){console.log(`NavTimeline:onEraClick(${v})`),i?c("navigate",{viewID:r[v].view,eraID:v}):dn(vt==""?"/":vt)}function E(){n(1,h=parseInt(Bi("#timeline").style("width"),10)),console.log(h),n(3,d=ge().domain([0,p.length-1]).range([_t,h-_t]))}const A=v=>y(v.id),ee=v=>b(v.id),ne=v=>{v.type=="chapter"?N(v.id):k(v.id,v.name)};function Et(v){Gn[v?"unshift":"push"](()=>{f=v,n(0,f)})}return t.$$set=v=>{"eras"in v&&n(9,r=v.eras),"navigateWithinMap"in v&&n(10,i=v.navigateWithinMap),"activeEraID"in v&&n(8,a=v.activeEraID)},[f,h,p,d,y,b,N,k,a,r,i,o,s,l,u,A,ee,ne,Et]}class ss extends be{constructor(e){super(),xe(this,e,Ko,Uo,me,{eras:9,navigateWithinMap:10,activeEraID:8,onMapFeatureMouseOver:11,onMapFeatureMouseOut:12,onMapFeatureClick:13,onNavigate:14})}get onMapFeatureMouseOver(){return this.$$.ctx[11]}get onMapFeatureMouseOut(){return this.$$.ctx[12]}get onMapFeatureClick(){return this.$$.ctx[13]}get onNavigate(){return this.$$.ctx[14]}}const ls={colorEraPre1600s:"#5199C7",colorEraEarlyEuropeanSettlement:"#70AC00",colorEraUrbanIndustrial:"#9762AF"},Zo="intro",Qo={"nyc-region-land":{id:"nyc-landline",type:"shapefile",url:"/gis/NYC_region_land_4326_topo.json",topoJson:!0,topoJsonObjectsName:"nyc_region_land"},"nyc-historical-waterline":{id:"nyc-historical-waterline",type:"shapefile",url:"/gis/historical_water_polygons_final_4326_topo.json",topoJson:!0,topoJsonObjectsName:"historical_water"},"seventeenseventysix-shoreline":{id:"seventeenseventysix-shoreline",type:"shapefile",url:"/gis/1776_shoreline_polylines_4326_topo.json",topoJson:!0,topoJsonObjectsName:"1776_shoreline"},pluto:{id:"pluto",type:"tile",urlPath:"/gis/pluto/",urlExtension:"png"},"indian-paths-kings-county":{id:"indian-paths-kings-county",type:"shapefile",url:"/gis/Indian_villages_ponds_paths_kings_cty_4326.geojson"},"indian-paths-ny":{id:"indian-paths-nyc",type:"shapefile",url:"/gis/Indian_paths_of_great_metropolis_NYC_bolton_1912_4326.geojson"},"oyster-historic-beds":{id:"oyster-historic-beds",type:"shapefile",url:"/gis/historic_oyster_beds_HEP.geojson"},"oyster-restoration-sites":{id:"oyster-restoration-sites",type:"shapefile",geometryType:"polygons",url:"/gis/recent_restoration_sites_oysters_2018_HEP.geojson"},"era-1-polys":{id:"era-1-polys",type:"shapefile",geometryType:"polygons",url:"/gis/era_1_polys_4326_topo.json",topoJson:!0,topoJsonObjectsName:"era_1_polys",interactive:!0},"era-1-lines-the-strand":{id:"era-1-lines-the-strand",type:"shapefile",geometryType:"polygons",url:"/gis/era_1_lines_the_strand_4326.geojson"},"bip-lots":{id:"bip-lots",type:"shapefile",url:"/gis/BIP_FinalLots.geojson",interactive:!1},"era3-story-polygons":{id:"era3-story-polygons",type:"shapefile",url:"/gis/era_3_1855-1950s_story_polys_sorted.geojson",interactive:!0},"fbip-labels":{id:"fbip-labels",type:"label",path:"/gis/fbip_labels.geojson",interactive:!1,filterOnContext:!0},"era-1-labels":{id:"era-1-labels",type:"label",labelField:"label_2",path:"/gis/era_1_labels.geojson",interactive:!0}},jo={intro:{id:"intro",name:"Bushwick Inlet Park History Project",extent:{nwLng:-73.98,nwLat:40.74,seLng:-73.94,seLat:40.695},maps:["nyc-landline","nyc-historical-waterline","seventeenseventysix-shoreline","pluto","bip-lots","fbip-labels"],story:[{type:"p",text:"Bushwick Inlet Park is a 28-acre piece of land that sits along the East River at the juncture of Greenpoint and Williamsburg. The park was created in 2005, a giveback from the City of New York to the residents of North Brooklyn as part of a massive waterfront rezoning that so far has added more than 50,000 new residents to these neighborhoods[WD1] . The design of the park is guided by a master plan design prepared by Donna Walcavage of Stantec and endorsed through a community process in 2007."},{type:"h",stop:"when-it-is-completed",text:"When it is completed"},{type:"p",text:"When it is completed, Bushwick Inlet Park will be the crown jewel set in the midst of 5 miles of almost continuous waterfront esplanades running from the Wallabout Creek to Newtown Creek. Set between Marsha P. Johnson East River State Park to the south and the Greenpoint Monitor Museum to the north, BIP and its immediate neighbors will provide close to 36 acres of contiguous public open space [WD2] directly on the East River. But almost 20 years after the rezoning, the park is still more of a concept than a reality. As of 2023, less than a third of the park has been constructed, and it was only in the past few years that the City acquired – at great expense – the final piece of the puzzle that makes up Bushwick Inlet Park. Completion of the full park is likely decades away."},{type:"p",text:"The Bushwick Inlet Park “puzzle” consists of 5 pieces of property[WD3] , acquired at various times between 2007 and 2016 and scheduled to be developed in phases."},{type:"h",text:"Motiva site (2-acres)"},{type:"p",text:"At the north end of the park, wrapping the inlet itself on three sides is the 2-acre Motiva site, the only part of the park within Greenpoint."},{type:"h",text:"Bayside Oil site (10.4-acres)"},{type:"p",text:"On the south side of the inlet is the 10.4-acre Bayside Oil site, whose large oil tanks were a stark reminder of the environmental degradation of waterfront until their demolition in 2019."},{type:"h",stop:"50-kent-st",text:"50 Kent Avenue (2-acres)"},{type:"p",text:"South of the Bayside property on Kent Avenue is a 2-acre, half-block parcel known as 50 Kent Avenue that opened in 2021 as the newest piece of green space to be added to the Park. The western half of this block and the full block to the south comprise the CitiStorage property, 8.5 acres in total."},{type:"h",text:"Soccer Field site (4.6-acres)"},{type:"p",text:"The southernmost block of Bushwick Inlet Park is the 4.6-acre soccer field site, also home to the North Brooklyn Parks headquarter/community house."}],stops:{"when-it-is-completed":{extent:{nwLng:-73.96480845,nwLat:40.72729899,seLng:-73.95572544,seLat:40.71944572},maps:["nyc-landline","historical-waterline","seventeenseventysix-shoreline","pluto","bip-lots","fbip-labels"]},"50-kent-st":{extent:{nwLng:-73.96480845,nwLat:40.72729899,seLng:-73.95572544,seLat:40.71944572},maps:["nyc-landline","historical-waterline","seventeenseventysix-shoreline","pluto","bip-lots","fbip-labels"]}}},"pre-1600s":{id:"pre-1600s",name:"Pre 1600s",extent:{nwLng:-73.99610077,nwLat:40.74185405,seLng:-73.91023564,seLat:40.68369957},maps:["nyc-historical-waterline","indian-paths-kings-county","pluto","era-1-polys","era-1-lines-the-strand","era-1-labels"]},"early-european-settlement":{id:"early-european-settlement",name:"Early European Settlement",extent:{nwLng:-73.98,nwLat:40.74,seLng:-73.94,seLat:40.695},maps:["nyc-landline","nyc-historical-waterline"]},"urban-industrial":{id:"urban-industrial",name:"Urban + Industrial Era",extent:{nwLng:-73.96621568,nwLat:40.729,seLng:-73.9415892,seLat:40.7110097},maps:["nyc-landline","nyc-historical-waterline","seventeenseventysix-shoreline","pluto","fbip-labels","era3-story-polygons"],story:[{type:"h",text:"Introduction"},{type:"p",text:"First envisioned as a suburb for growing Manhattan across the river, Williamsburgh quickly became a center for manufacture. In the 1850s, two industries that would transform north Brooklyn – sugar refining and petroleum distillation – were established on the Williamsburgh waterfront."},{type:"p",text:"By 1900, the Williamsburg and Greenpoint waterfronts were fully given over to industrial and distribution operations. At the head of Manhattan Avenue was the Chelsea Manufacturing Co., maker of ropes and ships stores (and a successor to the early history of rope walks). South of there was the Gleason-Tiebot Glass Works (now Glasserie). Clay Street south to Java Street was mostly given over to lumber yards, bringing bulk wood products in via the waterfront for distribution throughout the city. These yards continued in operation through the late 20th century and much of the property is now developed as Greenpoint Landing. South of Greenpoint Avenue was the American Manufacturing Company (better known now as Greenpoint Terminal Market), another rope and ship’s stores manufacturing company. And south of there was the Continental Iron Works, still in operation in 1900. South of the inlet in Williamsburg, Standard Oil and the Williamsburg Gas Light Company continued to operate as described above. Cooperages (barrel factories – barrels were the preferred containers for bulk sugar and other products), distilleries, coal pockets (coal transfer stations) and sugar refineries occupied the waterfront south of North 4th Street. The American Sugar Refining Company (previously Havemeyers, later Domino Sugar) occupied the blocks from Grand Street to South 6th Street (the Williamsburg Bridge was under construction at this time); Mollenhauer’s sugar refinery was located between South 7thStreet and Division Avenue."}]},migration:{id:"migration",name:"Migration"},"Activism + Deindustrialization":{id:"activism-deindustrialization",name:"Activism + Deindustrialization"}},ts={"pre-1600s":{id:"pre-1600s",name:"Pre 1600s",shortLabel:"Pre 1620",longLabel:"Before 1620",link:null,view:"pre-1600s",chapters:{geography:{id:"geography",name:"Geography",link:"/era/pre-1600s/geography"},waterways:{id:"waterways",name:"Waterways",link:"/era/pre-1600s/waterways"},"the-strand":{id:"the-strand",name:"The Strand",link:"/era/pre-1600s/the-strand"},"indigenous-population":{id:"indigenous-population",name:"Indigenous Population",link:"/era/pre-1600s/indigenous-population"}}},"early-european-settlement":{id:"early-european-settlement",name:"Early European Settlement",link:null,view:"early-european-settlement",chapters:{"bushwick-patent":{id:"bushwick-patent",name:"Bushwick Patent",link:"/era/early-european-settlement/bushwick-patent"},"original-settlers":{id:"original-settlers",name:"Original Settlers",link:"/era/early-european-settlement/original-settlers"},"bushwick-village":{id:"bushwick-village",name:"Bushwick Village",link:"/era/early-european-settlement/bushwick-village"},"early-farms":{id:"early-farms",name:"Early Farms",link:"/era/early-european-settlement/early-farms"},"founding-of-williamsburgh":{id:"founding-of-williamsburgh",name:"Founding of Williamsburgh",link:"/era/early-european-settlement/founding-of-williamsburgh"},"williamsburgh-grows":{id:"williamsburgh-grows",name:"Williamsburgh Grows",link:"/era/early-european-settlement/williamsburgh-grows"},"greenpoint-urbanizes":{id:"greenpoint-urbanizes",name:"Greenpoint Urbanizes",link:"/era/early-european-settlement/greenpoint-urbanizes"},"back-at-the-creek":{id:"back-at-the-creek",name:"Back at the-Creek",link:"/era/early-european-settlement/back-at-the-creek"},"changing-the-creek":{id:"changing-the-creek",name:"Changing the Creek",link:"/era/early-european-settlement/changing-the-creek"},"early-industrialization":{id:"early-industrialization",name:"Early Industrialization",link:"/era/early-european-settlement/early-industrialization"},"continental-ironworks":{id:"continental-ironworks",name:"Continental Ironworks",link:"/era/early-european-settlement/continental-ironworks"},"williamsburgh-becomes-a-city":{id:"williamsburgh-becomes-a-city",name:"Williamsburgh Becomes a City",link:"/era/early-european-settlement/williamsburgh-becomes-a-city"}}},"urban-industrial":{id:"urban-industrial",name:"Urban + Industrial Era",shortLabel:"1850-1950",longLabel:"Urban and Industrial Era",link:null,view:"urban-industrial",chapters:{sugar:{id:"sugar",name:"Sugar",link:"/era/urban-industrial/sugar"},petroleum:{id:"petroleum",name:"Petroleum",link:"/era/urban-industrial/petroleum"},"coal-tar-gasification":{id:"coal-tar-gasification",name:"Coal-tar Gasification",link:"/era/urban-industrial/coal-tar-gasification"},"shipbuilding-and-ironworks":{id:"shipbuilding-and-ironworks",name:"Shipbuilding and Ironworks",link:"/era/urban-industrial/shipbuilding-and-ironworks"},"the-creek-disappears":{id:"the-creek-disappears",name:"The Creek Disappears",link:"/era/urban-industrial/the-creek-disappears"},"eastern-district-terminal":{id:"eastern-district-terminal",name:"Eastern District Terminal",link:"/era/urban-industrial/eastern-district-terminal"},demographics:{id:"demographics",name:"Demographics",link:"/era/urban-industrial/demographics"}}},migration:{id:"migration",name:"Migration",link:null,view:"migration",chapters:{}},"Activism + Deindustrialization":{id:"activism-deindustrialization",name:"Activism + Deindustrialization",link:null,view:"activism-deindustrialization",chapters:{}}},us={intialView:Zo,maps:Qo,views:jo,eras:ts};export{is as N,ut as T,ss as a,ls as b,Bi as c,gn as d,ba as e,St as f,as as g,os as i,us as s};
